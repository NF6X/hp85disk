\hypertarget{gpib__hal_8c}{}\doxysection{gpib/gpib\+\_\+hal.c File Reference}
\label{gpib__hal_8c}\index{gpib/gpib\_hal.c@{gpib/gpib\_hal.c}}


G\+P\+IB emulator hardwware layer for H\+P85 disk emulator project for A\+VR.  


{\ttfamily \#include \char`\"{}gpib\+\_\+hal.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}gpib.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}fatfs.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}posix.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}defines.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}debug.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{gpib__hal_8c_a4a0091ae7bb71269cff034e959d29efd}{gpib\+\_\+timer\+\_\+init}} ()
\begin{DoxyCompactList}\small\item\em Install G\+P\+IB timers, Elapsed time and Timeout tasks. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{gpib__hal_8c_aaff7ca1ff8eb6c387fe41ce530fe0eb8}{reverse\+\_\+8bits}} (uint8\+\_\+t mask)
\begin{DoxyCompactList}\small\item\em Reverse the bits in an 8 bit value. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{gpib__hal_8c_a62ab33e5f2d926916ee673ddcb8e9410}{ppr\+\_\+set}} (uint8\+\_\+t mask)
\begin{DoxyCompactList}\small\item\em Enable or Disable Parallel Poll Response bits -\/ P\+PR. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{gpib__hal_8c_a639fcfaa605f43d589798545d9d1a975}{ppr\+\_\+reg}} ()
\begin{DoxyCompactList}\small\item\em Return P\+PR enable register. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{gpib__hal_8c_a7178127038301c8430b9722c61be2d62}{ppr\+\_\+init}} ()
\begin{DoxyCompactList}\small\item\em Reset P\+PR enable register -\/ all disable.. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{gpib__hal_8c_a4ab95314499ea3d42ead5229bfbc2b27}{ppr\+\_\+bit\+\_\+set}} (uint8\+\_\+t bit)
\begin{DoxyCompactList}\small\item\em Enable hardware P\+PR response for a given device. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{gpib__hal_8c_af29c709ec1aeedc42ff180662636d8c6}{ppr\+\_\+bit\+\_\+clr}} (uint8\+\_\+t bit)
\begin{DoxyCompactList}\small\item\em Disbale hardware P\+PR response for a given device. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ff_8h_a49d0171ecbd362cda5680a0d360db44c}{F\+R\+E\+S\+U\+LT}} \mbox{\hyperlink{gpib__hal_8c_a7d75cde9e0af3c75dce17919bdf7fe3e}{dbf\+\_\+open}} (\mbox{\hyperlink{structFIL}{F\+IL}} $\ast$fp, const \mbox{\hyperlink{ff_8h_a03bdb8ce5895c7e261aadc2529637546}{T\+C\+H\+AR}} $\ast$path, \mbox{\hyperlink{ff_8h_a4ae1dab0fb4b072a66584546209e7d58}{B\+Y\+TE}} mode)
\begin{DoxyCompactList}\small\item\em Wrapper for Fat\+Fs \mbox{\hyperlink{ff_8c_aefdef7126128d99d0b3bd82c28e54d80}{f\+\_\+open()}} that can displays errors. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ff_8h_a49d0171ecbd362cda5680a0d360db44c}{F\+R\+E\+S\+U\+LT}} \mbox{\hyperlink{gpib__hal_8c_a2303ee350c0d266ac87a2135936cb727}{dbf\+\_\+read}} (\mbox{\hyperlink{structFIL}{F\+IL}} $\ast$fp, void $\ast$buff, \mbox{\hyperlink{ff_8h_a36cb3b01d81ffd844bbbfb54003e06ec}{U\+I\+NT}} btr, \mbox{\hyperlink{ff_8h_a36cb3b01d81ffd844bbbfb54003e06ec}{U\+I\+NT}} $\ast$br)
\begin{DoxyCompactList}\small\item\em Wrapper for Fat\+Fs \mbox{\hyperlink{ff_8c_ac4c3dcb6869ca252888eebabe39727b3}{f\+\_\+read()}} that can display errors. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ff_8h_a49d0171ecbd362cda5680a0d360db44c}{F\+R\+E\+S\+U\+LT}} \mbox{\hyperlink{gpib__hal_8c_a14af877aeb5d346730aaabba033695bf}{dbf\+\_\+write}} (\mbox{\hyperlink{structFIL}{F\+IL}} $\ast$fp, const void $\ast$buff, \mbox{\hyperlink{ff_8h_a36cb3b01d81ffd844bbbfb54003e06ec}{U\+I\+NT}} btw, \mbox{\hyperlink{ff_8h_a36cb3b01d81ffd844bbbfb54003e06ec}{U\+I\+NT}} $\ast$bw)
\begin{DoxyCompactList}\small\item\em wrapper for Fat\+Fs \mbox{\hyperlink{ff_8c_ae6a4dfae8a9e308bdb2283a37ef680f2}{f\+\_\+write()}} that can display errors. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ff_8h_a49d0171ecbd362cda5680a0d360db44c}{F\+R\+E\+S\+U\+LT}} \mbox{\hyperlink{gpib__hal_8c_afd7a928788776071dc461e7d99d9f506}{dbf\+\_\+lseek}} (\mbox{\hyperlink{structFIL}{F\+IL}} $\ast$fp, \mbox{\hyperlink{ff_8h_ad342ac907eb044443153a22f964bf0af}{D\+W\+O\+RD}} ofs)
\begin{DoxyCompactList}\small\item\em Wrapper of Fat\+Fs f\+\_\+seek() that can display errors. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ff_8h_a49d0171ecbd362cda5680a0d360db44c}{F\+R\+E\+S\+U\+LT}} \mbox{\hyperlink{gpib__hal_8c_a827fbebac6fd202d102386e15b92b28b}{dbf\+\_\+close}} (\mbox{\hyperlink{structFIL}{F\+IL}} $\ast$fp)
\begin{DoxyCompactList}\small\item\em Wrapper of Fat\+Fs \mbox{\hyperlink{ff_8c_a53882db20ef4323dcfd1874d7733ffc3}{f\+\_\+close()}} that can display errors. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{gpib__hal_8c_af60274390be1b899ca94740dba5931df}{dbf\+\_\+open\+\_\+read}} (char $\ast$name, uint32\+\_\+t pos, void $\ast$buff, int size, int $\ast$errors)
\begin{DoxyCompactList}\small\item\em Open, Seek, Read data and Close Fat\+Fs functions. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{gpib__hal_8c_a9a6e6853672fd6150839e79ee4e857af}{dbf\+\_\+open\+\_\+write}} (char $\ast$name, uint32\+\_\+t pos, void $\ast$buff, int size, int $\ast$errors)
\begin{DoxyCompactList}\small\item\em Open, Seek, Write data and Close Fat\+Fs functions. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{gpib__hal_8h_a9457cd46dc201d12b1382d959db2a99a}{gpib\+\_\+t}} \mbox{\hyperlink{gpib__hal_8c_aced56ceaa5d240d5554a33f88596f87a}{gpib\+\_\+timer}}
\item 
static uint8\+\_\+t \mbox{\hyperlink{gpib__hal_8c_a1dd7c6f7ad15314b697849542f85b4a3}{\+\_\+ppr\+\_\+reg}}
\begin{DoxyCompactList}\small\item\em Parallel Poll Response bit mask. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
G\+P\+IB emulator hardwware layer for H\+P85 disk emulator project for A\+VR. 

\begin{DoxyParagraph}{Edit History}

\begin{DoxyItemize}
\item \mbox{[}1.\+0\mbox{]} \mbox{[}Mike Gore\mbox{]} Initial revision of file.
\end{DoxyItemize}
\end{DoxyParagraph}
\begin{DoxyParagraph}{Copyright \copyright{} 2014-\/2020 Mike Gore, All rights reserved. G\+PL}

\end{DoxyParagraph}
\begin{DoxySeeAlso}{See also}
\href{http://github.com/magore/hp85disk}{\texttt{ http\+://github.\+com/magore/hp85disk}} 

\href{http://github.com/magore/hp85disk/COPYRIGHT.md}{\texttt{ http\+://github.\+com/magore/hp85disk/\+C\+O\+P\+Y\+R\+I\+G\+H\+T.\+md}} for Copyright details 
\end{DoxySeeAlso}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{gpib__hal_8c_a827fbebac6fd202d102386e15b92b28b}\label{gpib__hal_8c_a827fbebac6fd202d102386e15b92b28b}} 
\index{gpib\_hal.c@{gpib\_hal.c}!dbf\_close@{dbf\_close}}
\index{dbf\_close@{dbf\_close}!gpib\_hal.c@{gpib\_hal.c}}
\doxysubsubsection{\texorpdfstring{dbf\_close()}{dbf\_close()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ff_8h_a49d0171ecbd362cda5680a0d360db44c}{F\+R\+E\+S\+U\+LT}} dbf\+\_\+close (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structFIL}{F\+IL}} $\ast$}]{fp }\end{DoxyParamCaption})}



Wrapper of Fat\+Fs \mbox{\hyperlink{ff_8c_a53882db20ef4323dcfd1874d7733ffc3}{f\+\_\+close()}} that can display errors. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em fp} & Fat\+Fs \mbox{\hyperlink{structFIL}{F\+IL}} $\ast$ pointer.\\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{ff_8h}{ff.\+h}}. 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
F\+R\+E\+S\+U\+LT dbf\+\_\+close (F\+I\+L$\ast$ fp) 
\end{DoxyReturn}


Definition at line 287 of file gpib\+\_\+hal.\+c.



Referenced by dbf\+\_\+open\+\_\+read(), and dbf\+\_\+open\+\_\+write().

\mbox{\Hypertarget{gpib__hal_8c_afd7a928788776071dc461e7d99d9f506}\label{gpib__hal_8c_afd7a928788776071dc461e7d99d9f506}} 
\index{gpib\_hal.c@{gpib\_hal.c}!dbf\_lseek@{dbf\_lseek}}
\index{dbf\_lseek@{dbf\_lseek}!gpib\_hal.c@{gpib\_hal.c}}
\doxysubsubsection{\texorpdfstring{dbf\_lseek()}{dbf\_lseek()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ff_8h_a49d0171ecbd362cda5680a0d360db44c}{F\+R\+E\+S\+U\+LT}} dbf\+\_\+lseek (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structFIL}{F\+IL}} $\ast$}]{fp,  }\item[{\mbox{\hyperlink{ff_8h_ad342ac907eb044443153a22f964bf0af}{D\+W\+O\+RD}}}]{ofs }\end{DoxyParamCaption})}



Wrapper of Fat\+Fs f\+\_\+seek() that can display errors. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em fp} & Fat\+Fs \mbox{\hyperlink{structFIL}{F\+IL}} $\ast$ pointer. \\
\hline
\mbox{\texttt{ in}}  & {\em ofs} & seek offset.\\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{ff_8h}{ff.\+h}}. 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
F\+R\+E\+S\+U\+LT 
\end{DoxyReturn}


Definition at line 266 of file gpib\+\_\+hal.\+c.



Referenced by dbf\+\_\+open\+\_\+read(), and dbf\+\_\+open\+\_\+write().

\mbox{\Hypertarget{gpib__hal_8c_a7d75cde9e0af3c75dce17919bdf7fe3e}\label{gpib__hal_8c_a7d75cde9e0af3c75dce17919bdf7fe3e}} 
\index{gpib\_hal.c@{gpib\_hal.c}!dbf\_open@{dbf\_open}}
\index{dbf\_open@{dbf\_open}!gpib\_hal.c@{gpib\_hal.c}}
\doxysubsubsection{\texorpdfstring{dbf\_open()}{dbf\_open()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ff_8h_a49d0171ecbd362cda5680a0d360db44c}{F\+R\+E\+S\+U\+LT}} dbf\+\_\+open (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structFIL}{F\+IL}} $\ast$}]{fp,  }\item[{const \mbox{\hyperlink{ff_8h_a03bdb8ce5895c7e261aadc2529637546}{T\+C\+H\+AR}} $\ast$}]{path,  }\item[{\mbox{\hyperlink{ff_8h_a4ae1dab0fb4b072a66584546209e7d58}{B\+Y\+TE}}}]{mode }\end{DoxyParamCaption})}



Wrapper for Fat\+Fs \mbox{\hyperlink{ff_8c_aefdef7126128d99d0b3bd82c28e54d80}{f\+\_\+open()}} that can displays errors. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em fp} & Fat\+Fs \mbox{\hyperlink{structFIL}{F\+IL}} handle \\
\hline
\mbox{\texttt{ in}}  & {\em path} & path name of file to open \\
\hline
\mbox{\texttt{ in}}  & {\em mode} & Fat\+Fs open mode flags\\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{ff_8h}{ff.\+h}}
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
F\+R\+E\+S\+U\+LT f\+\_\+open(fp,path, mode); 
\end{DoxyReturn}


Definition at line 195 of file gpib\+\_\+hal.\+c.



Referenced by dbf\+\_\+open\+\_\+read(), and dbf\+\_\+open\+\_\+write().

\mbox{\Hypertarget{gpib__hal_8c_af60274390be1b899ca94740dba5931df}\label{gpib__hal_8c_af60274390be1b899ca94740dba5931df}} 
\index{gpib\_hal.c@{gpib\_hal.c}!dbf\_open\_read@{dbf\_open\_read}}
\index{dbf\_open\_read@{dbf\_open\_read}!gpib\_hal.c@{gpib\_hal.c}}
\doxysubsubsection{\texorpdfstring{dbf\_open\_read()}{dbf\_open\_read()}}
{\footnotesize\ttfamily int dbf\+\_\+open\+\_\+read (\begin{DoxyParamCaption}\item[{char $\ast$}]{name,  }\item[{uint32\+\_\+t}]{pos,  }\item[{void $\ast$}]{buff,  }\item[{int}]{size,  }\item[{int $\ast$}]{errors }\end{DoxyParamCaption})}



Open, Seek, Read data and Close Fat\+Fs functions. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em name} & File name to open. \\
\hline
\mbox{\texttt{ in}}  & {\em pos} & file offset. \\
\hline
\mbox{\texttt{ out}}  & {\em buff} & buffer to read data into. \\
\hline
\mbox{\texttt{ in}}  & {\em size} & bytes to read. \\
\hline
\mbox{\texttt{ in}}  & {\em errors} & error flags pointer.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bytes actually read. 

-\/1 on error. 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\+: \mbox{\hyperlink{ff_8h}{ff.\+h}}. 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
F\+R\+E\+S\+U\+LT 
\end{DoxyReturn}
S\+E\+EK

Definition at line 314 of file gpib\+\_\+hal.\+c.



Referenced by S\+S80\+\_\+locate\+\_\+and\+\_\+read().

\mbox{\Hypertarget{gpib__hal_8c_a9a6e6853672fd6150839e79ee4e857af}\label{gpib__hal_8c_a9a6e6853672fd6150839e79ee4e857af}} 
\index{gpib\_hal.c@{gpib\_hal.c}!dbf\_open\_write@{dbf\_open\_write}}
\index{dbf\_open\_write@{dbf\_open\_write}!gpib\_hal.c@{gpib\_hal.c}}
\doxysubsubsection{\texorpdfstring{dbf\_open\_write()}{dbf\_open\_write()}}
{\footnotesize\ttfamily int dbf\+\_\+open\+\_\+write (\begin{DoxyParamCaption}\item[{char $\ast$}]{name,  }\item[{uint32\+\_\+t}]{pos,  }\item[{void $\ast$}]{buff,  }\item[{int}]{size,  }\item[{int $\ast$}]{errors }\end{DoxyParamCaption})}



Open, Seek, Write data and Close Fat\+Fs functions. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em name} & File name to open. \\
\hline
\mbox{\texttt{ in}}  & {\em pos} & file offset. \\
\hline
\mbox{\texttt{ in}}  & {\em buff} & buffer to write. \\
\hline
\mbox{\texttt{ in}}  & {\em size} & bytes to write. \\
\hline
\mbox{\texttt{ in}}  & {\em errors} & error flags pointer.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bytes actually written. 

-\/1 on error. 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\+: \mbox{\hyperlink{ff_8h}{ff.\+h}}. 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
F\+R\+E\+S\+U\+LT 
\end{DoxyReturn}
S\+E\+EK

Definition at line 379 of file gpib\+\_\+hal.\+c.



Referenced by S\+S80\+\_\+locate\+\_\+and\+\_\+write().

\mbox{\Hypertarget{gpib__hal_8c_a2303ee350c0d266ac87a2135936cb727}\label{gpib__hal_8c_a2303ee350c0d266ac87a2135936cb727}} 
\index{gpib\_hal.c@{gpib\_hal.c}!dbf\_read@{dbf\_read}}
\index{dbf\_read@{dbf\_read}!gpib\_hal.c@{gpib\_hal.c}}
\doxysubsubsection{\texorpdfstring{dbf\_read()}{dbf\_read()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ff_8h_a49d0171ecbd362cda5680a0d360db44c}{F\+R\+E\+S\+U\+LT}} dbf\+\_\+read (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structFIL}{F\+IL}} $\ast$}]{fp,  }\item[{void $\ast$}]{buff,  }\item[{\mbox{\hyperlink{ff_8h_a36cb3b01d81ffd844bbbfb54003e06ec}{U\+I\+NT}}}]{btr,  }\item[{\mbox{\hyperlink{ff_8h_a36cb3b01d81ffd844bbbfb54003e06ec}{U\+I\+NT}} $\ast$}]{br }\end{DoxyParamCaption})}



Wrapper for Fat\+Fs \mbox{\hyperlink{ff_8c_ac4c3dcb6869ca252888eebabe39727b3}{f\+\_\+read()}} that can display errors. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em fp} & Fat\+Fs \mbox{\hyperlink{structFIL}{F\+IL}} handle. \\
\hline
\mbox{\texttt{ in}}  & {\em buff} & buffer to read data into. \\
\hline
\mbox{\texttt{ in}}  & {\em btr} & bytes to read. \\
\hline
\mbox{\texttt{ in}}  & {\em br} & bytes actually read.\\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{ff_8h}{ff.\+h}}
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
F\+R\+E\+S\+U\+LT f\+\_\+read (F\+I\+L$\ast$ fp, void$\ast$ buff, U\+I\+NT btr, U\+I\+N\+T$\ast$ br) 
\end{DoxyReturn}


Definition at line 220 of file gpib\+\_\+hal.\+c.



Referenced by dbf\+\_\+open\+\_\+read().

\mbox{\Hypertarget{gpib__hal_8c_a14af877aeb5d346730aaabba033695bf}\label{gpib__hal_8c_a14af877aeb5d346730aaabba033695bf}} 
\index{gpib\_hal.c@{gpib\_hal.c}!dbf\_write@{dbf\_write}}
\index{dbf\_write@{dbf\_write}!gpib\_hal.c@{gpib\_hal.c}}
\doxysubsubsection{\texorpdfstring{dbf\_write()}{dbf\_write()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ff_8h_a49d0171ecbd362cda5680a0d360db44c}{F\+R\+E\+S\+U\+LT}} dbf\+\_\+write (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structFIL}{F\+IL}} $\ast$}]{fp,  }\item[{const void $\ast$}]{buff,  }\item[{\mbox{\hyperlink{ff_8h_a36cb3b01d81ffd844bbbfb54003e06ec}{U\+I\+NT}}}]{btw,  }\item[{\mbox{\hyperlink{ff_8h_a36cb3b01d81ffd844bbbfb54003e06ec}{U\+I\+NT}} $\ast$}]{bw }\end{DoxyParamCaption})}



wrapper for Fat\+Fs \mbox{\hyperlink{ff_8c_ae6a4dfae8a9e308bdb2283a37ef680f2}{f\+\_\+write()}} that can display errors. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em fp} & Fat\+Fs \mbox{\hyperlink{structFIL}{F\+IL}} handle. \\
\hline
\mbox{\texttt{ in}}  & {\em buff} & buffer to write data from. \\
\hline
\mbox{\texttt{ in}}  & {\em btw} & bytes to write. \\
\hline
\mbox{\texttt{ in}}  & {\em bw} & bytes actually written.\\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{ff_8h}{ff.\+h}} 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
F\+R\+E\+S\+U\+LT f\+\_\+write (F\+I\+L$\ast$ fp, void$\ast$ buff, U\+I\+NT btw, U\+I\+N\+T$\ast$ bw) 
\end{DoxyReturn}


Definition at line 244 of file gpib\+\_\+hal.\+c.



Referenced by dbf\+\_\+open\+\_\+write().

\mbox{\Hypertarget{gpib__hal_8c_a4a0091ae7bb71269cff034e959d29efd}\label{gpib__hal_8c_a4a0091ae7bb71269cff034e959d29efd}} 
\index{gpib\_hal.c@{gpib\_hal.c}!gpib\_timer\_init@{gpib\_timer\_init}}
\index{gpib\_timer\_init@{gpib\_timer\_init}!gpib\_hal.c@{gpib\_hal.c}}
\doxysubsubsection{\texorpdfstring{gpib\_timer\_init()}{gpib\_timer\_init()}}
{\footnotesize\ttfamily void gpib\+\_\+timer\+\_\+init (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Install G\+P\+IB timers, Elapsed time and Timeout tasks. 

===================================================


\begin{DoxyItemize}
\item Has some platform dependent code. \begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 29 of file gpib\+\_\+hal.\+c.



Referenced by main().

\mbox{\Hypertarget{gpib__hal_8c_af29c709ec1aeedc42ff180662636d8c6}\label{gpib__hal_8c_af29c709ec1aeedc42ff180662636d8c6}} 
\index{gpib\_hal.c@{gpib\_hal.c}!ppr\_bit\_clr@{ppr\_bit\_clr}}
\index{ppr\_bit\_clr@{ppr\_bit\_clr}!gpib\_hal.c@{gpib\_hal.c}}
\doxysubsubsection{\texorpdfstring{ppr\_bit\_clr()}{ppr\_bit\_clr()}}
{\footnotesize\ttfamily void ppr\+\_\+bit\+\_\+clr (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{bit }\end{DoxyParamCaption})}



Disbale hardware P\+PR response for a given device. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em bit} & P\+PR bit to disable.
\begin{DoxyItemize}
\item HI = P\+PR bus L\+OW.
\item L\+OW = P\+PR bus F\+L\+O\+AT.
\item Device P\+PR bits are specified in reversed order in G\+P\+IB.
\item 0 controlls G\+P\+IB D8.
\item 1 controlls G\+P\+IB D7.
\item 2 controlls G\+P\+IB D6.
\item 3 controlls G\+P\+IB D5.
\item 4 controlls G\+P\+IB D4.
\item 5 controlls G\+P\+IB D3.
\item 6 controlls G\+P\+IB D2.
\item 7 controlls G\+P\+IB D1. 
\end{DoxyItemize}\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}
F\+I\+X\+ME \+\_\+ppr\+\_\+reg = 0;

Definition at line 177 of file gpib\+\_\+hal.\+c.



Referenced by gpib\+\_\+disable\+\_\+\+P\+P\+R(), and gpib\+\_\+tests().

\mbox{\Hypertarget{gpib__hal_8c_a4ab95314499ea3d42ead5229bfbc2b27}\label{gpib__hal_8c_a4ab95314499ea3d42ead5229bfbc2b27}} 
\index{gpib\_hal.c@{gpib\_hal.c}!ppr\_bit\_set@{ppr\_bit\_set}}
\index{ppr\_bit\_set@{ppr\_bit\_set}!gpib\_hal.c@{gpib\_hal.c}}
\doxysubsubsection{\texorpdfstring{ppr\_bit\_set()}{ppr\_bit\_set()}}
{\footnotesize\ttfamily void ppr\+\_\+bit\+\_\+set (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{bit }\end{DoxyParamCaption})}



Enable hardware P\+PR response for a given device. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em bit} & P\+PR bit to enable.
\begin{DoxyItemize}
\item HI = P\+PR bus L\+OW.
\item L\+OW = P\+PR bus F\+L\+O\+AT.
\item Device P\+PR bits are specified in reversed order in G\+P\+IB.
\item 0 controlls G\+P\+IB D8.
\item 1 controlls G\+P\+IB D7.
\item 2 controlls G\+P\+IB D6.
\item 3 controlls G\+P\+IB D5.
\item 4 controlls G\+P\+IB D4.
\item 5 controlls G\+P\+IB D3.
\item 6 controlls G\+P\+IB D2.
\item 7 controlls G\+P\+IB D1.
\end{DoxyItemize}\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}
F\+I\+X\+ME \+\_\+ppr\+\_\+reg = 0;

Definition at line 153 of file gpib\+\_\+hal.\+c.



Referenced by gpib\+\_\+enable\+\_\+\+P\+P\+R(), and gpib\+\_\+tests().

\mbox{\Hypertarget{gpib__hal_8c_a7178127038301c8430b9722c61be2d62}\label{gpib__hal_8c_a7178127038301c8430b9722c61be2d62}} 
\index{gpib\_hal.c@{gpib\_hal.c}!ppr\_init@{ppr\_init}}
\index{ppr\_init@{ppr\_init}!gpib\_hal.c@{gpib\_hal.c}}
\doxysubsubsection{\texorpdfstring{ppr\_init()}{ppr\_init()}}
{\footnotesize\ttfamily void ppr\+\_\+init (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Reset P\+PR enable register -\/ all disable.. 


\begin{DoxyItemize}
\item Hides the register access implimentation from the upper level. \begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 126 of file gpib\+\_\+hal.\+c.



Referenced by gpib\+\_\+state\+\_\+init(), and gpib\+\_\+tests().

\mbox{\Hypertarget{gpib__hal_8c_a639fcfaa605f43d589798545d9d1a975}\label{gpib__hal_8c_a639fcfaa605f43d589798545d9d1a975}} 
\index{gpib\_hal.c@{gpib\_hal.c}!ppr\_reg@{ppr\_reg}}
\index{ppr\_reg@{ppr\_reg}!gpib\_hal.c@{gpib\_hal.c}}
\doxysubsubsection{\texorpdfstring{ppr\_reg()}{ppr\_reg()}}
{\footnotesize\ttfamily uint8\+\_\+t ppr\+\_\+reg (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Return P\+PR enable register. 


\begin{DoxyItemize}
\item Hides the register access implimentation from the upper level. \begin{DoxyReturn}{Returns}
P\+PR enable register 
\end{DoxyReturn}

\end{DoxyItemize}optionally reverse bit order in P\+PR mask Used only of P\+PR circuit board P\+PR bits are not reversed in hardware

Definition at line 109 of file gpib\+\_\+hal.\+c.



Referenced by gpib\+\_\+detect\+\_\+\+P\+P(), gpib\+\_\+disable\+\_\+\+P\+P\+R(), and gpib\+\_\+enable\+\_\+\+P\+P\+R().

\mbox{\Hypertarget{gpib__hal_8c_a62ab33e5f2d926916ee673ddcb8e9410}\label{gpib__hal_8c_a62ab33e5f2d926916ee673ddcb8e9410}} 
\index{gpib\_hal.c@{gpib\_hal.c}!ppr\_set@{ppr\_set}}
\index{ppr\_set@{ppr\_set}!gpib\_hal.c@{gpib\_hal.c}}
\doxysubsubsection{\texorpdfstring{ppr\_set()}{ppr\_set()}}
{\footnotesize\ttfamily void ppr\+\_\+set (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{mask }\end{DoxyParamCaption})}



Enable or Disable Parallel Poll Response bits -\/ P\+PR. 


\begin{DoxyItemize}
\item V1 hardware reversed bits in hardware. V2 in software
\item Aside\+: Software P\+PR detection is impractical -\/ timing is sub microsecond. That is why both V1 and V2 boards you hardware detection
\item Mask Bits.
\begin{DoxyItemize}
\item HI = P\+PR bus L\+OW.
\item L\+OW = P\+PR bus F\+L\+O\+AT.
\item Device P\+PR bits are specified in reversed order in G\+P\+IB.
\item 0 controlls G\+P\+IB D8.
\item 1 controlls G\+P\+IB D7.
\item 2 controlls G\+P\+IB D6.
\item 3 controlls G\+P\+IB D5.
\item 4 controlls G\+P\+IB D4.
\item 5 controlls G\+P\+IB D3.
\item 6 controlls G\+P\+IB D2.
\item 7 controlls G\+P\+IB D1.
\end{DoxyItemize}
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em mask} & Parallel Poll Response bits to enable or disable\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}
optionally reverse bit order in P\+PR mask Used only of P\+PR circuit board P\+PR bits are not reversed in hardware

Definition at line 88 of file gpib\+\_\+hal.\+c.



Referenced by gpib\+\_\+tests(), ppr\+\_\+bit\+\_\+clr(), ppr\+\_\+bit\+\_\+set(), and ppr\+\_\+init().

\mbox{\Hypertarget{gpib__hal_8c_aaff7ca1ff8eb6c387fe41ce530fe0eb8}\label{gpib__hal_8c_aaff7ca1ff8eb6c387fe41ce530fe0eb8}} 
\index{gpib\_hal.c@{gpib\_hal.c}!reverse\_8bits@{reverse\_8bits}}
\index{reverse\_8bits@{reverse\_8bits}!gpib\_hal.c@{gpib\_hal.c}}
\doxysubsubsection{\texorpdfstring{reverse\_8bits()}{reverse\_8bits()}}
{\footnotesize\ttfamily uint8\+\_\+t reverse\+\_\+8bits (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{mask }\end{DoxyParamCaption})}



Reverse the bits in an 8 bit value. 


\begin{DoxyItemize}
\item G\+P\+IB Parallel poll response bits are reversed.
\item G\+P\+IB D8 controls first device.
\item G\+P\+IB D1 controls last device.
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em mask} & bit mask to reverse. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
reversed bits 
\end{DoxyReturn}


Definition at line 49 of file gpib\+\_\+hal.\+c.



Referenced by ppr\+\_\+reg(), and ppr\+\_\+set().



\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{gpib__hal_8c_a1dd7c6f7ad15314b697849542f85b4a3}\label{gpib__hal_8c_a1dd7c6f7ad15314b697849542f85b4a3}} 
\index{gpib\_hal.c@{gpib\_hal.c}!\_ppr\_reg@{\_ppr\_reg}}
\index{\_ppr\_reg@{\_ppr\_reg}!gpib\_hal.c@{gpib\_hal.c}}
\doxysubsubsection{\texorpdfstring{\_ppr\_reg}{\_ppr\_reg}}
{\footnotesize\ttfamily uint8\+\_\+t \+\_\+ppr\+\_\+reg\hspace{0.3cm}{\ttfamily [static]}}



Parallel Poll Response bit mask. 



Definition at line 39 of file gpib\+\_\+hal.\+c.



Referenced by ppr\+\_\+bit\+\_\+clr(), ppr\+\_\+bit\+\_\+set(), ppr\+\_\+reg(), and ppr\+\_\+set().

\mbox{\Hypertarget{gpib__hal_8c_aced56ceaa5d240d5554a33f88596f87a}\label{gpib__hal_8c_aced56ceaa5d240d5554a33f88596f87a}} 
\index{gpib\_hal.c@{gpib\_hal.c}!gpib\_timer@{gpib\_timer}}
\index{gpib\_timer@{gpib\_timer}!gpib\_hal.c@{gpib\_hal.c}}
\doxysubsubsection{\texorpdfstring{gpib\_timer}{gpib\_timer}}
{\footnotesize\ttfamily \mbox{\hyperlink{gpib__hal_8h_a9457cd46dc201d12b1382d959db2a99a}{gpib\+\_\+t}} gpib\+\_\+timer}



Definition at line 22 of file gpib\+\_\+hal.\+c.



Referenced by gpib\+\_\+timeout\+\_\+set(), gpib\+\_\+timeout\+\_\+test(), gpib\+\_\+timer\+\_\+elapsed\+\_\+begin(), gpib\+\_\+timer\+\_\+elapsed\+\_\+end(), gpib\+\_\+timer\+\_\+reset(), and gpib\+\_\+timer\+\_\+task().


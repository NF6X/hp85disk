
\begin{DoxyItemize}
\item L\+IF utilities to add,extract,translate to and from L\+IF image fies
\item T\+E\+L\+E\+D\+I\+SK to to convert T\+E\+L\+E\+D\+I\+SK L\+IF archives into pure L\+IF files 

 \subsection*{Copyrights}
\end{DoxyItemize}


\begin{DoxyItemize}
\item Copyright (C) 2014-\/2017 {\itshape Mike Gore}, All rights reserved. G\+PL
\begin{DoxyItemize}
\item \href{http://github.com/magore/hp85disk}{\tt http\+://github.\+com/magore/hp85disk}
\item \href{http://github.com/magore/hp85disk/COPYRIGHT.md}{\tt http\+://github.\+com/magore/hp85disk/\+C\+O\+P\+Y\+R\+I\+G\+H\+T.\+md} for Copyright details
\item lif/teledisk
\begin{DoxyItemize}
\item My T\+E\+L\+E\+D\+I\+SK L\+IF extracter
\begin{DoxyItemize}
\item Note\+: The Tele\+Disk image M\+U\+ST contain a L\+IF image -\/ we do N\+OT translate it
\end{DoxyItemize}
\item R\+E\+A\+D\+M\+E.\+txt
\begin{DoxyItemize}
\item Credits
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyItemize}



 \subsection*{Credits}


\begin{DoxyItemize}
\item Important Contributions (My converted would not have been possible without these)
\begin{DoxyItemize}
\item Dave Dunfield, L\+Z\+SS Code and Tele\+Disk documentation
\begin{DoxyItemize}
\item Copyright 2007-\/2008 Dave Dunfield All rights reserved.
\item td0\+\_\+lzss.\+h
\item td0\+\_\+lzss.\+c
\begin{DoxyItemize}
\item L\+Z\+SS decoder
\end{DoxyItemize}
\item td0notes.\+txt
\begin{DoxyItemize}
\item Teledisk Documentation
\end{DoxyItemize}
\end{DoxyItemize}
\item Jean-\/\+Franois D\+EL N\+E\+RO, Tele\+Disk Documentation
\begin{DoxyItemize}
\item Copyright (C) 2006-\/2014 Jean-\/\+Franois D\+EL N\+E\+RO
\begin{DoxyItemize}
\item wteledsk.\+htm
\begin{DoxyItemize}
\item Tele\+Disk documenation
\end{DoxyItemize}
\item See his github project
\begin{DoxyItemize}
\item \href{https://github.com/jfdelnero/libhxcfe}{\tt https\+://github.\+com/jfdelnero/libhxcfe} 


\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyItemize}

\subsection*{OS Requirements for software building}


\begin{DoxyItemize}
\item I used Ubuntu 16.\+04\+L\+TS and 14.\+04\+L\+TS when developing the code
\begin{DoxyItemize}
\item It should be easy to setup the same build with Windows gcc tools. 


\end{DoxyItemize}
\end{DoxyItemize}

\subsection*{Install Ubuntu Packages required for Building}


\begin{DoxyItemize}
\item sudo bash
\item {\itshape apt-\/get update}
\item {\itshape apt-\/get install aptitude make build-\/essential binutils gcc}
\item {\itshape aptitude --with-\/recommends install minicom avr-\/libc avra avrdude avrdude-\/doc avrp binutils-\/avr gcc-\/avr gdb-\/avr}
\end{DoxyItemize}



 \subsection*{Compiling Standlone L\+IF tools}


\begin{DoxyItemize}
\item {\itshape make clean}
\item {\itshape make} 

 \subsection*{L\+IF command help}
\end{DoxyItemize}


\begin{DoxyItemize}
\item ./lif
\item ./lif help
\item ./td02lif
\end{DoxyItemize}



 \subsection*{F\+I\+L\+ES}


\begin{DoxyItemize}
\item hp85disk/lif L\+IF utilities
\item Code by {\itshape Mike Gore}
\begin{DoxyItemize}
\item Makefile
\begin{DoxyItemize}
\item Build stand alone Linux / Windows versions of L\+IF tools and T\+E\+L\+E\+D\+I\+SK L\+IF extractor
\end{DoxyItemize}
\item \hyperlink{lifsup_8c}{lifsup.\+c}
\item \hyperlink{lifsup_8h}{lifsup.\+h}
\begin{DoxyItemize}
\item Stand alone libraries for L\+IF utility -\/ from various hp85disk libraries
\end{DoxyItemize}
\item \hyperlink{lifutils_8c}{lifutils.\+c}
\item \hyperlink{lifutils_8h}{lifutils.\+h}
\begin{DoxyItemize}
\item L\+IF image functions, directory listing and file adding.\+extracting,renaming,deleting
\end{DoxyItemize}
\item \hyperlink{td02lif_8c}{td02lif.\+c}
\item \hyperlink{td02lif_8h}{td02lif.\+h}
\begin{DoxyItemize}
\item My Tele\+Disk L\+IF extractor
\end{DoxyItemize}
\item lif-\/notes.\+txt
\begin{DoxyItemize}
\item My notes on decoding E010 format L\+IF images for H\+P-\/85
\end{DoxyItemize}
\item R\+E\+A\+D\+M\+E.\+txt
\begin{DoxyItemize}
\item This file
\end{DoxyItemize}
\end{DoxyItemize}
\item hpmuseum.\+org
\begin{DoxyItemize}
\item 85-\/\+S\+S80.\+T\+D0 from hpmuseum.\+org
\begin{DoxyItemize}
\item Damaged S\+S80 Excersizer from HP Musium
\end{DoxyItemize}
\item 85-\/\+S\+S80.\+L\+IF
\begin{DoxyItemize}
\item The current converter automaticcal did these repairs
\begin{DoxyItemize}
\item cyl 11, side 0 sector 116 mapped to 8
\item cyl 13, side 0 sector 116 mapped to 11
\item cyl 15, side 0 sector 10 missing -\/ zero filled
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyItemize}

hp85disk/lif/teledisk Teledisk L\+IF format to pure L\+IF support code
\begin{DoxyItemize}
\item lif/teledisk
\begin{DoxyItemize}
\item My T\+E\+L\+E\+D\+I\+SK L\+IF extracter
\begin{DoxyItemize}
\item Note\+: The Tele\+Disk image M\+U\+ST contain a L\+IF image -\/ we do N\+OT translate it
\end{DoxyItemize}
\item R\+E\+A\+D\+M\+E.\+txt
\begin{DoxyItemize}
\item Credits
\end{DoxyItemize}
\item Important Contributions (My converted would not have been possible without these)
\begin{DoxyItemize}
\item Dave Dunfield, L\+Z\+SS Code and Tele\+Disk documentation
\begin{DoxyItemize}
\item Copyright 2007-\/2008 Dave Dunfield All rights reserved.
\item td0\+\_\+lzss.\+h
\item td0\+\_\+lzss.\+c
\begin{DoxyItemize}
\item L\+Z\+SS decoder
\end{DoxyItemize}
\item td0notes.\+txt
\begin{DoxyItemize}
\item Teledisk Documentation
\end{DoxyItemize}
\end{DoxyItemize}
\item Jean-\/\+Franois D\+EL N\+E\+RO, Tele\+Disk Documentation
\begin{DoxyItemize}
\item Copyright (C) 2006-\/2014 Jean-\/\+Franois D\+EL N\+E\+RO
\begin{DoxyItemize}
\item wteledsk.\+htm
\begin{DoxyItemize}
\item Tele\+Disk documenation
\end{DoxyItemize}
\item See his github project
\begin{DoxyItemize}
\item \href{https://github.com/jfdelnero/libhxcfe}{\tt https\+://github.\+com/jfdelnero/libhxcfe} 


\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyItemize}

\subsection*{L\+IF H\+E\+LP}

Run {\itshape lif} or {\itshape td02lif} without options to get help summary
\begin{DoxyItemize}
\item Code by Mike Gore
\begin{DoxyItemize}
\item lif
\begin{DoxyItemize}
\item Stand alone L\+IF utilities -\/ part of the H\+P85disk project for linux
\end{DoxyItemize}
\item td02lif
\begin{DoxyItemize}
\item A version of L\+IF utility that just does Teleo\+D\+Isk to L\+IF conversion
\end{DoxyItemize}
\end{DoxyItemize}

To get help type\+: ./lif -\/ OR -\/ ./td02lif
\end{DoxyItemize}


\begin{DoxyPre}
    ./lif\end{DoxyPre}



\begin{DoxyPre}    Stand alone version of LIF utilities for linux
    HP85 Disk and Device Emulator
     (c) 2014-2017 by Mike Gore
     GNU version 3
    -> \href{https://github.com/magore/hp85disk}{\tt https://github.com/magore/hp85disk}
       GIT last pushed:   2017-07-17 17:03:59.102151709 -0400
       Last updated file: 2017-07-27 00:34:18.512415597 -0400\end{DoxyPre}



\begin{DoxyPre}    Usage: td02lif file.td0 file.lif
\begin{DoxyItemize}
\item OR -
\end{DoxyItemize}\end{DoxyPre}



\begin{DoxyPre}    lif help
    lif add lifimage lifname from\_ascii\_file
    lif addbin lifimage lifname from\_lif\_file
    lif create lifimage label directory\_sectors sectors
    lif del lifimage name
    lif dir lifimage
    lif extract lifimage lifname to\_ascii\_file
    lif extractbin lifimage lifname to\_lif\_file
    lif rename lifimage oldlifname newlifname
    lif td02lif image.td0 image.lif
\end{DoxyPre}


\subsection*{T\+E\+L\+E\+D\+I\+SK conversion technical notes -\/ extracting L\+IF data}


\begin{DoxyItemize}
\item Unfortunately Tele\+Disk saves everything in on all sides and tracks.
\begin{DoxyItemize}
\item Question\+: what happens when we have a disk formatted multiple times with differing parameters ?
\end{DoxyItemize}
\item Example 1
\begin{DoxyItemize}
\item Say we start an image that was two sided 80 track disk, 9 sectors, 512 byte sectors
\item Later on someone formats it single sides 35 track disk, 16 sectors, 256 bytes sectors
\end{DoxyItemize}
\item Analisis
\begin{DoxyItemize}
\item We examing the first 30 tracks on both sides looking for\+:
\begin{DoxyItemize}
\item F\+I\+R\+ST sector on both sides and its size
\item L\+A\+ST sector on both size that matches the size
\item C\+O\+U\+NT of sectors on each side that matches the size
\end{DoxyItemize}
\item We then compare sector C\+O\+U\+NT, compare sector S\+I\+ZE, and F\+I\+R\+S\+Td
\begin{DoxyItemize}
\item If S\+I\+ZE or C\+O\+U\+NT is not the same reject
\item If only F\+I\+S\+RT mismatches we then check F\+I\+R\+ST for continuation of numbering on each side
\end{DoxyItemize}
\end{DoxyItemize}
\item Conclusion
\begin{DoxyItemize}
\item We can reject side two by comparing the
\begin{DoxyItemize}
\item F\+I\+R\+ST sector number, Number of sectors and size
\end{DoxyItemize}
\end{DoxyItemize}
\item Eample 2
\begin{DoxyItemize}
\item We have a double sided disk that is formated single sided with F\+I\+R\+ST,L\+A\+ST,C\+O\+U\+NT and S\+I\+ZE matching
\end{DoxyItemize}
\item Analisis
\begin{DoxyItemize}
\item We have no automated way to reject side two
\end{DoxyItemize}
\item Conclusion
\begin{DoxyItemize}
\item The user will have to override heads 


\end{DoxyItemize}
\end{DoxyItemize}

\subsection*{T\+E\+L\+E\+D\+I\+SK extracting L\+IF data user overrides}


\begin{DoxyItemize}
\item Number of Sides\+:
\begin{DoxyItemize}
\item You C\+AN specify single sided override for two sided disks
\begin{DoxyItemize}
\item (as defined in the Tele\+Disk headers)
\end{DoxyItemize}
\item However you can N\+OT specify 2 sided mode if the Tele\+Disk image headers say there is one side
\end{DoxyItemize}
\item Sector Size override
\begin{DoxyItemize}
\item Rather then using the S\+I\+ZE of the F\+I\+R\+ST sector as a filter the user can manually pick the size
\end{DoxyItemize}
\item Number of tracks overrides
\begin{DoxyItemize}
\item The L\+IF decoder stops after the last sector of the last file so this option is ignored 
\end{DoxyItemize}
\end{DoxyItemize}





\#\# T\+E\+L\+E\+D\+I\+SK L\+IF conversion example 
\begin{DoxyPre}
./td02lif 85-SS80.TD0 1.LIF
TeleDisk file:         85-SS80.TD0
        Version:       21
        Not Compressed
        Density:       00h
        DriveType:     04h
        TrackDensity:  00h
        DosMode:       00h
        Sides:         02
        Comment Size:  84
        Comment Date:  Sun Apr  1 12:47:51 2008\end{DoxyPre}



\begin{DoxyPre}HP-85 S/W, SS/80 EXERCISER, 5010-0310/2537. DOES NOT INCLUDE THE SERVC F\end{DoxyPre}



\begin{DoxyPre}Warning: alternate CRC flag not implemented
        cylinder:00, head:00, sector:17, size:128, index:17
Warning: Sector:08 missing - found alternate sector:116
         Location: cylinder:11, head:00, sector:08, size:256, index:8
Warning: Sector:11 missing - found alternate sector:116
         Location: cylinder:13, head:00, sector:11, size:256, index:11
Warning: Sector:10 missing - zero filling
         Location: Track: Cyl: 15, Side: 00
Warning: Sector:01 missing - zero filling
         Location: Track: Cyl: 30, Side: 00
Warning: Sector:09 missing - zero filling
         Location: Track: Cyl: 41, Side: 00
Warning: Sector:11 missing - zero filling
         Location: Track: Cyl: 61, Side: 00
Warning: Sector:01 missing - zero filling
         Location: Track: Cyl: 62, Side: 00
Warning: Sector:10 missing - zero filling
         Location: Track: Cyl: 63, Side: 00\end{DoxyPre}



\begin{DoxyPre}Disk Layout
         Sides:              1
         Tracks:            70
         Sectors Per Track: 16
         Sector Size:      256
Side: 0
         Sector numbering:  0 to 15
         Sector size:     256
         Sector count:     16
Side: 1
         Sector numbering:  1 to  9
         Sector size:     512
         Sector count:      9\end{DoxyPre}



\begin{DoxyPre}Warning: rejecting side two
         Warning: Sector size:  NOT the same on both sides
         Warning: Sector count: NOT the same on both sides
         Warning: Sector range: NOT a continuation of side 0\end{DoxyPre}



\begin{DoxyPre}LIF sectors processed: 1120\end{DoxyPre}



\begin{DoxyPre}Done LIF image: [1.LIF] wrote: [01DAh] sectors\end{DoxyPre}



\begin{DoxyPre}Volume:[<EMPTY>] Date:[<EMPTY>]
NAME         TYPE   START SECTOR        SIZE    RECSIZE   DATE
MANUAL      E020h            10h       26880        256   <EMPTY>
RW-TES      E020h            79h       27648        256   <EMPTY>
OPER        E020h            E5h       28672        256   <EMPTY>
REVID       E020h           155h       27136        256   <EMPTY>
Autost      E020h           1BFh        6912        256   <EMPTY>\end{DoxyPre}



\begin{DoxyPre}       5 Files
       0 Purged
     458 Used sectors
       0 Free sectors\end{DoxyPre}



\begin{DoxyPre}\end{DoxyPre}
 



\subsection*{L\+IF command help}


\begin{DoxyItemize}
\item lif add lifimage lifname from\+\_\+ascii\+\_\+file
\begin{DoxyItemize}
\item Add A\+S\+C\+II file converted to E010 format to existing L\+IF image on SD card
\begin{DoxyItemize}
\item lif add /amigo1.lif T\+E\+S\+T1 /test.bas
\item lif add /amigo1.lif T\+R\+E\+K85 /\+T\+R\+E\+K85/\+T\+R\+E\+K85.B\+AS
\end{DoxyItemize}
\item Notes\+:
\begin{DoxyItemize}
\item Strings must be no longer then sector size -\/ 3
\item Any trailing \char`\"{}\textbackslash{}n\char`\"{} and/or \char`\"{}\textbackslash{}r\char`\"{} are coverted to \char`\"{}\textbackslash{}n\char`\"{} when stored in L\+IF file
\end{DoxyItemize}
\end{DoxyItemize}
\item lif addbin lifimage lifname from\+\_\+lif\+\_\+image
\begin{DoxyItemize}
\item Adding a binary L\+IF image files to another L\+IF image
\item Examples
\begin{DoxyItemize}
\item lif addbin /amigo1.lif T\+E\+ST /test.lif
\item lif addbin /amigo1.lif T\+R\+E\+K85 /\+T\+R\+E\+K85/trek.lif
\end{DoxyItemize}
\item Notes about T\+R\+E\+K85 in the examples
\begin{DoxyItemize}
\item Author\+: T\+R\+E\+K85 port was done by Martin Hepperle
\item \href{https://groups.io/g/hpseries80/topic/star_trek_game_for_hp_85/4845241}{\tt https\+://groups.\+io/g/hpseries80/topic/star\+\_\+trek\+\_\+game\+\_\+for\+\_\+hp\+\_\+85/4845241}
\end{DoxyItemize}
\end{DoxyItemize}
\item lif create lifimage liflabel directory\+\_\+sectors total\+\_\+sectors
\begin{DoxyItemize}
\item Create a new L\+IF image
\item Example
\begin{DoxyItemize}
\item lif create /amigo3.lif A\+M\+I\+G\+O3 15 1120
\begin{DoxyItemize}
\item This formats an L\+IF image file with 15 directory sectors and a length of 1120 (16 $\ast$ 2 $\ast$ 35) sectors
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyItemize}
\item lif del lifimage lifname
\begin{DoxyItemize}
\item Delete a file from L\+IF image on SD card
\item Example $\ast$lif del /amigo1.lif T\+R\+E\+K85
\end{DoxyItemize}
\item lif dir lifimage
\begin{DoxyItemize}
\item Directory listing of L\+IF image
\end{DoxyItemize}
\item Example\+: 
\begin{DoxyPre}
      lif dir amigo1.lif
      Volume:[AMIGO2] Date:[<EMPTY>]
      NAME         TYPE   START SECTOR        SIZE    RECSIZE   DATE
      HELLO       e020h            10h         512        256   <EMPTY>
      CIRCLE      e020h            12h         256        256   <EMPTY>
      GPIB-S      e020h            13h         512        256   <EMPTY>
      GPIB-T      e020h            15h        1536        256   <EMPTY>
      GPIB7       e020h            1bh         256        256   <EMPTY>
      AMIGO2      e020h            1ch         256        256   <EMPTY>
      TREK85      e010h            1dh       27615        256   Tue Jun 27 16:28:28 2017
      HELLO3      e010h            8bh         344        256   Sun Jun 18 18:13:24 2017
      TREK85B     e010h            8dh       27615        256   Tue Jun 27 16:28:28 2017\end{DoxyPre}



\begin{DoxyPre}             9 Files
             0 Purged
           231 Used sectors
           873 Free sectors
      \end{DoxyPre}

\item lif extract lifimage lifname to\+\_\+ascii\+\_\+file
\begin{DoxyItemize}
\item Extracts E010 file from L\+IF image converting to A\+S\+C\+II file on SD card
\item Example lif extract /amigo1.lif H\+E\+L\+L\+O3 /\+H\+E\+L\+L\+O3.B\+AS
\end{DoxyItemize}
\item lif extractbin lifimage llifname to\+\_\+lif\+\_\+image
\begin{DoxyItemize}
\item Extracts L\+IF file from a L\+IF image and saves it as new L\+IF image
\item Example
\begin{DoxyItemize}
\item lif extractbin /amigo1.lif H\+E\+L\+L\+O3 /hello3.lif
\end{DoxyItemize}
\end{DoxyItemize}
\item lif rename lifimage oldlifname newlifname
\begin{DoxyItemize}
\item Renames file in L\+IF image
\item Example
\begin{DoxyItemize}
\item lif rename /amigo1.lif H\+E\+L\+L\+O3 H\+E\+L\+L\+O4 

 \subsection*{T\+E\+L\+E\+D\+I\+SK command help}
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyItemize}

Convert Tele\+D\+Isk L\+IF encoded disk into pure L\+IF file
\begin{DoxyItemize}
\item {\itshape lif td02lif image.\+td0 image.\+lif} 

 
\end{DoxyItemize}
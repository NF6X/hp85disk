\hypertarget{gpib_8c}{}\section{gpib/gpib.c File Reference}
\label{gpib_8c}\index{gpib/gpib.\+c@{gpib/gpib.\+c}}


G\+P\+IB emulator for H\+P85 disk emulator project for A\+V\+R8.  


{\ttfamily \#include $<$avr/pgmspace.\+h$>$}\\*
{\ttfamily \#include $<$avr/portpins.\+h$>$}\\*
{\ttfamily \#include $<$avr/io.\+h$>$}\\*
{\ttfamily \#include \char`\"{}user\+\_\+config.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}hardware/hal.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}gpib\+\_\+hal.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}defines.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}gpib.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}gpib\+\_\+task.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}amigo.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ss80.\+h\char`\"{}}\\*
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{gpib_8c_a6dcb5fc551174cd685f0802f86329f3b}{H\+T\+I\+M\+E\+O\+UT}~(500000\+L / G\+P\+I\+B\+\_\+\+T\+A\+S\+K\+\_\+\+T\+I\+C\+\_\+\+U\+S)
\begin{DoxyCompactList}\small\item\em This is the default B\+US timeout of 0.\+5 Seconds in Microseconds. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{gpib_8c_a6a3c1941e17626338b878123677ae797}{gpib\+\_\+timer\+\_\+elapsed\+\_\+begin} (void)
\begin{DoxyCompactList}\small\item\em Start measuring time -\/ used with hpib\+\_\+timer\+\_\+elapsed\+\_\+end() \end{DoxyCompactList}\item 
void \hyperlink{gpib_8c_abe05115c27148ec7013e6f62dc94ae78}{gpib\+\_\+timer\+\_\+reset} (void)
\begin{DoxyCompactList}\small\item\em Reset elapsed and timeout timers Elapses and Timeout Timers. \end{DoxyCompactList}\item 
void \hyperlink{gpib_8c_a87ae4b4852f4a1987fc61fec20f53d42}{gpib\+\_\+timer\+\_\+elapsed\+\_\+end} (char $\ast$msg)
\begin{DoxyCompactList}\small\item\em Display user message and time delta since \hyperlink{gpib_8c_a6a3c1941e17626338b878123677ae797}{gpib\+\_\+timer\+\_\+elapsed\+\_\+begin()} call. \end{DoxyCompactList}\item 
void \hyperlink{gpib_8c_ae9291b22beebb9d24354af643505f9cd}{gpib\+\_\+timer\+\_\+task} ()
\begin{DoxyCompactList}\small\item\em Main G\+P\+IB timer task called by low level interrup hander. \end{DoxyCompactList}\item 
void \hyperlink{gpib_8c_a687395337dd5c6604a775e3ffd3f006f}{gpib\+\_\+timeout\+\_\+set} (uint32\+\_\+t \hyperlink{time_8h_a32b1cbd925752f0cd61d202bbe204a69}{time})
\begin{DoxyCompactList}\small\item\em Set G\+P\+IB timeout timer in units of G\+P\+I\+B\+\_\+\+T\+A\+S\+K\+\_\+\+T\+I\+C\+\_\+\+US. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{gpib_8c_a3eb10b99d17dd69982b6bfc820fb29db}{gpib\+\_\+timeout\+\_\+test} ()
\begin{DoxyCompactList}\small\item\em Test G\+P\+IB timeout timer for timeout condition. \end{DoxyCompactList}\item 
void \hyperlink{gpib_8c_a5576f7a1bab2c1beaab0c03bc62bb349}{gpib\+\_\+bus\+\_\+init} (int cold)
\begin{DoxyCompactList}\small\item\em Initialize G\+P\+IB Bus control lines for powerup or reset conditions. \end{DoxyCompactList}\item 
void \hyperlink{gpib_8c_a32d2476eec2bbdf15e7db1b901c5a671}{gpib\+\_\+state\+\_\+init} (void)
\begin{DoxyCompactList}\small\item\em Reset G\+P\+IB states and related variables. \end{DoxyCompactList}\item 
int \hyperlink{gpib_8c_a6717ad07fa753169ccfa297faa8fb172}{address\+\_\+to\+\_\+device} (uint8\+\_\+t address)
\begin{DoxyCompactList}\small\item\em Map device address, M\+LA,M\+TA,M\+SA to P\+PR address T\+O\+DO include lookup array. \end{DoxyCompactList}\item 
int \hyperlink{gpib_8c_ae4e4cec8a42e9077045ce8f555549d3f}{device\+\_\+to\+\_\+\+P\+PR} (uint8\+\_\+t address)
\begin{DoxyCompactList}\small\item\em Map device address, M\+LA,M\+TA,M\+SA to P\+PR address T\+O\+DO include lookup array. \end{DoxyCompactList}\item 
void \hyperlink{gpib_8c_a6db67436dee3daf25cc47ee11fa85122}{Enable\+P\+PR} (uint8\+\_\+t bit)
\item 
void \hyperlink{gpib_8c_a6a8eeef647b5c132d08cd4373eb2c37b}{Disable\+P\+PR} (uint8\+\_\+t bit)
\begin{DoxyCompactList}\small\item\em Disable P\+PR (Parallel Poll Response) for a device. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{gpib_8c_a42d306c338c639682d0d6f0434a5c88b}{Parallel\+\_\+\+Poll} ()
\begin{DoxyCompactList}\small\item\em Detect Parallel Poll state. \end{DoxyCompactList}\item 
void \hyperlink{gpib_8c_a01eaf30370a0b43263d19ebaa2fa4a38}{gpib\+\_\+assert\+\_\+ifc} (void)
\begin{DoxyCompactList}\small\item\em Assert Interface clear for 250us. \end{DoxyCompactList}\item 
void \hyperlink{gpib_8c_ae826d722b789698ce9217758fe55fdcb}{gpib\+\_\+assert\+\_\+ren} (unsigned char state)
\begin{DoxyCompactList}\small\item\em Assert R\+EN to put instrument in remote mode. \end{DoxyCompactList}\item 
uint16\+\_\+t \hyperlink{gpib_8c_ac3d50cc1d56705d107e2f8fb00692e68}{gpib\+\_\+write\+\_\+byte} (uint16\+\_\+t ch)
\begin{DoxyCompactList}\small\item\em Send 1 byte and control line states to G\+P\+IB B\+US. \end{DoxyCompactList}\item 
uint16\+\_\+t \hyperlink{gpib_8c_a2fdb3d4996ff399dc2fbfcada417bb1a}{gpib\+\_\+unread} (uint16\+\_\+t ch)
\begin{DoxyCompactList}\small\item\em G\+P\+IB ungets one character and all status states. \end{DoxyCompactList}\item 
uint16\+\_\+t \hyperlink{gpib_8c_a8dd0928ed1cdc2319fd14c122b333cba}{gpib\+\_\+read\+\_\+byte} (void)
\begin{DoxyCompactList}\small\item\em read 1 byte and control line status from G\+P\+IB B\+US \end{DoxyCompactList}\item 
void \hyperlink{gpib_8c_a65786186b6eceb91bf717888b03ca9f1}{gpib\+\_\+decode\+\_\+header} (void)
\begin{DoxyCompactList}\small\item\em Displays help for \hyperlink{gpib_8c_a37b2271a4a82b5c953bf08cf0c571577}{gpib\+\_\+decode()} function. \end{DoxyCompactList}\item 
void \hyperlink{gpib_8c_aa51aff9c441c1129ec3a9c85cec17bcc}{gpib\+\_\+decode\+\_\+str} (uint16\+\_\+t ch, char $\ast$str)
\begin{DoxyCompactList}\small\item\em decode/display all control flags and data on the G\+P\+IB B\+US \end{DoxyCompactList}\item 
void \hyperlink{gpib_8c_a37b2271a4a82b5c953bf08cf0c571577}{gpib\+\_\+decode} (uint16\+\_\+t ch)
\begin{DoxyCompactList}\small\item\em Calls \hyperlink{gpib_8c_aa51aff9c441c1129ec3a9c85cec17bcc}{gpib\+\_\+decode\+\_\+str()} and dosplays the result. \end{DoxyCompactList}\item 
int \hyperlink{gpib_8c_a67f7cdca85091b3eb0eea0051a200fbe}{gpib\+\_\+read\+\_\+str} (uint8\+\_\+t $\ast$buf, int size, uint16\+\_\+t $\ast$status)
\begin{DoxyCompactList}\small\item\em Read string from G\+P\+IB B\+US -\/ controlled by status flags. \end{DoxyCompactList}\item 
int \hyperlink{gpib_8c_a1bdaac9496e7a0a3523481f2e8a2b9fe}{gpib\+\_\+write\+\_\+str} (uint8\+\_\+t $\ast$buf, int size, uint16\+\_\+t $\ast$status)
\begin{DoxyCompactList}\small\item\em Send string to G\+P\+IB B\+US -\/ controlled by status flags. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
uint8\+\_\+t \hyperlink{gpib_8c_a00023217d54aa8bb6473583593942869}{gpib\+\_\+iobuff} \mbox{[}\hyperlink{gpib_8h_a78f2361b60656c29cf6da26f240aaae2}{G\+P\+I\+B\+\_\+\+I\+O\+B\+U\+F\+F\+\_\+\+L\+EN}\mbox{]}
\begin{DoxyCompactList}\small\item\em common IO buffer for \hyperlink{gpib_8c_a67f7cdca85091b3eb0eea0051a200fbe}{gpib\+\_\+read\+\_\+str()} and \hyperlink{gpib_8c_a1bdaac9496e7a0a3523481f2e8a2b9fe}{gpib\+\_\+write\+\_\+str()} \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{gpib_8c_a2296b83cccf9d7a3b954d18ece282bd1}{gpib\+\_\+unread\+\_\+f} = 0
\begin{DoxyCompactList}\small\item\em \hyperlink{gpib_8c_a2fdb3d4996ff399dc2fbfcada417bb1a}{gpib\+\_\+unread()} flag \end{DoxyCompactList}\item 
uint16\+\_\+t \hyperlink{gpib_8c_a8f8b0bbe03e4f62aa8e736a9a1f5f609}{gpib\+\_\+unread\+\_\+data}
\begin{DoxyCompactList}\small\item\em \hyperlink{gpib_8c_a2fdb3d4996ff399dc2fbfcada417bb1a}{gpib\+\_\+unread()} data \end{DoxyCompactList}\item 
\hyperlink{integer_8h_a4ae1dab0fb4b072a66584546209e7d58}{B\+Y\+TE} \hyperlink{gpib_8c_a1b595c4136454db2525576508c951b63}{device}
\begin{DoxyCompactList}\small\item\em Device number -\/ working to support more then one device support. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{gpib_8c_acef501d1e292f230efac5ed0cddf90e8}{talking}
\begin{DoxyCompactList}\small\item\em gpib talk address \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{gpib_8c_a8f34b1ce42fbf3391219cfedde825495}{talking\+\_\+last}
\begin{DoxyCompactList}\small\item\em gpib last talk address \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{gpib_8c_a906eb6f6a81521d91f73f9ab2e03b02e}{listening}
\begin{DoxyCompactList}\small\item\em gpib listen address \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{gpib_8c_a049cdc383eed2f97e4384a5728c00123}{listening\+\_\+last}
\begin{DoxyCompactList}\small\item\em gpib last listen address \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{gpib_8c_a0205f89c3878a7a6cb4ee1f75de35fb3}{spoll}
\begin{DoxyCompactList}\small\item\em gpib serial poll status \end{DoxyCompactList}\item 
uint16\+\_\+t \hyperlink{gpib_8c_ab8bc74192b6d8a3e352b03e724dac5b7}{lastcmd}
\begin{DoxyCompactList}\small\item\em gpib current and last command \end{DoxyCompactList}\item 
uint16\+\_\+t \hyperlink{gpib_8c_aaad5615d233044464c3661481a6760cd}{current}
\item 
uint8\+\_\+t \hyperlink{gpib_8c_a25538708e408bbc21b380cb6f709f5d8}{secondary}
\begin{DoxyCompactList}\small\item\em gpib secondary \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
G\+P\+IB emulator for H\+P85 disk emulator project for A\+V\+R8. 

\begin{DoxyParagraph}{Edit History -\/ \mbox{[}1.0\mbox{]} \mbox{[}Mike Gore\mbox{]} Initial revision of file.}

\end{DoxyParagraph}
\begin{DoxyParagraph}{Copyright \copyright{} 2014 Mike Gore, Inc. All rights reserved.}

\end{DoxyParagraph}
\begin{DoxyParagraph}{Based on work by Anders Gustafsson.}

\end{DoxyParagraph}
\begin{DoxyParagraph}{Copyright \copyright{} 2014 Anders Gustafsson All rights reserved..}

\end{DoxyParagraph}


\subsection{Macro Definition Documentation}
\index{gpib.\+c@{gpib.\+c}!H\+T\+I\+M\+E\+O\+UT@{H\+T\+I\+M\+E\+O\+UT}}
\index{H\+T\+I\+M\+E\+O\+UT@{H\+T\+I\+M\+E\+O\+UT}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{H\+T\+I\+M\+E\+O\+UT}{HTIMEOUT}}]{\setlength{\rightskip}{0pt plus 5cm}\#define H\+T\+I\+M\+E\+O\+UT~(500000\+L / G\+P\+I\+B\+\_\+\+T\+A\+S\+K\+\_\+\+T\+I\+C\+\_\+\+U\+S)}\hypertarget{gpib_8c_a6dcb5fc551174cd685f0802f86329f3b}{}\label{gpib_8c_a6dcb5fc551174cd685f0802f86329f3b}


This is the default B\+US timeout of 0.\+5 Seconds in Microseconds. 


\begin{DoxyItemize}
\item References\+: Documenation and related sources of information
\begin{DoxyItemize}
\item Web Resources\+:
\begin{DoxyItemize}
\item \href{http://www.hp9845.net}{\tt http\+://www.\+hp9845.\+net}
\item \href{http://www.hpmuseum.net}{\tt http\+://www.\+hpmuseum.\+net}
\item \href{http://www.hpmusuem.org}{\tt http\+://www.\+hpmusuem.\+org}
\item \href{http://bitsavers.trailing-edge.com}{\tt http\+://bitsavers.\+trailing-\/edge.\+com}
\item \href{http://en.wikipedia.org/wiki/IEEE-488}{\tt http\+://en.\+wikipedia.\+org/wiki/\+I\+E\+E\+E-\/488}
\end{DoxyItemize}
\end{DoxyItemize}
\item S\+S80 References\+:
\begin{DoxyItemize}
\item \char`\"{}\+S\+S80\char`\"{} is the short form used in the project
\item \char`\"{}\+Subset 80 from Fixed and flexible disc drives\char`\"{}
\item Printed November, 1985
\item HP Part\# 5958-\/4129
\end{DoxyItemize}
\item C\+S80 References\+:
\begin{DoxyItemize}
\item \char`\"{}\+C\+S80\char`\"{} is the short form used in the project
\item \char`\"{}\+C\+S/80 Instruction Set Programming Manual\char`\"{}
\item Printed\+: A\+PR 1983
\item HP Part\# 5955-\/3442
\end{DoxyItemize}
\item Amigo References\+:
\begin{DoxyItemize}
\item \char`\"{}\+Amigo\char`\"{} is the short form used in the project
\item \char`\"{}\+Appendix A of 9895\+A Flexible Disc Memory Service Manual\char`\"{}
\item HP Part\# 09895-\/90030
\end{DoxyItemize}
\item H\+P-\/\+IB
\begin{DoxyItemize}
\item \char`\"{}\+H\+P-\/\+I\+B\char`\"{} is the short form used in the project
\item \char`\"{}\+Condensed Description of the Hewlett Packard Interface Bus\char`\"{}
\item Printed March 1975
\item HP Part\# 59401-\/90030
\end{DoxyItemize}
\item Tutorial Description of The Hewllet Packard Interface Bus\char`\"{}
  -\/ \char`\"{}H\+P-\/\+IB Tutorial" is the short form used in the project
\begin{DoxyItemize}
\item \href{http://www.hpmemory.org/an/pdf/hp-ib_tutorial_1980.pdf}{\tt http\+://www.\+hpmemory.\+org/an/pdf/hp-\/ib\+\_\+tutorial\+\_\+1980.\+pdf}
\begin{DoxyItemize}
\item Printed January 1983
\end{DoxyItemize}
\item \href{http://www.ko4bb.com/Manuals/HP_Agilent/HPIB_tutorial_HP.pdf}{\tt http\+://www.\+ko4bb.\+com/\+Manuals/\+H\+P\+\_\+\+Agilent/\+H\+P\+I\+B\+\_\+tutorial\+\_\+\+H\+P.\+pdf}
\begin{DoxyItemize}
\item Printed 1987
\end{DoxyItemize}
\end{DoxyItemize}
\item G\+P\+IB / I\+E\+EE 488 Tutorial by Ian Poole
\begin{DoxyItemize}
\item \href{http://www.radio-electronics.com/info/t_and_m/gpib/ieee488-basics-tutorial.php}{\tt http\+://www.\+radio-\/electronics.\+com/info/t\+\_\+and\+\_\+m/gpib/ieee488-\/basics-\/tutorial.\+php} 
\end{DoxyItemize}
\end{DoxyItemize}

Definition at line 73 of file gpib.\+c.



Referenced by gpib\+\_\+read\+\_\+byte(), and gpib\+\_\+write\+\_\+byte().



\subsection{Function Documentation}
\index{gpib.\+c@{gpib.\+c}!address\+\_\+to\+\_\+device@{address\+\_\+to\+\_\+device}}
\index{address\+\_\+to\+\_\+device@{address\+\_\+to\+\_\+device}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{address\+\_\+to\+\_\+device(uint8\+\_\+t address)}{address_to_device(uint8_t address)}}]{\setlength{\rightskip}{0pt plus 5cm}int address\+\_\+to\+\_\+device (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{address}
\end{DoxyParamCaption}
)}\hypertarget{gpib_8c_a6717ad07fa753169ccfa297faa8fb172}{}\label{gpib_8c_a6717ad07fa753169ccfa297faa8fb172}


Map device address, M\+LA,M\+TA,M\+SA to P\+PR address T\+O\+DO include lookup array. 

\begin{DoxyReturn}{Returns}
device number index or -\/1 if no match 
\end{DoxyReturn}


Definition at line 276 of file gpib.\+c.



Referenced by device\+\_\+to\+\_\+\+P\+P\+R().

\index{gpib.\+c@{gpib.\+c}!device\+\_\+to\+\_\+\+P\+PR@{device\+\_\+to\+\_\+\+P\+PR}}
\index{device\+\_\+to\+\_\+\+P\+PR@{device\+\_\+to\+\_\+\+P\+PR}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{device\+\_\+to\+\_\+\+P\+P\+R(uint8\+\_\+t address)}{device_to_PPR(uint8_t address)}}]{\setlength{\rightskip}{0pt plus 5cm}int device\+\_\+to\+\_\+\+P\+PR (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{address}
\end{DoxyParamCaption}
)}\hypertarget{gpib_8c_ae4e4cec8a42e9077045ce8f555549d3f}{}\label{gpib_8c_ae4e4cec8a42e9077045ce8f555549d3f}


Map device address, M\+LA,M\+TA,M\+SA to P\+PR address T\+O\+DO include lookup array. 

\begin{DoxyReturn}{Returns}
device number index or -\/1 if no match 
\end{DoxyReturn}


Definition at line 285 of file gpib.\+c.

\index{gpib.\+c@{gpib.\+c}!Disable\+P\+PR@{Disable\+P\+PR}}
\index{Disable\+P\+PR@{Disable\+P\+PR}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{Disable\+P\+P\+R(uint8\+\_\+t bit)}{DisablePPR(uint8_t bit)}}]{\setlength{\rightskip}{0pt plus 5cm}void Disable\+P\+PR (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{bit}
\end{DoxyParamCaption}
)}\hypertarget{gpib_8c_a6a8eeef647b5c132d08cd4373eb2c37b}{}\label{gpib_8c_a6a8eeef647b5c132d08cd4373eb2c37b}


Disable P\+PR (Parallel Poll Response) for a device. 


\begin{DoxyItemize}
\item Reference\+: S\+S80 pg 3-\/4, section 3-\/3 \begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 319 of file gpib.\+c.



Referenced by Amigo\+\_\+\+Command(), A\+M\+I\+G\+O\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(), Amigo\+\_\+\+Execute(), amigo\+\_\+init(), G\+P\+I\+B\+\_\+\+S\+E\+C\+O\+N\+D\+A\+R\+Y\+\_\+\+A\+D\+D\+R\+E\+S\+S(), S\+S80\+\_\+\+Command\+\_\+\+State(), S\+S80\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(), S\+S80\+\_\+\+Execute\+\_\+\+State(), S\+S80\+\_\+init(), and S\+S80\+\_\+\+Transparent\+\_\+\+State().

\index{gpib.\+c@{gpib.\+c}!Enable\+P\+PR@{Enable\+P\+PR}}
\index{Enable\+P\+PR@{Enable\+P\+PR}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{Enable\+P\+P\+R(uint8\+\_\+t bit)}{EnablePPR(uint8_t bit)}}]{\setlength{\rightskip}{0pt plus 5cm}void Enable\+P\+PR (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{bit}
\end{DoxyParamCaption}
)}\hypertarget{gpib_8c_a6db67436dee3daf25cc47ee11fa85122}{}\label{gpib_8c_a6db67436dee3daf25cc47ee11fa85122}

\begin{DoxyItemize}
\item Reference\+: S\+S80 pg 3-\/4, section 3-\/3 \begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 304 of file gpib.\+c.



Referenced by amigo\+\_\+buffered\+\_\+read(), amigo\+\_\+buffered\+\_\+write(), amigo\+\_\+cmd\+\_\+clear(), amigo\+\_\+cmd\+\_\+wakeup(), Amigo\+\_\+\+Command(), amigo\+\_\+format(), amigo\+\_\+request\+\_\+status(), amigo\+\_\+seek(), amigo\+\_\+send\+\_\+logical\+\_\+address(), amigo\+\_\+send\+\_\+status(), amigo\+\_\+todo(), amigo\+\_\+todo\+\_\+op(), amigo\+\_\+verify(), S\+S80\+\_\+\+Amigo\+\_\+\+Clear(), S\+S80\+\_\+\+Cancel(), S\+S80\+\_\+\+Channel\+\_\+\+Independent\+\_\+\+Clear(), S\+S80\+\_\+\+Command\+\_\+\+State(), S\+S80\+\_\+\+Execute\+\_\+\+State(), S\+S80\+\_\+\+Selected\+\_\+\+Device\+\_\+\+Clear(), S\+S80\+\_\+\+Transparent\+\_\+\+State(), and S\+S80\+\_\+\+Universal\+\_\+\+Device\+\_\+\+Clear().

\index{gpib.\+c@{gpib.\+c}!gpib\+\_\+assert\+\_\+ifc@{gpib\+\_\+assert\+\_\+ifc}}
\index{gpib\+\_\+assert\+\_\+ifc@{gpib\+\_\+assert\+\_\+ifc}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+assert\+\_\+ifc(void)}{gpib_assert_ifc(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void gpib\+\_\+assert\+\_\+ifc (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{gpib_8c_a01eaf30370a0b43263d19ebaa2fa4a38}{}\label{gpib_8c_a01eaf30370a0b43263d19ebaa2fa4a38}


Assert Interface clear for 250us. 


\begin{DoxyItemize}
\item 100us is the Minumum
\item Reference\+: S\+S80 section 3-\/15, pg 3-\/26 \begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 397 of file gpib.\+c.



Referenced by task().

\index{gpib.\+c@{gpib.\+c}!gpib\+\_\+assert\+\_\+ren@{gpib\+\_\+assert\+\_\+ren}}
\index{gpib\+\_\+assert\+\_\+ren@{gpib\+\_\+assert\+\_\+ren}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+assert\+\_\+ren(unsigned char state)}{gpib_assert_ren(unsigned char state)}}]{\setlength{\rightskip}{0pt plus 5cm}void gpib\+\_\+assert\+\_\+ren (
\begin{DoxyParamCaption}
\item[{unsigned char}]{state}
\end{DoxyParamCaption}
)}\hypertarget{gpib_8c_ae826d722b789698ce9217758fe55fdcb}{}\label{gpib_8c_ae826d722b789698ce9217758fe55fdcb}


Assert R\+EN to put instrument in remote mode. 


\begin{DoxyItemize}
\item If state != 0 -\/$>$ assert R\+EN
\item If state == 0 -\/$>$ deassert R\+EN \begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 417 of file gpib.\+c.

\index{gpib.\+c@{gpib.\+c}!gpib\+\_\+bus\+\_\+init@{gpib\+\_\+bus\+\_\+init}}
\index{gpib\+\_\+bus\+\_\+init@{gpib\+\_\+bus\+\_\+init}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+bus\+\_\+init(int cold)}{gpib_bus_init(int cold)}}]{\setlength{\rightskip}{0pt plus 5cm}void gpib\+\_\+bus\+\_\+init (
\begin{DoxyParamCaption}
\item[{int}]{cold}
\end{DoxyParamCaption}
)}\hypertarget{gpib_8c_a5576f7a1bab2c1beaab0c03bc62bb349}{}\label{gpib_8c_a5576f7a1bab2c1beaab0c03bc62bb349}


Initialize G\+P\+IB Bus control lines for powerup or reset conditions. 


\begin{DoxyItemize}
\item Set cold = 1 at powerup
\item set cold = 0 in operation to reset bus state
\begin{DoxyItemize}
\item If cold = 0 N\+R\+F\+D/\+N\+D\+AC is setto 0 busy
\end{DoxyItemize}
\item References\+:
\begin{DoxyItemize}
\item H\+P-\/\+IB Tutorial
\item H\+P-\/\+IB pg 8-\/11 \begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}

\end{DoxyItemize}
\end{DoxyItemize}References\+: H\+P-\/\+IB Tutorial pg 12,13 H\+P-\/\+IB pg 8-\/11 

Definition at line 212 of file gpib.\+c.



Referenced by gpib\+\_\+error\+\_\+test(), gpib\+\_\+task(), gpib\+\_\+trace\+\_\+task(), main(), plot\+\_\+echo(), receive\+\_\+plot(), and S\+S80\+\_\+init().

\index{gpib.\+c@{gpib.\+c}!gpib\+\_\+decode@{gpib\+\_\+decode}}
\index{gpib\+\_\+decode@{gpib\+\_\+decode}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+decode(uint16\+\_\+t ch)}{gpib_decode(uint16_t ch)}}]{\setlength{\rightskip}{0pt plus 5cm}void gpib\+\_\+decode (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{ch}
\end{DoxyParamCaption}
)}\hypertarget{gpib_8c_a37b2271a4a82b5c953bf08cf0c571577}{}\label{gpib_8c_a37b2271a4a82b5c953bf08cf0c571577}


Calls \hyperlink{gpib_8c_aa51aff9c441c1129ec3a9c85cec17bcc}{gpib\+\_\+decode\+\_\+str()} and dosplays the result. 

Display\+: decode/display all control flags and data on G\+P\+IB B\+US. \begin{DoxySeeAlso}{See also}
\hyperlink{gpib_8c_aa51aff9c441c1129ec3a9c85cec17bcc}{gpib\+\_\+decode\+\_\+str()} 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 981 of file gpib.\+c.



Referenced by gpib\+\_\+read\+\_\+str(), gpib\+\_\+unread(), gpib\+\_\+write\+\_\+str(), S\+S80\+\_\+\+Command\+\_\+\+State(), and S\+S80\+\_\+\+Transparent\+\_\+\+State().

\index{gpib.\+c@{gpib.\+c}!gpib\+\_\+decode\+\_\+header@{gpib\+\_\+decode\+\_\+header}}
\index{gpib\+\_\+decode\+\_\+header@{gpib\+\_\+decode\+\_\+header}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+decode\+\_\+header(void)}{gpib_decode_header(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void gpib\+\_\+decode\+\_\+header (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{gpib_8c_a65786186b6eceb91bf717888b03ca9f1}{}\label{gpib_8c_a65786186b6eceb91bf717888b03ca9f1}


Displays help for \hyperlink{gpib_8c_a37b2271a4a82b5c953bf08cf0c571577}{gpib\+\_\+decode()} function. 

You would call this once at the start of a trace for example. \begin{DoxySeeAlso}{See also}
\+: \hyperlink{gpib_8h}{gpib.\+h} \+\_\+\+F\+L\+A\+GS defines for a full list is control lines we track 

\+: gpib\+\_\+trace() 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 879 of file gpib.\+c.



Referenced by gpib\+\_\+trace\+\_\+task(), and plot\+\_\+echo().

\index{gpib.\+c@{gpib.\+c}!gpib\+\_\+decode\+\_\+str@{gpib\+\_\+decode\+\_\+str}}
\index{gpib\+\_\+decode\+\_\+str@{gpib\+\_\+decode\+\_\+str}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+decode\+\_\+str(uint16\+\_\+t ch, char $\ast$str)}{gpib_decode_str(uint16_t ch, char *str)}}]{\setlength{\rightskip}{0pt plus 5cm}void gpib\+\_\+decode\+\_\+str (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{ch, }
\item[{char $\ast$}]{str}
\end{DoxyParamCaption}
)}\hypertarget{gpib_8c_aa51aff9c441c1129ec3a9c85cec17bcc}{}\label{gpib_8c_aa51aff9c441c1129ec3a9c85cec17bcc}


decode/display all control flags and data on the G\+P\+IB B\+US 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ch} & 
\begin{DoxyItemize}
\item Lower 8 bits\+: Data or Command.
\begin{DoxyItemize}
\item If A\+TN is L\+OW then we strip parity from the byte.
\end{DoxyItemize}
\item Upper 8 bits\+: Status and Errors.
\begin{DoxyItemize}
\item 
\end{DoxyItemize}
\end{DoxyItemize}\\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\hyperlink{gpib_8h}{gpib.\+h} \+\_\+\+F\+L\+A\+GS defines for a full list.
\begin{DoxyItemize}
\item An error implies the data byte can\textquotesingle{}t be trusted
\item Control Line Flags.
\begin{DoxyItemize}
\item \hyperlink{gpib_8h_ab6e601afadf8d274d9d341323a5c6a3e}{E\+O\+I\+\_\+\+F\+L\+AG}
\item \hyperlink{gpib_8h_aadec0e361e7d2ed6a82ef28bee7231f6}{S\+R\+Q\+\_\+\+F\+L\+AG}
\item \hyperlink{gpib_8h_abbe287946c2beaa1f76fe5be364c07ad}{A\+T\+N\+\_\+\+F\+L\+AG}
\item \hyperlink{gpib_8h_ac5ae85572f7432aaab806c29177eec8d}{R\+E\+N\+\_\+\+F\+L\+AG}
\item \hyperlink{gpib_8h_a660f399a9ffcc5c666bcc726073338cb}{P\+P\+\_\+\+F\+L\+AG}
\end{DoxyItemize}
\item Error Flags\+:
\begin{DoxyItemize}
\item \hyperlink{gpib_8h_a0202c6cc39130a2c251235ef2336cd13}{I\+F\+C\+\_\+\+F\+L\+AG} 
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxySeeAlso}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em str} & string pointer to store the decoded result in.\\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\+: \hyperlink{gpib_8c_a8dd0928ed1cdc2319fd14c122b333cba}{gpib\+\_\+read\+\_\+byte()} 

\+: gpib\+\_\+write\+\_\+byte(int ch) 

\+: \hyperlink{gpib_8c_a65786186b6eceb91bf717888b03ca9f1}{gpib\+\_\+decode\+\_\+header()}
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}
\begin{DoxyReturn}{Returns}
return 
\end{DoxyReturn}


Definition at line 920 of file gpib.\+c.



Referenced by gpib\+\_\+decode(), gpib\+\_\+task(), gpib\+\_\+trace\+\_\+task(), plot\+\_\+echo(), printer\+\_\+buffer(), and receive\+\_\+plot().

\index{gpib.\+c@{gpib.\+c}!gpib\+\_\+read\+\_\+byte@{gpib\+\_\+read\+\_\+byte}}
\index{gpib\+\_\+read\+\_\+byte@{gpib\+\_\+read\+\_\+byte}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+read\+\_\+byte(void)}{gpib_read_byte(void)}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t gpib\+\_\+read\+\_\+byte (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{gpib_8c_a8dd0928ed1cdc2319fd14c122b333cba}{}\label{gpib_8c_a8dd0928ed1cdc2319fd14c122b333cba}


read 1 byte and control line status from G\+P\+IB B\+US 


\begin{DoxyItemize}
\item References\+: H\+P-\/\+IB Tutorial pg 13, 14.
\item Notes\+: Their diagram is a bit misleading -\/ they start in the B\+US init phase. The init happens much earlier in other code -\/ we N\+E\+V\+ER want to do that here or bad things will happen -\/ we could step on the sender N\+R\+FD test and false trigger it. We instead start with N\+R\+FD F\+L\+O\+AT, and N\+D\+AC L\+OW. See loop in send diagram it has N\+D\+AC == 0 and N\+R\+FD == 1 in the return to send (beginning) part of the loop.
\item The H\+P-\/\+IB reference has an error\+: Read ready actually starts when N\+R\+FD = 1 and N\+D\+AC = 0. If you look at the Write state diagram that can be confirmed.
\end{DoxyItemize}

\begin{DoxyReturn}{Returns}

\begin{DoxyItemize}
\item Lower 8 bits\+: Data or Command.
\begin{DoxyItemize}
\item If A\+TN is L\+OW then we strip parity from the byte.
\end{DoxyItemize}
\item Upper 8 bits\+: Status and Errors.
\begin{DoxyItemize}
\item 
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{gpib_8h}{gpib.\+h} \+\_\+\+F\+L\+A\+GS defines for a full list.
\begin{DoxyItemize}
\item An error implies the data byte can\textquotesingle{}t be trusted
\item Control Line Flags.
\begin{DoxyItemize}
\item \hyperlink{gpib_8h_ab6e601afadf8d274d9d341323a5c6a3e}{E\+O\+I\+\_\+\+F\+L\+AG}
\item \hyperlink{gpib_8h_aadec0e361e7d2ed6a82ef28bee7231f6}{S\+R\+Q\+\_\+\+F\+L\+AG}
\item \hyperlink{gpib_8h_abbe287946c2beaa1f76fe5be364c07ad}{A\+T\+N\+\_\+\+F\+L\+AG}
\item \hyperlink{gpib_8h_ac5ae85572f7432aaab806c29177eec8d}{R\+E\+N\+\_\+\+F\+L\+AG}
\item \hyperlink{gpib_8h_a660f399a9ffcc5c666bcc726073338cb}{P\+P\+\_\+\+F\+L\+AG}
\end{DoxyItemize}
\item Error Flags\+:
\begin{DoxyItemize}
\item \hyperlink{gpib_8h_a0202c6cc39130a2c251235ef2336cd13}{I\+F\+C\+\_\+\+F\+L\+AG} 
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxySeeAlso}
Note\+: see\+: H\+P-\/\+IB Tutorial pg 13
\begin{DoxyItemize}
\item Remember that N\+D\+AC and N\+R\+FD are now both L\+O\+W!
\item The spec says to K\+E\+EP B\+O\+TH L\+OW when N\+OT ready to read otherwise we may miss a transfer and cause a controller timeout!
\item G\+P\+IB TX state expects N\+R\+FD L\+OW on entry or it is an E\+R\+R\+O\+R! 
\end{DoxyItemize}

Definition at line 742 of file gpib.\+c.



Referenced by gpib\+\_\+read\+\_\+str(), gpib\+\_\+task(), gpib\+\_\+trace\+\_\+task(), plot\+\_\+echo(), and receive\+\_\+plot().

\index{gpib.\+c@{gpib.\+c}!gpib\+\_\+read\+\_\+str@{gpib\+\_\+read\+\_\+str}}
\index{gpib\+\_\+read\+\_\+str@{gpib\+\_\+read\+\_\+str}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+read\+\_\+str(uint8\+\_\+t $\ast$buf, int size, uint16\+\_\+t $\ast$status)}{gpib_read_str(uint8_t *buf, int size, uint16_t *status)}}]{\setlength{\rightskip}{0pt plus 5cm}int gpib\+\_\+read\+\_\+str (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{buf, }
\item[{int}]{size, }
\item[{uint16\+\_\+t $\ast$}]{status}
\end{DoxyParamCaption}
)}\hypertarget{gpib_8c_a67f7cdca85091b3eb0eea0051a200fbe}{}\label{gpib_8c_a67f7cdca85091b3eb0eea0051a200fbe}


Read string from G\+P\+IB B\+US -\/ controlled by status flags. 


\begin{DoxyItemize}
\item Status flags used when reading
\begin{DoxyItemize}
\item If E\+OI is set then E\+OI detection will end reading when E\+OI is detected.
\item If an early or unexpected E\+OI is detected a warning is displayed.
\item The state of A\+TN controls the type of data read.
\begin{DoxyItemize}
\item If A\+TN is set then parity is stripped.
\item Only data matching the A\+TN flag state set by user is read.
\begin{DoxyItemize}
\item If we see a mismatch we \char`\"{}unread\char`\"{} it and exit.
\item Unreading saves data A\+ND status to be reread later on.
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyItemize}

\begin{DoxySeeAlso}{See also}
\+: \hyperlink{gpib_8c_a8dd0928ed1cdc2319fd14c122b333cba}{gpib\+\_\+read\+\_\+byte()} 

\+: \hyperlink{gpib_8c_a2fdb3d4996ff399dc2fbfcada417bb1a}{gpib\+\_\+unread()}
\end{DoxySeeAlso}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em buf} & Binary gpib string to read \\
\hline
\mbox{\tt in}  & {\em size} & Size of string we want to read \\
\hline
\mbox{\tt in}  & {\em status} & controls sending modes and returns status\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bytes read 

status
\end{DoxyReturn}

\begin{DoxyItemize}
\item Errors T\+I\+M\+E\+O\+U\+T\+\_\+\+F\+L\+AG or I\+F\+C\+\_\+\+F\+L\+AG will cause early exit and set status.
\begin{DoxyItemize}
\item Lower 8 bits\+: Data or Command.
\begin{DoxyItemize}
\item If A\+TN is L\+OW then we strip parity from the byte.
\end{DoxyItemize}
\item Upper 8 bits\+: Status and Errors.
\begin{DoxyItemize}
\item \begin{DoxySeeAlso}{See also}
\hyperlink{gpib_8h}{gpib.\+h} \+\_\+\+F\+L\+A\+GS defines for a full list.
\end{DoxySeeAlso}

\item An error implies the data byte can\textquotesingle{}t be trusted
\item Control Line Flags.
\begin{DoxyItemize}
\item E\+O\+I\+\_\+\+F\+L\+AG
\item S\+R\+Q\+\_\+\+F\+L\+AG
\item A\+T\+N\+\_\+\+F\+L\+AG
\item R\+E\+N\+\_\+\+F\+L\+AG
\item P\+P\+\_\+\+F\+L\+AG
\end{DoxyItemize}
\item Error Flags\+:
\begin{DoxyItemize}
\item I\+F\+C\+\_\+\+F\+L\+AG 
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyItemize}\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000015}{Todo}]T\+O\+DO decode this state -\/ for now I just set the E\+O\+I\+\_\+\+F\+L\+AG \end{DoxyRefDesc}


Definition at line 1027 of file gpib.\+c.



Referenced by amigo\+\_\+buffered\+\_\+write(), Amigo\+\_\+\+Command(), S\+S80\+\_\+\+Amigo\+\_\+\+Clear(), S\+S80\+\_\+\+Command\+\_\+\+State(), S\+S80\+\_\+locate\+\_\+and\+\_\+write(), and S\+S80\+\_\+\+Transparent\+\_\+\+State().

\index{gpib.\+c@{gpib.\+c}!gpib\+\_\+state\+\_\+init@{gpib\+\_\+state\+\_\+init}}
\index{gpib\+\_\+state\+\_\+init@{gpib\+\_\+state\+\_\+init}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+state\+\_\+init(void)}{gpib_state_init(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void gpib\+\_\+state\+\_\+init (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{gpib_8c_a32d2476eec2bbdf15e7db1b901c5a671}{}\label{gpib_8c_a32d2476eec2bbdf15e7db1b901c5a671}


Reset G\+P\+IB states and related variables. 


\begin{DoxyItemize}
\item Called at powerup and I\+FC or reset states.
\item Does not reset B\+US \begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 249 of file gpib.\+c.



Referenced by gpib\+\_\+error\+\_\+test(), gpib\+\_\+task(), gpib\+\_\+trace\+\_\+task(), main(), plot\+\_\+echo(), and receive\+\_\+plot().

\index{gpib.\+c@{gpib.\+c}!gpib\+\_\+timeout\+\_\+set@{gpib\+\_\+timeout\+\_\+set}}
\index{gpib\+\_\+timeout\+\_\+set@{gpib\+\_\+timeout\+\_\+set}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+timeout\+\_\+set(uint32\+\_\+t time)}{gpib_timeout_set(uint32_t time)}}]{\setlength{\rightskip}{0pt plus 5cm}void gpib\+\_\+timeout\+\_\+set (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{time}
\end{DoxyParamCaption}
)}\hypertarget{gpib_8c_a687395337dd5c6604a775e3ffd3f006f}{}\label{gpib_8c_a687395337dd5c6604a775e3ffd3f006f}


Set G\+P\+IB timeout timer in units of G\+P\+I\+B\+\_\+\+T\+A\+S\+K\+\_\+\+T\+I\+C\+\_\+\+US. 

\begin{DoxySeeAlso}{See also}
\+: \hyperlink{gpib_8c_a3eb10b99d17dd69982b6bfc820fb29db}{gpib\+\_\+timeout\+\_\+test()} 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 186 of file gpib.\+c.



Referenced by gpib\+\_\+read\+\_\+byte(), and gpib\+\_\+write\+\_\+byte().

\index{gpib.\+c@{gpib.\+c}!gpib\+\_\+timeout\+\_\+test@{gpib\+\_\+timeout\+\_\+test}}
\index{gpib\+\_\+timeout\+\_\+test@{gpib\+\_\+timeout\+\_\+test}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+timeout\+\_\+test()}{gpib_timeout_test()}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t gpib\+\_\+timeout\+\_\+test (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{gpib_8c_a3eb10b99d17dd69982b6bfc820fb29db}{}\label{gpib_8c_a3eb10b99d17dd69982b6bfc820fb29db}


Test G\+P\+IB timeout timer for timeout condition. 

\begin{DoxySeeAlso}{See also}
\+: \hyperlink{gpib_8c_a687395337dd5c6604a775e3ffd3f006f}{gpib\+\_\+timeout\+\_\+set()} 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
1 if timeout, 0 if not 
\end{DoxyReturn}


Definition at line 198 of file gpib.\+c.



Referenced by gpib\+\_\+read\+\_\+byte(), and gpib\+\_\+write\+\_\+byte().

\index{gpib.\+c@{gpib.\+c}!gpib\+\_\+timer\+\_\+elapsed\+\_\+begin@{gpib\+\_\+timer\+\_\+elapsed\+\_\+begin}}
\index{gpib\+\_\+timer\+\_\+elapsed\+\_\+begin@{gpib\+\_\+timer\+\_\+elapsed\+\_\+begin}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+timer\+\_\+elapsed\+\_\+begin(void)}{gpib_timer_elapsed_begin(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void gpib\+\_\+timer\+\_\+elapsed\+\_\+begin (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{gpib_8c_a6a3c1941e17626338b878123677ae797}{}\label{gpib_8c_a6a3c1941e17626338b878123677ae797}


Start measuring time -\/ used with hpib\+\_\+timer\+\_\+elapsed\+\_\+end() 

See \hyperlink{gpib__hal_8c}{gpib\+\_\+hal.\+c} for C\+PU specific code Provide Elapsed timer and Timeout timer -\/ both in Microseconds We use the lower level clock elapsed timer functions here \begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 112 of file gpib.\+c.



Referenced by amigo\+\_\+buffered\+\_\+read(), amigo\+\_\+buffered\+\_\+write(), Amigo\+\_\+\+Command(), amigo\+\_\+format(), amigo\+\_\+verify(), gpib\+\_\+tests(), S\+S80\+\_\+locate\+\_\+and\+\_\+read(), and S\+S80\+\_\+locate\+\_\+and\+\_\+write().

\index{gpib.\+c@{gpib.\+c}!gpib\+\_\+timer\+\_\+elapsed\+\_\+end@{gpib\+\_\+timer\+\_\+elapsed\+\_\+end}}
\index{gpib\+\_\+timer\+\_\+elapsed\+\_\+end@{gpib\+\_\+timer\+\_\+elapsed\+\_\+end}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+timer\+\_\+elapsed\+\_\+end(char $\ast$msg)}{gpib_timer_elapsed_end(char *msg)}}]{\setlength{\rightskip}{0pt plus 5cm}void gpib\+\_\+timer\+\_\+elapsed\+\_\+end (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{msg}
\end{DoxyParamCaption}
)}\hypertarget{gpib_8c_a87ae4b4852f4a1987fc61fec20f53d42}{}\label{gpib_8c_a87ae4b4852f4a1987fc61fec20f53d42}


Display user message and time delta since \hyperlink{gpib_8c_a6a3c1941e17626338b878123677ae797}{gpib\+\_\+timer\+\_\+elapsed\+\_\+begin()} call. 

Display a message \begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 143 of file gpib.\+c.



Referenced by amigo\+\_\+buffered\+\_\+read(), amigo\+\_\+buffered\+\_\+write(), Amigo\+\_\+\+Command(), amigo\+\_\+format(), amigo\+\_\+verify(), gpib\+\_\+tests(), S\+S80\+\_\+locate\+\_\+and\+\_\+read(), and S\+S80\+\_\+locate\+\_\+and\+\_\+write().

\index{gpib.\+c@{gpib.\+c}!gpib\+\_\+timer\+\_\+reset@{gpib\+\_\+timer\+\_\+reset}}
\index{gpib\+\_\+timer\+\_\+reset@{gpib\+\_\+timer\+\_\+reset}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+timer\+\_\+reset(void)}{gpib_timer_reset(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void gpib\+\_\+timer\+\_\+reset (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{gpib_8c_abe05115c27148ec7013e6f62dc94ae78}{}\label{gpib_8c_abe05115c27148ec7013e6f62dc94ae78}


Reset elapsed and timeout timers Elapses and Timeout Timers. 

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 129 of file gpib.\+c.



Referenced by gpib\+\_\+timer\+\_\+init().

\index{gpib.\+c@{gpib.\+c}!gpib\+\_\+timer\+\_\+task@{gpib\+\_\+timer\+\_\+task}}
\index{gpib\+\_\+timer\+\_\+task@{gpib\+\_\+timer\+\_\+task}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+timer\+\_\+task()}{gpib_timer_task()}}]{\setlength{\rightskip}{0pt plus 5cm}void gpib\+\_\+timer\+\_\+task (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{gpib_8c_ae9291b22beebb9d24354af643505f9cd}{}\label{gpib_8c_ae9291b22beebb9d24354af643505f9cd}


Main G\+P\+IB timer task called by low level interrup hander. 


\begin{DoxyItemize}
\item Provides Down timers and Elapsed timers
\item Called every G\+P\+I\+B\+\_\+\+T\+A\+S\+K\+\_\+\+T\+I\+C\+\_\+\+US Micro Seconds \begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 169 of file gpib.\+c.



Referenced by gpib\+\_\+timer\+\_\+init().

\index{gpib.\+c@{gpib.\+c}!gpib\+\_\+unread@{gpib\+\_\+unread}}
\index{gpib\+\_\+unread@{gpib\+\_\+unread}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+unread(uint16\+\_\+t ch)}{gpib_unread(uint16_t ch)}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t gpib\+\_\+unread (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{ch}
\end{DoxyParamCaption}
)}\hypertarget{gpib_8c_a2fdb3d4996ff399dc2fbfcada417bb1a}{}\label{gpib_8c_a2fdb3d4996ff399dc2fbfcada417bb1a}


G\+P\+IB ungets one character and all status states. 

Pushes a character back into the read buffer 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ch} & 
\begin{DoxyItemize}
\item Lower 8 bits\+: Data or Command.
\begin{DoxyItemize}
\item If A\+TN is L\+OW then we strip parity from the byte.
\end{DoxyItemize}
\item Upper 8 bits\+: Status and Errors present.
\begin{DoxyItemize}
\item 
\end{DoxyItemize}
\end{DoxyItemize}\\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\hyperlink{gpib_8h}{gpib.\+h} \+\_\+\+F\+L\+A\+GS defines for a full list. 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
ch 
\end{DoxyReturn}


Definition at line 690 of file gpib.\+c.



Referenced by G\+P\+I\+B\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(), and gpib\+\_\+read\+\_\+str().

\index{gpib.\+c@{gpib.\+c}!gpib\+\_\+write\+\_\+byte@{gpib\+\_\+write\+\_\+byte}}
\index{gpib\+\_\+write\+\_\+byte@{gpib\+\_\+write\+\_\+byte}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+write\+\_\+byte(uint16\+\_\+t ch)}{gpib_write_byte(uint16_t ch)}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t gpib\+\_\+write\+\_\+byte (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{ch}
\end{DoxyParamCaption}
)}\hypertarget{gpib_8c_ac3d50cc1d56705d107e2f8fb00692e68}{}\label{gpib_8c_ac3d50cc1d56705d107e2f8fb00692e68}


Send 1 byte and control line states to G\+P\+IB B\+US. 


\begin{DoxyItemize}
\item We assume we are talking to an active controller already in read state
\begin{DoxyItemize}
\item Any error flags set on return imply the data was not likely sent
\item You can OR the control flags A\+T\+N\+\_\+\+F\+L\+AG, E\+O\+I\+\_\+\+F\+L\+AG with (ch) to send them these states.
\item Results can be displayed for debugging with the decode(ch) funnction
\item We always exit with N\+R\+FD and N\+D\+AC L\+OW
\end{DoxyItemize}
\item References\+: H\+P-\/\+IB Tutorial pg13. H\+P-\/\+IB Tutorial pg 13 for the receive and send control line states Correction\+: The send routine M\+U\+ST also wait for N\+D\+AC L\+OW before exit. (You can verify this by checking the receive part of the handshake diagram just before it returns to the start of the loop) Failing to wait will cause problems that may masqurade as timing issues.
\item (It caused problems with my H\+P85 before I added the code)
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em ch} & ( Data or Command ) and control flags
\begin{DoxyItemize}
\item Upper 8 bits\+: contril flags
\item Flags\+:
\begin{DoxyItemize}
\item E\+O\+I\+\_\+\+F\+L\+AG
\item A\+T\+N\+\_\+\+F\+L\+AG
\end{DoxyItemize}
\end{DoxyItemize}\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}

\begin{DoxyItemize}
\item Lower 8 bits\+: Data or Command.
\begin{DoxyItemize}
\item If A\+TN is L\+OW then we strip parity from the byte.
\end{DoxyItemize}
\item Upper 8 bits\+: Status and Errors.
\begin{DoxyItemize}
\item 
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{gpib_8h}{gpib.\+h} \+\_\+\+F\+L\+A\+GS defines for a full list.
\begin{DoxyItemize}
\item An error implies the data byte can\textquotesingle{}t be trusted
\item Control Line Flags.
\begin{DoxyItemize}
\item \hyperlink{gpib_8h_ab6e601afadf8d274d9d341323a5c6a3e}{E\+O\+I\+\_\+\+F\+L\+AG}
\item \hyperlink{gpib_8h_aadec0e361e7d2ed6a82ef28bee7231f6}{S\+R\+Q\+\_\+\+F\+L\+AG}
\item \hyperlink{gpib_8h_abbe287946c2beaa1f76fe5be364c07ad}{A\+T\+N\+\_\+\+F\+L\+AG}
\item \hyperlink{gpib_8h_ac5ae85572f7432aaab806c29177eec8d}{R\+E\+N\+\_\+\+F\+L\+AG}
\item \hyperlink{gpib_8h_a660f399a9ffcc5c666bcc726073338cb}{P\+P\+\_\+\+F\+L\+AG}
\end{DoxyItemize}
\item Error Flags\+:
\begin{DoxyItemize}
\item \hyperlink{gpib_8h_a0202c6cc39130a2c251235ef2336cd13}{I\+F\+C\+\_\+\+F\+L\+AG} 
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxySeeAlso}
See H\+P-\/\+IB Tutorial pg 13 for the receive and send control line states

\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000013}{Todo}]F\+I\+X\+ME If we test N\+R\+FD == 1 and N\+D\+AC == 1 and exit rather then waiting we frequently fail. Why does this happen ??? Disabling the test and waiting fixes the problem. Why ??? \end{DoxyRefDesc}


\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000014}{Todo}]F\+I\+X\+ME \end{DoxyRefDesc}


Definition at line 474 of file gpib.\+c.



Referenced by gpib\+\_\+write\+\_\+str().

\index{gpib.\+c@{gpib.\+c}!gpib\+\_\+write\+\_\+str@{gpib\+\_\+write\+\_\+str}}
\index{gpib\+\_\+write\+\_\+str@{gpib\+\_\+write\+\_\+str}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+write\+\_\+str(uint8\+\_\+t $\ast$buf, int size, uint16\+\_\+t $\ast$status)}{gpib_write_str(uint8_t *buf, int size, uint16_t *status)}}]{\setlength{\rightskip}{0pt plus 5cm}int gpib\+\_\+write\+\_\+str (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{buf, }
\item[{int}]{size, }
\item[{uint16\+\_\+t $\ast$}]{status}
\end{DoxyParamCaption}
)}\hypertarget{gpib_8c_a1bdaac9496e7a0a3523481f2e8a2b9fe}{}\label{gpib_8c_a1bdaac9496e7a0a3523481f2e8a2b9fe}


Send string to G\+P\+IB B\+US -\/ controlled by status flags. 


\begin{DoxyItemize}
\item Status flags used when sending
\begin{DoxyItemize}
\item If E\+OI is set then E\+OI is sent at last character
\end{DoxyItemize}
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em buf} & Binary gpib string to send \\
\hline
\mbox{\tt in}  & {\em size} & Size of string \\
\hline
\mbox{\tt in}  & {\em status} & User status flags that control the sending process.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bytes sent
\begin{DoxyItemize}
\item will match size on success (no other tests needed).
\item Any size mismatch impiles error flags I\+F\+C\+\_\+\+F\+L\+AG and T\+I\+M\+E\+O\+U\+T\+\_\+\+F\+L\+AG.
\end{DoxyItemize}
\end{DoxyReturn}

\begin{DoxyItemize}
\item Errors T\+I\+M\+E\+O\+U\+T\+\_\+\+F\+L\+AG or I\+F\+C\+\_\+\+F\+L\+AG will cause early exit and set status.
\begin{DoxyItemize}
\item Lower 8 bits\+: Data or Command.
\begin{DoxyItemize}
\item If A\+TN is L\+OW then we strip parity from the byte.
\end{DoxyItemize}
\item Upper 8 bits\+: Status and Errors.
\begin{DoxyItemize}
\item \begin{DoxySeeAlso}{See also}
\hyperlink{gpib_8h}{gpib.\+h} \+\_\+\+F\+L\+A\+GS defines for a full list.
\end{DoxySeeAlso}

\item An error implies the data byte can\textquotesingle{}t be trusted
\item Control Line Flags.
\begin{DoxyItemize}
\item E\+O\+I\+\_\+\+F\+L\+AG
\item S\+R\+Q\+\_\+\+F\+L\+AG
\item A\+T\+N\+\_\+\+F\+L\+AG
\item R\+E\+N\+\_\+\+F\+L\+AG
\item P\+P\+\_\+\+F\+L\+AG
\end{DoxyItemize}
\item Error Flags\+:
\begin{DoxyItemize}
\item I\+F\+C\+\_\+\+F\+L\+AG \begin{DoxySeeAlso}{See also}
\+: \hyperlink{gpib_8c_ac3d50cc1d56705d107e2f8fb00692e68}{gpib\+\_\+write\+\_\+byte()} 

\+: \hyperlink{gpib_8h}{gpib.\+h} \+\_\+\+F\+L\+A\+GS defines for a full list) 
\end{DoxySeeAlso}

\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyItemize}\begin{DoxyReturn}{Returns}
Returns 
\end{DoxyReturn}


Definition at line 1124 of file gpib.\+c.



Referenced by amigo\+\_\+buffered\+\_\+read(), amigo\+\_\+cmd\+\_\+dsj(), amigo\+\_\+cmd\+\_\+wakeup(), Amigo\+\_\+\+Command(), amigo\+\_\+send\+\_\+logical\+\_\+address(), amigo\+\_\+send\+\_\+status(), plot\+\_\+echo(), Send\+\_\+\+Identify(), S\+S80\+\_\+describe(), S\+S80\+\_\+error\+\_\+return(), S\+S80\+\_\+locate\+\_\+and\+\_\+read(), S\+S80\+\_\+\+Report(), and S\+S80\+\_\+send\+\_\+status().

\index{gpib.\+c@{gpib.\+c}!Parallel\+\_\+\+Poll@{Parallel\+\_\+\+Poll}}
\index{Parallel\+\_\+\+Poll@{Parallel\+\_\+\+Poll}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{Parallel\+\_\+\+Poll()}{Parallel_Poll()}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t Parallel\+\_\+\+Poll (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{gpib_8c_a42d306c338c639682d0d6f0434a5c88b}{}\label{gpib_8c_a42d306c338c639682d0d6f0434a5c88b}


Detect Parallel Poll state. 


\begin{DoxyItemize}
\item P\+PR is short for \char`\"{}\+Parellel Poll Response\char`\"{}
\item P\+PR happens when the C\+IC (controller in charge) holds both
\begin{DoxyItemize}
\item A\+TN == 0 and E\+OI == 0
\end{DoxyItemize}
\item E\+OI is never used in command mode (A\+TN = 0)
\item P\+PR state is happening if we see both A\+TN and E\+OI L\+OW at once If P\+PR is enabled we have two options\+: 1) If software Parrallel Poll is defined we save D\+A\+TA B\+US state and hold P\+PR D\+A\+TA B\+US lines L\+OW. 2) Hardware will automatically hold D\+A\+TA B\+US lines low.
\begin{DoxyItemize}
\item Nest We go to the D\+E\+T\+E\+C\+T\+ED state
\end{DoxyItemize}
\item In the D\+E\+T\+E\+C\+T\+ED state we wait for A\+TN and E\+OI to change Once this happens\+: 1) If software Parrallel Poll is defined we restore the D\+A\+TA B\+US state. 2) Hardware will automatically release D\+A\+TA B\+US state. We report detecting if(debug\+\_\+level)
\item \hyperlink{gpib__hal_8c_a639fcfaa605f43d589798545d9d1a975}{ppr\+\_\+reg()} determines if we have P\+PR enabled.
\item References\+:
\begin{DoxyItemize}
\item S\+S80 pg 3-\/4, section 3-\/3 \begin{DoxySeeAlso}{See also}
\hyperlink{gpib_8c_a6db67436dee3daf25cc47ee11fa85122}{Enable\+P\+P\+R()} 

\hyperlink{gpib_8c_a6a8eeef647b5c132d08cd4373eb2c37b}{Disable\+P\+P\+R()} 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
1 if we see a P\+PR, 0 if not 
\end{DoxyReturn}

\end{DoxyItemize}
\end{DoxyItemize}

Definition at line 354 of file gpib.\+c.



Referenced by gpib\+\_\+read\+\_\+byte(), and gpib\+\_\+write\+\_\+byte().



\subsection{Variable Documentation}
\index{gpib.\+c@{gpib.\+c}!current@{current}}
\index{current@{current}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{current}{current}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t current}\hypertarget{gpib_8c_aaad5615d233044464c3661481a6760cd}{}\label{gpib_8c_aaad5615d233044464c3661481a6760cd}


Definition at line 99 of file gpib.\+c.



Referenced by clock\+\_\+elapsed\+\_\+end(), gpib\+\_\+read\+\_\+byte(), and gpib\+\_\+state\+\_\+init().

\index{gpib.\+c@{gpib.\+c}!device@{device}}
\index{device@{device}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{device}{device}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf B\+Y\+TE} device}\hypertarget{gpib_8c_a1b595c4136454db2525576508c951b63}{}\label{gpib_8c_a1b595c4136454db2525576508c951b63}


Device number -\/ working to support more then one device support. 



Definition at line 84 of file gpib.\+c.



Referenced by address\+\_\+to\+\_\+device(), device\+\_\+to\+\_\+\+P\+P\+R(), G\+P\+I\+B\+\_\+\+L\+I\+S\+T\+E\+N(), G\+P\+I\+B\+\_\+\+S\+E\+C\+O\+N\+D\+A\+R\+Y\+\_\+\+A\+D\+D\+R\+E\+S\+S(), and gpib\+\_\+state\+\_\+init().

\index{gpib.\+c@{gpib.\+c}!gpib\+\_\+iobuff@{gpib\+\_\+iobuff}}
\index{gpib\+\_\+iobuff@{gpib\+\_\+iobuff}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+iobuff}{gpib_iobuff}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t gpib\+\_\+iobuff\mbox{[}{\bf G\+P\+I\+B\+\_\+\+I\+O\+B\+U\+F\+F\+\_\+\+L\+EN}\mbox{]}}\hypertarget{gpib_8c_a00023217d54aa8bb6473583593942869}{}\label{gpib_8c_a00023217d54aa8bb6473583593942869}


common IO buffer for \hyperlink{gpib_8c_a67f7cdca85091b3eb0eea0051a200fbe}{gpib\+\_\+read\+\_\+str()} and \hyperlink{gpib_8c_a1bdaac9496e7a0a3523481f2e8a2b9fe}{gpib\+\_\+write\+\_\+str()} 



Definition at line 76 of file gpib.\+c.



Referenced by amigo\+\_\+buffered\+\_\+read(), amigo\+\_\+buffered\+\_\+write(), Amigo\+\_\+\+Command(), amigo\+\_\+format(), amigo\+\_\+verify(), S\+S80\+\_\+\+Command\+\_\+\+State(), S\+S80\+\_\+locate\+\_\+and\+\_\+read(), S\+S80\+\_\+locate\+\_\+and\+\_\+write(), and S\+S80\+\_\+\+Transparent\+\_\+\+State().

\index{gpib.\+c@{gpib.\+c}!gpib\+\_\+unread\+\_\+data@{gpib\+\_\+unread\+\_\+data}}
\index{gpib\+\_\+unread\+\_\+data@{gpib\+\_\+unread\+\_\+data}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+unread\+\_\+data}{gpib_unread_data}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t gpib\+\_\+unread\+\_\+data}\hypertarget{gpib_8c_a8f8b0bbe03e4f62aa8e736a9a1f5f609}{}\label{gpib_8c_a8f8b0bbe03e4f62aa8e736a9a1f5f609}


\hyperlink{gpib_8c_a2fdb3d4996ff399dc2fbfcada417bb1a}{gpib\+\_\+unread()} data 



Definition at line 81 of file gpib.\+c.



Referenced by gpib\+\_\+read\+\_\+byte(), and gpib\+\_\+unread().

\index{gpib.\+c@{gpib.\+c}!gpib\+\_\+unread\+\_\+f@{gpib\+\_\+unread\+\_\+f}}
\index{gpib\+\_\+unread\+\_\+f@{gpib\+\_\+unread\+\_\+f}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+unread\+\_\+f}{gpib_unread_f}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t gpib\+\_\+unread\+\_\+f = 0}\hypertarget{gpib_8c_a2296b83cccf9d7a3b954d18ece282bd1}{}\label{gpib_8c_a2296b83cccf9d7a3b954d18ece282bd1}


\hyperlink{gpib_8c_a2fdb3d4996ff399dc2fbfcada417bb1a}{gpib\+\_\+unread()} flag 



Definition at line 79 of file gpib.\+c.



Referenced by gpib\+\_\+bus\+\_\+init(), gpib\+\_\+read\+\_\+byte(), and gpib\+\_\+unread().

\index{gpib.\+c@{gpib.\+c}!lastcmd@{lastcmd}}
\index{lastcmd@{lastcmd}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{lastcmd}{lastcmd}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t lastcmd}\hypertarget{gpib_8c_ab8bc74192b6d8a3e352b03e724dac5b7}{}\label{gpib_8c_ab8bc74192b6d8a3e352b03e724dac5b7}


gpib current and last command 



Definition at line 99 of file gpib.\+c.



Referenced by G\+P\+I\+B\+\_\+\+L\+I\+S\+T\+E\+N(), gpib\+\_\+read\+\_\+byte(), gpib\+\_\+state\+\_\+init(), and gpib\+\_\+task().

\index{gpib.\+c@{gpib.\+c}!listening@{listening}}
\index{listening@{listening}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{listening}{listening}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t listening}\hypertarget{gpib_8c_a906eb6f6a81521d91f73f9ab2e03b02e}{}\label{gpib_8c_a906eb6f6a81521d91f73f9ab2e03b02e}


gpib listen address 



Definition at line 92 of file gpib.\+c.



Referenced by Amigo\+\_\+\+Command(), A\+M\+I\+G\+O\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(), Amigo\+\_\+\+Execute(), amigo\+\_\+todo(), amigo\+\_\+todo\+\_\+op(), G\+P\+I\+B(), G\+P\+I\+B\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(), G\+P\+I\+B\+\_\+\+L\+I\+S\+T\+E\+N(), G\+P\+I\+B\+\_\+\+S\+E\+C\+O\+N\+D\+A\+R\+Y\+\_\+\+A\+D\+D\+R\+E\+S\+S(), gpib\+\_\+state\+\_\+init(), G\+P\+I\+B\+\_\+\+T\+A\+L\+K(), gpib\+\_\+task(), P\+R\+I\+N\+T\+E\+R\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(), and S\+S80\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S().

\index{gpib.\+c@{gpib.\+c}!listening\+\_\+last@{listening\+\_\+last}}
\index{listening\+\_\+last@{listening\+\_\+last}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{listening\+\_\+last}{listening_last}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t listening\+\_\+last}\hypertarget{gpib_8c_a049cdc383eed2f97e4384a5728c00123}{}\label{gpib_8c_a049cdc383eed2f97e4384a5728c00123}


gpib last listen address 



Definition at line 94 of file gpib.\+c.



Referenced by G\+P\+I\+B\+\_\+\+L\+I\+S\+T\+E\+N(), gpib\+\_\+state\+\_\+init(), and listen\+\_\+cleanup().

\index{gpib.\+c@{gpib.\+c}!secondary@{secondary}}
\index{secondary@{secondary}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{secondary}{secondary}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t secondary}\hypertarget{gpib_8c_a25538708e408bbc21b380cb6f709f5d8}{}\label{gpib_8c_a25538708e408bbc21b380cb6f709f5d8}


gpib secondary 



Definition at line 102 of file gpib.\+c.



Referenced by G\+P\+I\+B\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(), gpib\+\_\+state\+\_\+init(), and gpib\+\_\+task().

\index{gpib.\+c@{gpib.\+c}!spoll@{spoll}}
\index{spoll@{spoll}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{spoll}{spoll}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t spoll}\hypertarget{gpib_8c_a0205f89c3878a7a6cb4ee1f75de35fb3}{}\label{gpib_8c_a0205f89c3878a7a6cb4ee1f75de35fb3}


gpib serial poll status 



Definition at line 97 of file gpib.\+c.



Referenced by G\+P\+I\+B(), gpib\+\_\+state\+\_\+init(), and G\+P\+I\+B\+\_\+\+T\+A\+L\+K().

\index{gpib.\+c@{gpib.\+c}!talking@{talking}}
\index{talking@{talking}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{talking}{talking}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t talking}\hypertarget{gpib_8c_acef501d1e292f230efac5ed0cddf90e8}{}\label{gpib_8c_acef501d1e292f230efac5ed0cddf90e8}


gpib talk address 

G\+P\+IB B\+US states.

\begin{DoxyVerb}/// SS80 References: ("SS80" is the short form used in the project)
///  "Subset 80 from Fixed and flexible disc drives"
///   Printed November, 1985
///   HP Part# 5958-4129
///
/// CS80 References: ("CS80" is the short form used in the project)
///   "CS/80 Instruction Set Programming Manual"
///   Printed: APR 1983
///   HP Part# 5955-3442
///
/// Amigo References: ("Amigo" is the short form used in the project)
///   "Appendix A of 9895A Flexible Disc Memory Service Manual"
///   HP Part# 09895-90030
/// \end{DoxyVerb}
 \begin{DoxyVerb}///  Reference: Amigo Command Set Reference used in this document
///  Short Form         Title
///  SS80       "Subset 80 from Fixed and flexible disc drives" 5958-4129
///  HP9123         9123 disc drive manual addendum 5957-6584
///  A          Appendix A "HP 9895A Disc Memory Commends Set"
///             See Receive Status A16
///  L    Buffered Read             0x05    2       A33     Y
///  L    Request Physical Address  0x14    2       A21     Y 0x68
///             See Send Address A20
/// 
///  0x6B Command Op Codes          OP      bytes
///  L    Buffered Read Verify      0x05    2       A37     Y
///  L    ID Triggered Read         0x06    2       A41     Y
/// 
///  0x6C Command Op Codes          OP      bytes
///  L    Unbuffered Read Verify    0x05    2       A38     Y
///  L    Request Physical Address  0x14    2       A21     Y 0x68
///  L    Format Request            0x18    2       A50     N
///  L    Door Lock                 0x19    2       A30     N
///  L    Door Unlock               0x1A    2       A31     N
/// 
///  0x6F Command Op Codes          OP      bytes
///  L    Download Controller       ---     1..256  A26     N
/// 
///  0x70 Command Op Codes          OP      bytes
///  L    HP-300 Clear              ---     1       A23     N
///  T    DSJ                       ---     1       A11     N
/// 
///  0x77 Command Op Codes          OP      bytes
///  T/L  HP-IB CRC                 ---     ---     A30     N
/// 
///  0x7E Command Op Codes          OP      bytes
///  L    Write Loopback Record     ---     1..256  A25     N
///  T    Read Loopback Record      ---     1..256  A14     N
/// 
///  0x7F Command Op Codes          OP      bytes
///  T    Read Self Test Results    ---     2       A13     N
///  L    Initiat Self Test         ---     2       A24     N
/// \end{DoxyVerb}
 \begin{DoxyVerb}/// Secondary_Commands and OP Code processing
///
/// 0x60 Command Op Codes           OP      bytes
/// L    Receive Data               ---     ---
///         Execute of most receive data requests
///         All Disk Write
/// T    Send Data                  ---     ---
///         Execute of most send data requests
///         All Disk Read
///
/// 0x68 Command Op Codes           OP      bytes   Ref     Execute Phase
/// L    Cold Load Read             0x00    2       A40     Y
/// L    Seek                       0x02    6       A27     N
/// L    Request Status buffered        0x03    2       A15     Y 0x68
/// L    Unbuffered Read            0x05    2       A35     Y
/// L    Verify                     0x07    4       A36     N
/// L    Unbuffered Write Request   0x08    2       A45     Y
/// L    Initialize                 0x0B    2       A46     Y
/// L    Initialize DBIT                0x2B    2       A46     Y
/// L    Request Logical Address    0x14    2       A20     Y 0x68
/// L   End                         0x15    2       A29     N
/// T    Send Status or Address         ----    4       A20     N
///         Execute of all Address and Status Requests 
///         (Y 0x68)
///
/// 0x69 Command Op Codes           OP      bytes
/// L    Buffered Write Request     0x08    2       A43     Y
///
/// 0x6A Command Op Codes           OP      bytes
/// L    Request Status Unbuffered   0x03    2      A15     Y 0x68
///         See Receive Status A16
/// L    Buffered Read              0x05    2       A33     Y
/// L    Request Physical Address   0x14    2       A21     Y 0x68
///         See Send Address A20
///
/// 0x6B Command Op Codes           OP      bytes
/// L    Buffered Read Verify       0x05    2       A37     Y
/// L    ID Triggered Read          0x06    2       A41     Y
///
/// 0x6C Command Op Codes           OP      bytes
/// L    Unbuffered Read Verify     0x05    2       A38     Y
/// L    Request Physical Address   0x14    2       A21     Y 0x68
/// L    Format Request                 0x18    2       A50     N
/// L    Door Lock                  0x19    2       A30     N
/// L    Door Unlock                0x1A    2       A31     N
///
/// 0x6F Command Op Codes           OP      bytes
/// L    Download Controller        ---     1..256  A26     N
///
/// 0x70 Command Op Codes           OP      bytes
/// L    HP-300 Clear               ---     1       A23     N
/// T    DSJ                        ---     1       A11     N
///
/// 0x77 Command Op Codes           OP      bytes
/// T/L  HP-IB CRC                  ---     ---     A30     N
///
/// 0x7E Command Op Codes           OP      bytes
/// L    Write Loopback Record      ---     1..256  A25     N
/// T    Read Loopback Record       ---     1..256  A14     N
///
/// 0x7F Command Op Codes           OP      bytes
/// T    Read Self Test Results         ---     2       A13     N
/// L    Initiat Self Test          ---     2       A24     N
/// \end{DoxyVerb}
 

Definition at line 87 of file gpib.\+c.



Referenced by Amigo\+\_\+\+Command(), A\+M\+I\+G\+O\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(), Amigo\+\_\+\+Execute(), amigo\+\_\+todo(), amigo\+\_\+todo\+\_\+op(), G\+P\+I\+B(), G\+P\+I\+B\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(), G\+P\+I\+B\+\_\+\+L\+I\+S\+T\+E\+N(), G\+P\+I\+B\+\_\+\+S\+E\+C\+O\+N\+D\+A\+R\+Y\+\_\+\+A\+D\+D\+R\+E\+S\+S(), gpib\+\_\+state\+\_\+init(), G\+P\+I\+B\+\_\+\+T\+A\+L\+K(), P\+R\+I\+N\+T\+E\+R\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(), and S\+S80\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S().

\index{gpib.\+c@{gpib.\+c}!talking\+\_\+last@{talking\+\_\+last}}
\index{talking\+\_\+last@{talking\+\_\+last}!gpib.\+c@{gpib.\+c}}
\subsubsection[{\texorpdfstring{talking\+\_\+last}{talking_last}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t talking\+\_\+last}\hypertarget{gpib_8c_a8f34b1ce42fbf3391219cfedde825495}{}\label{gpib_8c_a8f34b1ce42fbf3391219cfedde825495}


gpib last talk address 



Definition at line 89 of file gpib.\+c.



Referenced by gpib\+\_\+state\+\_\+init(), and G\+P\+I\+B\+\_\+\+T\+A\+L\+K().


\hypertarget{gpib__task_8c}{}\section{gpib/gpib\+\_\+task.c File Reference}
\label{gpib__task_8c}\index{gpib/gpib\+\_\+task.\+c@{gpib/gpib\+\_\+task.\+c}}


High level G\+P\+IB command handler for H\+P85 disk emulator project for A\+V\+R8.  


{\ttfamily \#include \char`\"{}user\+\_\+config.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}defines.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}drives.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}gpib\+\_\+hal.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}gpib.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}gpib\+\_\+task.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}amigo.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ss80.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}printer.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}posix.\+h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{gpib__task_8c_a29b89503cfbf214695082b16d6d40f52}{gpib\+\_\+file\+\_\+init} ()
\begin{DoxyCompactList}\small\item\em Read Configuration File. \end{DoxyCompactList}\item 
void \hyperlink{gpib__task_8c_a8351e69574a06b0f9184a877fee560c1}{gpib\+\_\+log} (char $\ast$str)
\item 
int \hyperlink{gpib__task_8c_a727ee8639d6e3f33b9d1c5d00258ae4a}{S\+S80\+\_\+is\+\_\+\+M\+LA} (int address)
\begin{DoxyCompactList}\small\item\em Check if S\+S80 listening address. \end{DoxyCompactList}\item 
int \hyperlink{gpib__task_8c_a6029655f36ebeac8ad4289b50120edda}{S\+S80\+\_\+is\+\_\+\+M\+TA} (int address)
\begin{DoxyCompactList}\small\item\em Check if S\+S80 talking address. \end{DoxyCompactList}\item 
int \hyperlink{gpib__task_8c_a9be4dbb384e5f77dc72ec44ca6f20c2f}{S\+S80\+\_\+is\+\_\+\+M\+SA} (int address)
\begin{DoxyCompactList}\small\item\em Check if S\+S80 secondary address. \end{DoxyCompactList}\item 
int \hyperlink{gpib__task_8c_a5388f9110afe97053ba52575fd404171}{A\+M\+I\+G\+O\+\_\+is\+\_\+\+M\+LA} (int address)
\begin{DoxyCompactList}\small\item\em Check if A\+M\+I\+GO listening address. \end{DoxyCompactList}\item 
int \hyperlink{gpib__task_8c_ab5e7311f705af87cb62e74e1493a9b7d}{A\+M\+I\+G\+O\+\_\+is\+\_\+\+M\+TA} (int address)
\begin{DoxyCompactList}\small\item\em Check if A\+M\+I\+GO talking address. \end{DoxyCompactList}\item 
int \hyperlink{gpib__task_8c_a66829ca3f977b4f2ccc171275c3b57fa}{A\+M\+I\+G\+O\+\_\+is\+\_\+\+M\+SA} (int address)
\begin{DoxyCompactList}\small\item\em Check if A\+M\+I\+GO secondary address. \end{DoxyCompactList}\item 
int \hyperlink{gpib__task_8c_a48f72546a97843213351fcbad4d42469}{P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+LA} (int address)
\begin{DoxyCompactList}\small\item\em Check if P\+R\+I\+N\+T\+ER listening address. \end{DoxyCompactList}\item 
int \hyperlink{gpib__task_8c_ad3df30ddc50951831d3837e99c3624b0}{P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+TA} (int address)
\begin{DoxyCompactList}\small\item\em Check if P\+R\+I\+N\+T\+ER talking address. \end{DoxyCompactList}\item 
int \hyperlink{gpib__task_8c_a5da52fb36be595498e2ad9c4ced6a2ac}{P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+SA} (int address)
\begin{DoxyCompactList}\small\item\em Check if P\+R\+I\+N\+T\+ER secondary address. \end{DoxyCompactList}\item 
void \hyperlink{gpib__task_8c_ac8d743894347147b12ee9e29d01acd8a}{gpib\+\_\+trace\+\_\+task} (char $\ast$name)
\begin{DoxyCompactList}\small\item\em Trace G\+P\+IB activity passively -\/ saving to a log file. \end{DoxyCompactList}\item 
uint16\+\_\+t \hyperlink{gpib__task_8c_a903eb44d83bf8f2db71e6f32a35fec62}{gpib\+\_\+error\+\_\+test} (uint16\+\_\+t val)
\begin{DoxyCompactList}\small\item\em Check for G\+P\+IB errors and timeouts. \end{DoxyCompactList}\item 
void \hyperlink{gpib__task_8c_a2a437a5de39ba349ce90eef38f075712}{gpib\+\_\+init\+\_\+devices} (void)
\begin{DoxyCompactList}\small\item\em Initialize A\+LL emulated devices S\+S80, A\+M\+I\+GO and printer. \end{DoxyCompactList}\item 
uint16\+\_\+t \hyperlink{gpib__task_8c_a986d23075dcf4a3e6fd14995d0e82704}{G\+P\+I\+B\+\_\+\+C\+O\+M\+M\+A\+N\+DS} (uint16\+\_\+t val, uint8\+\_\+t unread)
\begin{DoxyCompactList}\small\item\em Process all G\+P\+IB Secondary Commands. \end{DoxyCompactList}\item 
void \hyperlink{gpib__task_8c_af6b5cba8eb1142502f2ce96fc86a933f}{gpib\+\_\+task} (void)
\begin{DoxyCompactList}\small\item\em Top most main G\+P\+IB device emulator task. This is \hyperlink{main_8c_a840291bc02cba5474a4cb46a9b9566fe}{main()} for G\+P\+IB state machine loop All tasks are dispatched from here. \end{DoxyCompactList}\item 
int \hyperlink{gpib__task_8c_af7ec1aa9752ef65efd1bfd8a582a29c2}{Send\+\_\+\+Identify} (uint8\+\_\+t ch, uint16\+\_\+t ID)
\begin{DoxyCompactList}\small\item\em Send drive identify-\/ 2 bytes. \end{DoxyCompactList}\item 
int \hyperlink{gpib__task_8c_ac63d4e431ab55dddfbf436d87135128e}{G\+P\+IB} (uint8\+\_\+t ch)
\begin{DoxyCompactList}\small\item\em Main G\+P\+IB command handler Commands 0x00 .. 0x1f. \end{DoxyCompactList}\item 
int \hyperlink{gpib__task_8c_ae2bd0f57f529ba47dbc113ac709a35f0}{G\+P\+I\+B\+\_\+\+L\+I\+S\+T\+EN} (uint8\+\_\+t ch)
\begin{DoxyCompactList}\small\item\em Process all G\+P\+IB Listen commands. \end{DoxyCompactList}\item 
int \hyperlink{gpib__task_8c_a9e586941a3629bec1a2c7e7a9113cee3}{G\+P\+I\+B\+\_\+\+T\+A\+LK} (uint8\+\_\+t ch)
\begin{DoxyCompactList}\small\item\em Process all G\+P\+IB Talk commands. \end{DoxyCompactList}\item 
int \hyperlink{gpib__task_8c_ad18e29cb0500dc2226b4bebbf0fcbf0c}{G\+P\+I\+B\+\_\+\+S\+E\+C\+O\+N\+D\+A\+R\+Y\+\_\+\+A\+D\+D\+R\+E\+SS} (uint8\+\_\+t ch)
\begin{DoxyCompactList}\small\item\em Process all G\+P\+IB Secondary Addresses. \end{DoxyCompactList}\item 
void \hyperlink{gpib__task_8c_ab19aca8b48e6c56616ee29eac42130cc}{listen\+\_\+cleanup} ()
\begin{DoxyCompactList}\small\item\em Called when the listen address changes. \end{DoxyCompactList}\item 
void \hyperlink{gpib__task_8c_af4bf5ed0317de478278afbb1d1bf8614}{talk\+\_\+cleanup} ()
\begin{DoxyCompactList}\small\item\em Called when the G\+P\+IB talk address changes. \end{DoxyCompactList}\item 
void \hyperlink{gpib__task_8c_ab62b0b328847bfeb43baded10b34d28b}{Dump\+Data} (unsigned char $\ast$ptr, int length)
\begin{DoxyCompactList}\small\item\em H\+EX and A\+S\+C\+II dump of string in human-\/readable format. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
char \hyperlink{gpib__task_8c_a8877b76be0ce372adf0ed7ff2a143573}{cfgfile} \mbox{[}$\,$\mbox{]} = \char`\"{}/hpdisk.\+cfg\char`\"{}
\begin{DoxyCompactList}\small\item\em Config file name. \end{DoxyCompactList}\item 
\hyperlink{structFIL}{F\+IL} \hyperlink{gpib__task_8c_aa82c05f8b2bc31c887ebb86caddec02a}{fp\+\_\+file}
\item 
int \hyperlink{gpib__task_8c_af219299ebad47daa6631415a8b41345a}{debuglevel} = 1
\begin{DoxyCompactList}\small\item\em Debug flag -\/ used to log G\+P\+IB and emulator messages. \end{DoxyCompactList}\item 
\hyperlink{posix_8h_aed4dabeb9f7c518ded42f930a04abce8}{F\+I\+LE} $\ast$ \hyperlink{gpib__task_8c_a6d8bea8aaf66ef1fda1051637f59dd3c}{gpib\+\_\+log\+\_\+fp}
\begin{DoxyCompactList}\small\item\em G\+P\+IB log file handel. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
High level G\+P\+IB command handler for H\+P85 disk emulator project for A\+V\+R8. 

\begin{DoxyParagraph}{Edit History}

\begin{DoxyItemize}
\item \mbox{[}1.\+0\mbox{]} \mbox{[}Mike Gore\mbox{]} Initial revision of file.
\end{DoxyItemize}
\end{DoxyParagraph}
\begin{DoxyParagraph}{Copyright \copyright{} 2014 Mike Gore, Inc. All rights reserved.}

\end{DoxyParagraph}


\subsection{Function Documentation}
\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!A\+M\+I\+G\+O\+\_\+is\+\_\+\+M\+LA@{A\+M\+I\+G\+O\+\_\+is\+\_\+\+M\+LA}}
\index{A\+M\+I\+G\+O\+\_\+is\+\_\+\+M\+LA@{A\+M\+I\+G\+O\+\_\+is\+\_\+\+M\+LA}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{A\+M\+I\+G\+O\+\_\+is\+\_\+\+M\+L\+A(int address)}{AMIGO_is_MLA(int address)}}]{\setlength{\rightskip}{0pt plus 5cm}int A\+M\+I\+G\+O\+\_\+is\+\_\+\+M\+LA (
\begin{DoxyParamCaption}
\item[{int}]{address}
\end{DoxyParamCaption}
)}\hypertarget{gpib__task_8c_a5388f9110afe97053ba52575fd404171}{}\label{gpib__task_8c_a5388f9110afe97053ba52575fd404171}


Check if A\+M\+I\+GO listening address. 


\begin{DoxyItemize}
\item Used at power up, Bus I\+FC or user aborts \begin{DoxyReturn}{Returns}
1 if true or 0 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 102 of file gpib\+\_\+task.\+c.



Referenced by Amigo\+\_\+\+Command(), A\+M\+I\+G\+O\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(), Amigo\+\_\+\+Execute(), amigo\+\_\+todo(), amigo\+\_\+todo\+\_\+op(), G\+P\+I\+B(), G\+P\+I\+B\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(), and G\+P\+I\+B\+\_\+\+L\+I\+S\+T\+E\+N().

\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!A\+M\+I\+G\+O\+\_\+is\+\_\+\+M\+SA@{A\+M\+I\+G\+O\+\_\+is\+\_\+\+M\+SA}}
\index{A\+M\+I\+G\+O\+\_\+is\+\_\+\+M\+SA@{A\+M\+I\+G\+O\+\_\+is\+\_\+\+M\+SA}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{A\+M\+I\+G\+O\+\_\+is\+\_\+\+M\+S\+A(int address)}{AMIGO_is_MSA(int address)}}]{\setlength{\rightskip}{0pt plus 5cm}int A\+M\+I\+G\+O\+\_\+is\+\_\+\+M\+SA (
\begin{DoxyParamCaption}
\item[{int}]{address}
\end{DoxyParamCaption}
)}\hypertarget{gpib__task_8c_a66829ca3f977b4f2ccc171275c3b57fa}{}\label{gpib__task_8c_a66829ca3f977b4f2ccc171275c3b57fa}


Check if A\+M\+I\+GO secondary address. 


\begin{DoxyItemize}
\item Used at power up, Bus I\+FC or user aborts \begin{DoxyReturn}{Returns}
1 if true or 0 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 125 of file gpib\+\_\+task.\+c.



Referenced by G\+P\+I\+B\+\_\+\+S\+E\+C\+O\+N\+D\+A\+R\+Y\+\_\+\+A\+D\+D\+R\+E\+S\+S().

\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!A\+M\+I\+G\+O\+\_\+is\+\_\+\+M\+TA@{A\+M\+I\+G\+O\+\_\+is\+\_\+\+M\+TA}}
\index{A\+M\+I\+G\+O\+\_\+is\+\_\+\+M\+TA@{A\+M\+I\+G\+O\+\_\+is\+\_\+\+M\+TA}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{A\+M\+I\+G\+O\+\_\+is\+\_\+\+M\+T\+A(int address)}{AMIGO_is_MTA(int address)}}]{\setlength{\rightskip}{0pt plus 5cm}int A\+M\+I\+G\+O\+\_\+is\+\_\+\+M\+TA (
\begin{DoxyParamCaption}
\item[{int}]{address}
\end{DoxyParamCaption}
)}\hypertarget{gpib__task_8c_ab5e7311f705af87cb62e74e1493a9b7d}{}\label{gpib__task_8c_ab5e7311f705af87cb62e74e1493a9b7d}


Check if A\+M\+I\+GO talking address. 


\begin{DoxyItemize}
\item Used at power up, Bus I\+FC or user aborts \begin{DoxyReturn}{Returns}
1 if true or 0 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 114 of file gpib\+\_\+task.\+c.



Referenced by Amigo\+\_\+\+Command(), A\+M\+I\+G\+O\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(), Amigo\+\_\+\+Execute(), amigo\+\_\+todo(), amigo\+\_\+todo\+\_\+op(), G\+P\+I\+B\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(), and G\+P\+I\+B\+\_\+\+T\+A\+L\+K().

\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!Dump\+Data@{Dump\+Data}}
\index{Dump\+Data@{Dump\+Data}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{Dump\+Data(unsigned char $\ast$ptr, int length)}{DumpData(unsigned char *ptr, int length)}}]{\setlength{\rightskip}{0pt plus 5cm}void Dump\+Data (
\begin{DoxyParamCaption}
\item[{unsigned char $\ast$}]{ptr, }
\item[{int}]{length}
\end{DoxyParamCaption}
)}\hypertarget{gpib__task_8c_ab62b0b328847bfeb43baded10b34d28b}{}\label{gpib__task_8c_ab62b0b328847bfeb43baded10b34d28b}


H\+EX and A\+S\+C\+II dump of string in human-\/readable format. 


\begin{DoxyItemize}
\item Used only for debugging 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ptr} & data \\
\hline
\mbox{\tt in}  & {\em length} & length of data string\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 960 of file gpib\+\_\+task.\+c.

\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!G\+P\+IB@{G\+P\+IB}}
\index{G\+P\+IB@{G\+P\+IB}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{G\+P\+I\+B(uint8\+\_\+t ch)}{GPIB(uint8_t ch)}}]{\setlength{\rightskip}{0pt plus 5cm}int G\+P\+IB (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{ch}
\end{DoxyParamCaption}
)}\hypertarget{gpib__task_8c_ac63d4e431ab55dddfbf436d87135128e}{}\label{gpib__task_8c_ac63d4e431ab55dddfbf436d87135128e}


Main G\+P\+IB command handler Commands 0x00 .. 0x1f. 


\begin{DoxyItemize}
\item We only ever called with A\+TN=1 commands.
\item ch = G\+P\+IB command and status (ie it has the A\+T\+N\+\_\+\+F\+L\+AG set).
\item Notes\+: We track any device states and call handelers.
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ch} & 8 bit command\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on sucess 

G\+P\+IB error flags on fail 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{gpib_8h}{gpib.\+h} \hyperlink{gpib_8h_a10916ab21f8ba06e447e898790ef6a4b}{E\+R\+R\+O\+R\+\_\+\+M\+A\+SK} defines for a full list. 
\end{DoxySeeAlso}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000015}{Todo}]T\+O\+DO \end{DoxyRefDesc}


Parallel Poll Configure

Parallel Poll Unconfigure

\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000016}{Todo}]F\+I\+X\+ME \end{DoxyRefDesc}


Selected Device Clear

Note\+: Suposed to be unsupported in S\+S80 -\/ pg 4-\/2 C\+S80 3-\/4

\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000017}{Todo}]F\+I\+X\+ME \end{DoxyRefDesc}


(Universal) Device Clear

\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000018}{Todo}]Fixme \end{DoxyRefDesc}


Definition at line 600 of file gpib\+\_\+task.\+c.



Referenced by gpib\+\_\+task().

\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!G\+P\+I\+B\+\_\+\+C\+O\+M\+M\+A\+N\+DS@{G\+P\+I\+B\+\_\+\+C\+O\+M\+M\+A\+N\+DS}}
\index{G\+P\+I\+B\+\_\+\+C\+O\+M\+M\+A\+N\+DS@{G\+P\+I\+B\+\_\+\+C\+O\+M\+M\+A\+N\+DS}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{G\+P\+I\+B\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(uint16\+\_\+t val, uint8\+\_\+t unread)}{GPIB_COMMANDS(uint16_t val, uint8_t unread)}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t G\+P\+I\+B\+\_\+\+C\+O\+M\+M\+A\+N\+DS (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{val, }
\item[{uint8\+\_\+t}]{unread}
\end{DoxyParamCaption}
)}\hypertarget{gpib__task_8c_a986d23075dcf4a3e6fd14995d0e82704}{}\label{gpib__task_8c_a986d23075dcf4a3e6fd14995d0e82704}


Process all G\+P\+IB Secondary Commands. 


\begin{DoxyItemize}
\item Dispatch emulator handler based on address
\item if unread is true we \char`\"{}unread\char`\"{} val so the corresponding device emulator can process it.
\item Unread allow us to write each emulator as a pure function.
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em val} & G\+P\+IB secondary command and control flags. \\
\hline
\mbox{\tt in}  & {\em unread} & if 1 unread val prior to emulator call.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
G\+P\+IB status from emulator command. 

0 if no emulator command processed. 
\end{DoxyReturn}
talking ?

listening ? 

Definition at line 348 of file gpib\+\_\+task.\+c.



Referenced by gpib\+\_\+task().

\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!gpib\+\_\+error\+\_\+test@{gpib\+\_\+error\+\_\+test}}
\index{gpib\+\_\+error\+\_\+test@{gpib\+\_\+error\+\_\+test}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+error\+\_\+test(uint16\+\_\+t val)}{gpib_error_test(uint16_t val)}}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t gpib\+\_\+error\+\_\+test (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{val}
\end{DoxyParamCaption}
)}\hypertarget{gpib__task_8c_a903eb44d83bf8f2db71e6f32a35fec62}{}\label{gpib__task_8c_a903eb44d83bf8f2db71e6f32a35fec62}


Check for G\+P\+IB errors and timeouts. 


\begin{DoxyItemize}
\item Reset G\+P\+IB bus on I\+FC or user keypress
\item Display debug messages if debuglevel permits.
\item Check media insert state
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em val} & command or data byte and control or error flags.
\begin{DoxyItemize}
\item Lower 8 bits\+: Data or Command.
\begin{DoxyItemize}
\item If A\+TN is L\+OW then we strip parity from the byte.
\end{DoxyItemize}
\item Upper 8 bits\+: Status and Errors.
\begin{DoxyItemize}
\item 
\end{DoxyItemize}
\end{DoxyItemize}\\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\hyperlink{gpib_8h}{gpib.\+h} \+\_\+\+F\+L\+A\+GS defines for a full list.
\begin{DoxyItemize}
\item An error implies the data byte can\textquotesingle{}t be trusted
\item Control Line Flags.
\begin{DoxyItemize}
\item \hyperlink{gpib_8h_ab6e601afadf8d274d9d341323a5c6a3e}{E\+O\+I\+\_\+\+F\+L\+AG}
\item \hyperlink{gpib_8h_aadec0e361e7d2ed6a82ef28bee7231f6}{S\+R\+Q\+\_\+\+F\+L\+AG}
\item \hyperlink{gpib_8h_abbe287946c2beaa1f76fe5be364c07ad}{A\+T\+N\+\_\+\+F\+L\+AG}
\item \hyperlink{gpib_8h_ac5ae85572f7432aaab806c29177eec8d}{R\+E\+N\+\_\+\+F\+L\+AG}
\item \hyperlink{gpib_8h_a660f399a9ffcc5c666bcc726073338cb}{P\+P\+\_\+\+F\+L\+AG}
\end{DoxyItemize}
\item Error Flags\+:
\begin{DoxyItemize}
\item \hyperlink{gpib_8h_a0202c6cc39130a2c251235ef2336cd13}{I\+F\+C\+\_\+\+F\+L\+AG}
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxySeeAlso}

\begin{DoxyItemize}
\item E\+O\+I\+\_\+\+F\+L\+AG
\item A\+T\+N\+\_\+\+F\+L\+AG \begin{DoxySeeAlso}{See also}
\hyperlink{gpib_8h}{gpib.\+h} \+\_\+\+F\+L\+A\+GS defines for a full list.
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
val 

A\+B\+O\+RT flag on user keypress 
\end{DoxyReturn}

\end{DoxyItemize}\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000014}{Todo}]do we want to always exit here ? low level G\+P\+IB functions are still useful even without a D\+I\+SK \end{DoxyRefDesc}


Definition at line 259 of file gpib\+\_\+task.\+c.



Referenced by gpib\+\_\+task().

\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!gpib\+\_\+file\+\_\+init@{gpib\+\_\+file\+\_\+init}}
\index{gpib\+\_\+file\+\_\+init@{gpib\+\_\+file\+\_\+init}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+file\+\_\+init()}{gpib_file_init()}}]{\setlength{\rightskip}{0pt plus 5cm}void gpib\+\_\+file\+\_\+init (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{gpib__task_8c_a29b89503cfbf214695082b16d6d40f52}{}\label{gpib__task_8c_a29b89503cfbf214695082b16d6d40f52}


Read Configuration File. 



Definition at line 39 of file gpib\+\_\+task.\+c.



Referenced by main().

\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!gpib\+\_\+init\+\_\+devices@{gpib\+\_\+init\+\_\+devices}}
\index{gpib\+\_\+init\+\_\+devices@{gpib\+\_\+init\+\_\+devices}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+init\+\_\+devices(void)}{gpib_init_devices(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void gpib\+\_\+init\+\_\+devices (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{gpib__task_8c_a2a437a5de39ba349ce90eef38f075712}{}\label{gpib__task_8c_a2a437a5de39ba349ce90eef38f075712}


Initialize A\+LL emulated devices S\+S80, A\+M\+I\+GO and printer. 


\begin{DoxyItemize}
\item Used at power up, Bus I\+FC or user aborts \begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 319 of file gpib\+\_\+task.\+c.



Referenced by gpib\+\_\+error\+\_\+test(), gpib\+\_\+task(), and gpib\+\_\+trace\+\_\+task().

\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!G\+P\+I\+B\+\_\+\+L\+I\+S\+T\+EN@{G\+P\+I\+B\+\_\+\+L\+I\+S\+T\+EN}}
\index{G\+P\+I\+B\+\_\+\+L\+I\+S\+T\+EN@{G\+P\+I\+B\+\_\+\+L\+I\+S\+T\+EN}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{G\+P\+I\+B\+\_\+\+L\+I\+S\+T\+E\+N(uint8\+\_\+t ch)}{GPIB_LISTEN(uint8_t ch)}}]{\setlength{\rightskip}{0pt plus 5cm}int G\+P\+I\+B\+\_\+\+L\+I\+S\+T\+EN (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{ch}
\end{DoxyParamCaption}
)}\hypertarget{gpib__task_8c_ae2bd0f57f529ba47dbc113ac709a35f0}{}\label{gpib__task_8c_ae2bd0f57f529ba47dbc113ac709a35f0}


Process all G\+P\+IB Listen commands. 


\begin{DoxyItemize}
\item We only ever called with A\+TN=1 commands.
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ch} & 8 bit listen command\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 
\end{DoxyReturn}
N\+O\+TE\+: we must track the \char`\"{}addressed state\char`\"{} of each device so we can determine its state -\/ ie\+: command vs Secondary states

Universal Unlisten 

Definition at line 718 of file gpib\+\_\+task.\+c.



Referenced by gpib\+\_\+task().

\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!gpib\+\_\+log@{gpib\+\_\+log}}
\index{gpib\+\_\+log@{gpib\+\_\+log}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+log(char $\ast$str)}{gpib_log(char *str)}}]{\setlength{\rightskip}{0pt plus 5cm}void gpib\+\_\+log (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{str}
\end{DoxyParamCaption}
)}\hypertarget{gpib__task_8c_a8351e69574a06b0f9184a877fee560c1}{}\label{gpib__task_8c_a8351e69574a06b0f9184a877fee560c1}


Definition at line 55 of file gpib\+\_\+task.\+c.



Referenced by gpib\+\_\+decode(), and gpib\+\_\+trace\+\_\+task().

\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!G\+P\+I\+B\+\_\+\+S\+E\+C\+O\+N\+D\+A\+R\+Y\+\_\+\+A\+D\+D\+R\+E\+SS@{G\+P\+I\+B\+\_\+\+S\+E\+C\+O\+N\+D\+A\+R\+Y\+\_\+\+A\+D\+D\+R\+E\+SS}}
\index{G\+P\+I\+B\+\_\+\+S\+E\+C\+O\+N\+D\+A\+R\+Y\+\_\+\+A\+D\+D\+R\+E\+SS@{G\+P\+I\+B\+\_\+\+S\+E\+C\+O\+N\+D\+A\+R\+Y\+\_\+\+A\+D\+D\+R\+E\+SS}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{G\+P\+I\+B\+\_\+\+S\+E\+C\+O\+N\+D\+A\+R\+Y\+\_\+\+A\+D\+D\+R\+E\+S\+S(uint8\+\_\+t ch)}{GPIB_SECONDARY_ADDRESS(uint8_t ch)}}]{\setlength{\rightskip}{0pt plus 5cm}int G\+P\+I\+B\+\_\+\+S\+E\+C\+O\+N\+D\+A\+R\+Y\+\_\+\+A\+D\+D\+R\+E\+SS (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{ch}
\end{DoxyParamCaption}
)}\hypertarget{gpib__task_8c_ad18e29cb0500dc2226b4bebbf0fcbf0c}{}\label{gpib__task_8c_ad18e29cb0500dc2226b4bebbf0fcbf0c}


Process all G\+P\+IB Secondary Addresses. 


\begin{DoxyItemize}
\item We only ever called with A\+TN=1 commands. Secondary Address, talking == U\+NT
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ch} & 8 bit secondary address.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 
\end{DoxyReturn}
N\+O\+TE\+: We now know that ch $>$= 0x60 \&\& ch $<$= 0x7f Previous tests ensure this fact is true and because C\+M\+D\+\_\+\+M\+A\+SK == 0x7f

note\+: any errors will reset lastcmd Universal Talk mode Treat this as a Secondary Address ? S\+S80 Ident 4-\/31 If we have our secondary address then send I\+D\+E\+NT

ch = secondary address 

Definition at line 871 of file gpib\+\_\+task.\+c.



Referenced by gpib\+\_\+task().

\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!G\+P\+I\+B\+\_\+\+T\+A\+LK@{G\+P\+I\+B\+\_\+\+T\+A\+LK}}
\index{G\+P\+I\+B\+\_\+\+T\+A\+LK@{G\+P\+I\+B\+\_\+\+T\+A\+LK}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{G\+P\+I\+B\+\_\+\+T\+A\+L\+K(uint8\+\_\+t ch)}{GPIB_TALK(uint8_t ch)}}]{\setlength{\rightskip}{0pt plus 5cm}int G\+P\+I\+B\+\_\+\+T\+A\+LK (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{ch}
\end{DoxyParamCaption}
)}\hypertarget{gpib__task_8c_a9e586941a3629bec1a2c7e7a9113cee3}{}\label{gpib__task_8c_a9e586941a3629bec1a2c7e7a9113cee3}


Process all G\+P\+IB Talk commands. 


\begin{DoxyItemize}
\item We only ever called with A\+TN=1 commands.
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ch} & 8 bit talk command\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 
\end{DoxyReturn}
N\+O\+TE\+: we must track the \char`\"{}addressed state\char`\"{} of each device so we can determine its state -\/ ie\+: command vs Secondary states save talking state

Universal Untalk 

Definition at line 791 of file gpib\+\_\+task.\+c.



Referenced by gpib\+\_\+task().

\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!gpib\+\_\+task@{gpib\+\_\+task}}
\index{gpib\+\_\+task@{gpib\+\_\+task}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+task(void)}{gpib_task(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void gpib\+\_\+task (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{gpib__task_8c_af6b5cba8eb1142502f2ce96fc86a933f}{}\label{gpib__task_8c_af6b5cba8eb1142502f2ce96fc86a933f}


Top most main G\+P\+IB device emulator task. This is \hyperlink{main_8c_a840291bc02cba5474a4cb46a9b9566fe}{main()} for G\+P\+IB state machine loop All tasks are dispatched from here. 


\begin{DoxyItemize}
\item Initializes B\+US, Devices, State.
\item Reads and processes G\+P\+IB control or data bytes and calls emulator task. \begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}

\end{DoxyItemize}G\+P\+IB commands with A\+TN set

G\+P\+IB listen

G\+P\+IB talk

G\+P\+IB secondary Note\+: We know ch $>$= 0x60 \&\& ch $<$= 0x7f because of previous tests

We have to keep track of secondary address that may happen out of order with older A\+M\+I\+GO protocol this method works for S\+S80 as well

G\+P\+I\+B\+\_\+\+C\+O\+M\+M\+A\+N\+DS does most of the work

G\+P\+IB commands without A\+TN set

G\+P\+I\+B\+\_\+\+C\+O\+M\+M\+A\+N\+DS does most of the work 

Definition at line 433 of file gpib\+\_\+task.\+c.



Referenced by gpib\+\_\+tests(), and task().

\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!gpib\+\_\+trace\+\_\+task@{gpib\+\_\+trace\+\_\+task}}
\index{gpib\+\_\+trace\+\_\+task@{gpib\+\_\+trace\+\_\+task}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+trace\+\_\+task(char $\ast$name)}{gpib_trace_task(char *name)}}]{\setlength{\rightskip}{0pt plus 5cm}void gpib\+\_\+trace\+\_\+task (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{name}
\end{DoxyParamCaption}
)}\hypertarget{gpib__task_8c_ac8d743894347147b12ee9e29d01acd8a}{}\label{gpib__task_8c_ac8d743894347147b12ee9e29d01acd8a}


Trace G\+P\+IB activity passively -\/ saving to a log file. 


\begin{DoxyItemize}
\item We use the natural G\+P\+IB handshaking to slow G\+P\+IB talker/listeners so we can keep up
\item A keypress will exit the trace and close the file
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em name} & File name to save log file to. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void Exit on Key Press 
\end{DoxyReturn}


Definition at line 179 of file gpib\+\_\+task.\+c.



Referenced by gpib\+\_\+tests().

\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!listen\+\_\+cleanup@{listen\+\_\+cleanup}}
\index{listen\+\_\+cleanup@{listen\+\_\+cleanup}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{listen\+\_\+cleanup()}{listen_cleanup()}}]{\setlength{\rightskip}{0pt plus 5cm}void listen\+\_\+cleanup (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{gpib__task_8c_ab19aca8b48e6c56616ee29eac42130cc}{}\label{gpib__task_8c_ab19aca8b48e6c56616ee29eac42130cc}


Called when the listen address changes. 


\begin{DoxyItemize}
\item Used to cleanup or close at the end of a listen transation.
\item Also called when G\+P\+IB bus reset or unlisten. \begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 923 of file gpib\+\_\+task.\+c.



Referenced by G\+P\+I\+B\+\_\+\+L\+I\+S\+T\+E\+N(), and gpib\+\_\+state\+\_\+init().

\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+LA@{P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+LA}}
\index{P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+LA@{P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+LA}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+L\+A(int address)}{PRINTER_is_MLA(int address)}}]{\setlength{\rightskip}{0pt plus 5cm}int P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+LA (
\begin{DoxyParamCaption}
\item[{int}]{address}
\end{DoxyParamCaption}
)}\hypertarget{gpib__task_8c_a48f72546a97843213351fcbad4d42469}{}\label{gpib__task_8c_a48f72546a97843213351fcbad4d42469}


Check if P\+R\+I\+N\+T\+ER listening address. 


\begin{DoxyItemize}
\item Used at power up, Bus I\+FC or user aborts \begin{DoxyReturn}{Returns}
1 if true or 0 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 137 of file gpib\+\_\+task.\+c.



Referenced by G\+P\+I\+B\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(), G\+P\+I\+B\+\_\+\+L\+I\+S\+T\+E\+N(), G\+P\+I\+B\+\_\+\+T\+A\+L\+K(), gpib\+\_\+task(), and P\+R\+I\+N\+T\+E\+R\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S().

\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+SA@{P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+SA}}
\index{P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+SA@{P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+SA}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+S\+A(int address)}{PRINTER_is_MSA(int address)}}]{\setlength{\rightskip}{0pt plus 5cm}int P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+SA (
\begin{DoxyParamCaption}
\item[{int}]{address}
\end{DoxyParamCaption}
)}\hypertarget{gpib__task_8c_a5da52fb36be595498e2ad9c4ced6a2ac}{}\label{gpib__task_8c_a5da52fb36be595498e2ad9c4ced6a2ac}


Check if P\+R\+I\+N\+T\+ER secondary address. 


\begin{DoxyItemize}
\item Used at power up, Bus I\+FC or user aborts \begin{DoxyReturn}{Returns}
1 if true or 0 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 161 of file gpib\+\_\+task.\+c.

\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+TA@{P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+TA}}
\index{P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+TA@{P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+TA}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+T\+A(int address)}{PRINTER_is_MTA(int address)}}]{\setlength{\rightskip}{0pt plus 5cm}int P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+TA (
\begin{DoxyParamCaption}
\item[{int}]{address}
\end{DoxyParamCaption}
)}\hypertarget{gpib__task_8c_ad3df30ddc50951831d3837e99c3624b0}{}\label{gpib__task_8c_ad3df30ddc50951831d3837e99c3624b0}


Check if P\+R\+I\+N\+T\+ER talking address. 


\begin{DoxyItemize}
\item Used at power up, Bus I\+FC or user aborts \begin{DoxyReturn}{Returns}
1 if true or 0 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 149 of file gpib\+\_\+task.\+c.



Referenced by G\+P\+I\+B\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(), G\+P\+I\+B\+\_\+\+T\+A\+L\+K(), and P\+R\+I\+N\+T\+E\+R\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S().

\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!Send\+\_\+\+Identify@{Send\+\_\+\+Identify}}
\index{Send\+\_\+\+Identify@{Send\+\_\+\+Identify}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{Send\+\_\+\+Identify(uint8\+\_\+t ch, uint16\+\_\+t I\+D)}{Send_Identify(uint8_t ch, uint16_t ID)}}]{\setlength{\rightskip}{0pt plus 5cm}int Send\+\_\+\+Identify (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{ch, }
\item[{uint16\+\_\+t}]{ID}
\end{DoxyParamCaption}
)}\hypertarget{gpib__task_8c_af7ec1aa9752ef65efd1bfd8a582a29c2}{}\label{gpib__task_8c_af7ec1aa9752ef65efd1bfd8a582a29c2}


Send drive identify-\/ 2 bytes. 


\begin{DoxyItemize}
\item References
\begin{DoxyItemize}
\item Transparent Command I\+D\+E\+NT
\item S\+S80 4-\/31
\item C\+S80 pg 4-\/27, 3-\/10
\item A11
\end{DoxyItemize}
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ch} & channel\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on G\+P\+IB error returns error flags 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{gpib_8h}{gpib.\+h} \hyperlink{gpib_8h_a10916ab21f8ba06e447e898790ef6a4b}{E\+R\+R\+O\+R\+\_\+\+M\+A\+SK} for a full list. 
\end{DoxySeeAlso}


Definition at line 567 of file gpib\+\_\+task.\+c.



Referenced by G\+P\+I\+B\+\_\+\+S\+E\+C\+O\+N\+D\+A\+R\+Y\+\_\+\+A\+D\+D\+R\+E\+S\+S().

\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!S\+S80\+\_\+is\+\_\+\+M\+LA@{S\+S80\+\_\+is\+\_\+\+M\+LA}}
\index{S\+S80\+\_\+is\+\_\+\+M\+LA@{S\+S80\+\_\+is\+\_\+\+M\+LA}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{S\+S80\+\_\+is\+\_\+\+M\+L\+A(int address)}{SS80_is_MLA(int address)}}]{\setlength{\rightskip}{0pt plus 5cm}int S\+S80\+\_\+is\+\_\+\+M\+LA (
\begin{DoxyParamCaption}
\item[{int}]{address}
\end{DoxyParamCaption}
)}\hypertarget{gpib__task_8c_a727ee8639d6e3f33b9d1c5d00258ae4a}{}\label{gpib__task_8c_a727ee8639d6e3f33b9d1c5d00258ae4a}


Check if S\+S80 listening address. 


\begin{DoxyItemize}
\item Used at power up, Bus I\+FC or user aborts \begin{DoxyReturn}{Returns}
1 if true or 0 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 66 of file gpib\+\_\+task.\+c.



Referenced by G\+P\+I\+B(), G\+P\+I\+B\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(), G\+P\+I\+B\+\_\+\+L\+I\+S\+T\+E\+N(), and S\+S80\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S().

\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!S\+S80\+\_\+is\+\_\+\+M\+SA@{S\+S80\+\_\+is\+\_\+\+M\+SA}}
\index{S\+S80\+\_\+is\+\_\+\+M\+SA@{S\+S80\+\_\+is\+\_\+\+M\+SA}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{S\+S80\+\_\+is\+\_\+\+M\+S\+A(int address)}{SS80_is_MSA(int address)}}]{\setlength{\rightskip}{0pt plus 5cm}int S\+S80\+\_\+is\+\_\+\+M\+SA (
\begin{DoxyParamCaption}
\item[{int}]{address}
\end{DoxyParamCaption}
)}\hypertarget{gpib__task_8c_a9be4dbb384e5f77dc72ec44ca6f20c2f}{}\label{gpib__task_8c_a9be4dbb384e5f77dc72ec44ca6f20c2f}


Check if S\+S80 secondary address. 


\begin{DoxyItemize}
\item Used at power up, Bus I\+FC or user aborts \begin{DoxyReturn}{Returns}
1 if true or 0 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 90 of file gpib\+\_\+task.\+c.



Referenced by G\+P\+I\+B\+\_\+\+S\+E\+C\+O\+N\+D\+A\+R\+Y\+\_\+\+A\+D\+D\+R\+E\+S\+S().

\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!S\+S80\+\_\+is\+\_\+\+M\+TA@{S\+S80\+\_\+is\+\_\+\+M\+TA}}
\index{S\+S80\+\_\+is\+\_\+\+M\+TA@{S\+S80\+\_\+is\+\_\+\+M\+TA}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{S\+S80\+\_\+is\+\_\+\+M\+T\+A(int address)}{SS80_is_MTA(int address)}}]{\setlength{\rightskip}{0pt plus 5cm}int S\+S80\+\_\+is\+\_\+\+M\+TA (
\begin{DoxyParamCaption}
\item[{int}]{address}
\end{DoxyParamCaption}
)}\hypertarget{gpib__task_8c_a6029655f36ebeac8ad4289b50120edda}{}\label{gpib__task_8c_a6029655f36ebeac8ad4289b50120edda}


Check if S\+S80 talking address. 


\begin{DoxyItemize}
\item Used at power up, Bus I\+FC or user aborts \begin{DoxyReturn}{Returns}
1 if true or 0 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 78 of file gpib\+\_\+task.\+c.



Referenced by G\+P\+I\+B(), G\+P\+I\+B\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(), G\+P\+I\+B\+\_\+\+T\+A\+L\+K(), and S\+S80\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S().

\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!talk\+\_\+cleanup@{talk\+\_\+cleanup}}
\index{talk\+\_\+cleanup@{talk\+\_\+cleanup}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{talk\+\_\+cleanup()}{talk_cleanup()}}]{\setlength{\rightskip}{0pt plus 5cm}void talk\+\_\+cleanup (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{gpib__task_8c_af4bf5ed0317de478278afbb1d1bf8614}{}\label{gpib__task_8c_af4bf5ed0317de478278afbb1d1bf8614}


Called when the G\+P\+IB talk address changes. 


\begin{DoxyItemize}
\item Used to cleanup or close at the end of a talk transation.
\item Also called when G\+P\+IB bus reset or untalk.
\item Not used in this emulator.
\end{DoxyItemize}

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 948 of file gpib\+\_\+task.\+c.



Referenced by gpib\+\_\+state\+\_\+init(), and G\+P\+I\+B\+\_\+\+T\+A\+L\+K().



\subsection{Variable Documentation}
\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!cfgfile@{cfgfile}}
\index{cfgfile@{cfgfile}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{cfgfile}{cfgfile}}]{\setlength{\rightskip}{0pt plus 5cm}char cfgfile\mbox{[}$\,$\mbox{]} = \char`\"{}/hpdisk.\+cfg\char`\"{}}\hypertarget{gpib__task_8c_a8877b76be0ce372adf0ed7ff2a143573}{}\label{gpib__task_8c_a8877b76be0ce372adf0ed7ff2a143573}


Config file name. 



Definition at line 28 of file gpib\+\_\+task.\+c.



Referenced by gpib\+\_\+file\+\_\+init().

\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!debuglevel@{debuglevel}}
\index{debuglevel@{debuglevel}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{debuglevel}{debuglevel}}]{\setlength{\rightskip}{0pt plus 5cm}int debuglevel = 1}\hypertarget{gpib__task_8c_af219299ebad47daa6631415a8b41345a}{}\label{gpib__task_8c_af219299ebad47daa6631415a8b41345a}


Debug flag -\/ used to log G\+P\+IB and emulator messages. 



Definition at line 32 of file gpib\+\_\+task.\+c.



Referenced by alloc\+\_\+device(), amigo\+\_\+buffered\+\_\+read(), amigo\+\_\+buffered\+\_\+write(), amigo\+\_\+chs\+\_\+to\+\_\+logical(), amigo\+\_\+cmd\+\_\+clear(), amigo\+\_\+cmd\+\_\+dsj(), amigo\+\_\+cmd\+\_\+wakeup(), Amigo\+\_\+\+Command(), Amigo\+\_\+\+Execute(), amigo\+\_\+format(), amigo\+\_\+overflow\+\_\+check(), amigo\+\_\+request\+\_\+status(), amigo\+\_\+send\+\_\+logical\+\_\+address(), amigo\+\_\+send\+\_\+status(), amigo\+\_\+verify(), assign\+\_\+value(), Disable\+P\+P\+R(), Enable\+P\+P\+R(), find\+\_\+device(), G\+P\+I\+B(), gpib\+\_\+assert\+\_\+ifc(), gpib\+\_\+assert\+\_\+ren(), gpib\+\_\+bus\+\_\+init(), gpib\+\_\+error\+\_\+test(), gpib\+\_\+file\+\_\+init(), gpib\+\_\+format\+\_\+disk(), G\+P\+I\+B\+\_\+\+L\+I\+S\+T\+E\+N(), gpib\+\_\+read\+\_\+str(), G\+P\+I\+B\+\_\+\+S\+E\+C\+O\+N\+D\+A\+R\+Y\+\_\+\+A\+D\+D\+R\+E\+S\+S(), gpib\+\_\+state\+\_\+init(), G\+P\+I\+B\+\_\+\+T\+A\+L\+K(), gpib\+\_\+task(), gpib\+\_\+tests(), gpib\+\_\+unread(), gpib\+\_\+write\+\_\+byte(), gpib\+\_\+write\+\_\+str(), listen\+\_\+cleanup(), main(), Parallel\+\_\+\+Poll(), P\+O\+S\+I\+X\+\_\+\+Read\+\_\+\+Config(), ppr\+\_\+init(), printer\+\_\+buffer(), printer\+\_\+close(), P\+R\+I\+N\+T\+E\+R\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(), printer\+\_\+open(), receive\+\_\+plot(), receive\+\_\+plot\+\_\+flush(), Send\+\_\+\+Identify(), set\+\_\+active\+\_\+device(), S\+S80\+\_\+\+Amigo\+\_\+\+Clear(), S\+S80\+\_\+cmd\+\_\+seek(), S\+S80\+\_\+\+Command\+\_\+\+State(), S\+S80\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(), S\+S80\+\_\+describe(), S\+S80\+\_\+error\+\_\+return(), S\+S80\+\_\+\+Execute\+\_\+\+State(), S\+S80\+\_\+increment(), S\+S80\+\_\+init(), S\+S80\+\_\+locate\+\_\+and\+\_\+read(), S\+S80\+\_\+locate\+\_\+and\+\_\+write(), S\+S80\+\_\+\+Report(), S\+S80\+\_\+\+Selected\+\_\+\+Device\+\_\+\+Clear(), S\+S80\+\_\+send\+\_\+status(), S\+S80\+\_\+\+Test(), and S\+S80\+\_\+\+Transparent\+\_\+\+State().

\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!fp\+\_\+file@{fp\+\_\+file}}
\index{fp\+\_\+file@{fp\+\_\+file}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{fp\+\_\+file}{fp_file}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf F\+IL} fp\+\_\+file}\hypertarget{gpib__task_8c_aa82c05f8b2bc31c887ebb86caddec02a}{}\label{gpib__task_8c_aa82c05f8b2bc31c887ebb86caddec02a}


Definition at line 29 of file gpib\+\_\+task.\+c.

\index{gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}!gpib\+\_\+log\+\_\+fp@{gpib\+\_\+log\+\_\+fp}}
\index{gpib\+\_\+log\+\_\+fp@{gpib\+\_\+log\+\_\+fp}!gpib\+\_\+task.\+c@{gpib\+\_\+task.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+log\+\_\+fp}{gpib_log_fp}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf F\+I\+LE} $\ast$ gpib\+\_\+log\+\_\+fp}\hypertarget{gpib__task_8c_a6d8bea8aaf66ef1fda1051637f59dd3c}{}\label{gpib__task_8c_a6d8bea8aaf66ef1fda1051637f59dd3c}


G\+P\+IB log file handel. 

Log G\+P\+IB transactions.


\begin{DoxyParams}{Parameters}
{\em str} & message to log \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 35 of file gpib\+\_\+task.\+c.



Referenced by gpib\+\_\+file\+\_\+init().


\hypertarget{lifutils_8h}{}\section{gpib/lifutils.h File Reference}
\label{lifutils_8h}\index{gpib/lifutils.\+h@{gpib/lifutils.\+h}}
{\ttfamily \#include \char`\"{}user\+\_\+config.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}defines.\+h\char`\"{}}\\*
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structlifvol__t}{lifvol\+\_\+t}
\begin{DoxyCompactList}\small\item\em Disk Layout. \end{DoxyCompactList}\item 
struct \hyperlink{structlifdirent__t}{lifdirent\+\_\+t}
\begin{DoxyCompactList}\small\item\em Directory layout. \end{DoxyCompactList}\item 
struct \hyperlink{structlifdir__t}{lifdir\+\_\+t}
\begin{DoxyCompactList}\small\item\em Master L\+IF data structure Contains image file name Volume Structure Current Directory Entry read/write flag. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{lifutils_8h_a9f32d2537f4daba6a314185cf52b7e56}{L\+I\+F\+\_\+\+S\+E\+C\+T\+O\+R\+\_\+\+S\+I\+ZE}~256
\begin{DoxyCompactList}\small\item\em Depends on how much free ram we have. \end{DoxyCompactList}\item 
\#define \hyperlink{lifutils_8h_a7e7f4ebd8f31cd7f9dcb0e9758ef8f44}{L\+I\+F\+\_\+\+C\+H\+U\+N\+KS}~16
\begin{DoxyCompactList}\small\item\em used for formatting \end{DoxyCompactList}\item 
\#define \hyperlink{lifutils_8h_a625b7a543a55b48e28ea93fbb61595eb}{L\+I\+F\+\_\+\+C\+H\+U\+N\+K\+\_\+\+S\+I\+ZE}~(\hyperlink{lifutils_8h_a9f32d2537f4daba6a314185cf52b7e56}{L\+I\+F\+\_\+\+S\+E\+C\+T\+O\+R\+\_\+\+S\+I\+ZE}$\ast$\hyperlink{lifutils_8h_a7e7f4ebd8f31cd7f9dcb0e9758ef8f44}{L\+I\+F\+\_\+\+C\+H\+U\+N\+KS})
\item 
\#define \hyperlink{lifutils_8h_a99ad70dd3200a3ee46388bc2c36fe720}{L\+I\+F\+\_\+\+D\+I\+R\+\_\+\+S\+I\+ZE}~32
\begin{DoxyCompactList}\small\item\em L\+IF directory entry size. \end{DoxyCompactList}\item 
\#define \hyperlink{lifutils_8h_a8cfa79b094fc3a5db37b26761a639e6d}{L\+I\+F\+\_\+\+I\+M\+A\+G\+E\+\_\+\+N\+A\+M\+E\+\_\+\+S\+I\+ZE}~64
\begin{DoxyCompactList}\small\item\em size of image file name size used by lif\+\_\+format() \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \hyperlink{structstat}{stat} \hyperlink{lifutils_8h_aebb3d0e746d3aa086e0baa48ad66b964}{stat\+\_\+t}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{lifutils_8h_adcd52baa64a03567d69ce3579e3f66ea}{lif\+\_\+help} (void)
\begin{DoxyCompactList}\small\item\em Help Menu for User invoked G\+P\+IB functions and tasks See\+: int \hyperlink{gpib__tests_8h_aed0c6a0a794f33d5cf7691c96d3e4955}{gpib\+\_\+tests(char $\ast$str)} \end{DoxyCompactList}\item 
int \hyperlink{lifutils_8h_a32dc220253a6108ad1d2f6b06318d326}{lif\+\_\+tests} (char $\ast$str)
\begin{DoxyCompactList}\small\item\em L\+I\+F\+Guser tests. \end{DoxyCompactList}\item 
int \hyperlink{lifutils_8h_a390b6787d7428e6c8492013b8c982fd9}{lif\+\_\+chars} (int c, int index)
\begin{DoxyCompactList}\small\item\em Check if characters in a volume of file name are valid. \end{DoxyCompactList}\item 
int \hyperlink{lifutils_8h_a6ef03363b9241a81bdd36c868ec93190}{lif\+\_\+\+B2S} (uint8\+\_\+t $\ast$B, uint8\+\_\+t $\ast$name, int size)
\begin{DoxyCompactList}\small\item\em Convert L\+IF space padded string name into normal string. \end{DoxyCompactList}\item 
int \hyperlink{lifutils_8h_a87df4549ffaf99f198cc8aa40923d1e8}{lif\+\_\+checkname} (char $\ast$name)
\begin{DoxyCompactList}\small\item\em Check that a IF volume name of directory name is valid. \end{DoxyCompactList}\item 
void \hyperlink{lifutils_8h_a3581f407fe6c5cbe6a5db361fe49d387}{lif\+\_\+\+S2B} (uint8\+\_\+t $\ast$B, uint8\+\_\+t $\ast$name, int size)
\begin{DoxyCompactList}\small\item\em string to L\+IF directory entry \end{DoxyCompactList}\item 
int \hyperlink{lifutils_8h_a4526efb5e3517ff7bb83e6ac08e4c6b6}{lif\+\_\+fixname} (uint8\+\_\+t $\ast$B, char $\ast$name, int size)
\begin{DoxyCompactList}\small\item\em Convert a file name (unix/fat32) format into a valid L\+IF name Only use the \hyperlink{posix_8c_a4d3dfaf2f5a63e2e4eaa128477a9b5e7}{basename()} part of the string and remove any file name extentions L\+IF names may have only these characters\+: \mbox{[}A-\/Z\mbox{]}\mbox{[}A-\/\+Z0-\/09\+\_\+\mbox{]}+ L\+IF names are converted to upper case L\+IF names are padded at the end with spaces Any invalid input characters are converted into spaces. \end{DoxyCompactList}\item 
\hyperlink{structlifvol__t}{lifvol\+\_\+t} $\ast$ \hyperlink{lifutils_8h_aa510ba1ba6da0fdde01e0d123d368802}{lif\+\_\+\+Pack\+Volume} (uint8\+\_\+t $\ast$B, \hyperlink{structlifvol__t}{lifvol\+\_\+t} $\ast$V)
\begin{DoxyCompactList}\small\item\em Pack \hyperlink{structlifvol__t}{lifvol\+\_\+t} data into bytes. \end{DoxyCompactList}\item 
int \hyperlink{lifutils_8h_aadb8d7b2205d009d52fb0dc0b4ae8f21}{lif\+\_\+\+Validate\+Volume} (\hyperlink{structlifvol__t}{lifvol\+\_\+t} $\ast$V, int debug)
\begin{DoxyCompactList}\small\item\em Check Volume Table. \end{DoxyCompactList}\item 
\hyperlink{structlifvol__t}{lifvol\+\_\+t} $\ast$ \hyperlink{lifutils_8h_a2691a261adb3a6a8b491bdef501f90a8}{lif\+\_\+\+Un\+Pack\+Volume} (uint8\+\_\+t $\ast$B, \hyperlink{structlifvol__t}{lifvol\+\_\+t} $\ast$V)
\begin{DoxyCompactList}\small\item\em Un\+Pack \hyperlink{structlifvol__t}{lifvol\+\_\+t} data from bytes. \end{DoxyCompactList}\item 
\hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$ \hyperlink{lifutils_8h_a6a866bf201f0e1608653a22776aa1b85}{lif\+\_\+\+Pack\+Dir} (uint8\+\_\+t $\ast$B, \hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$\hyperlink{structDIR}{D\+IR})
\begin{DoxyCompactList}\small\item\em Pack Dire\+Entry\+Type data into bytes. \end{DoxyCompactList}\item 
\hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$ \hyperlink{lifutils_8h_a128879e17fae3e7bb2785ecc35f0e312}{lif\+\_\+\+Un\+Pack\+Dir} (uint8\+\_\+t $\ast$B, \hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$\hyperlink{structDIR}{D\+IR})
\begin{DoxyCompactList}\small\item\em Un\+Pack \hyperlink{structlifdirent__t}{lifdirent\+\_\+t} data from bytes. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{lifutils_8h_a68235d8edc4ac1583e77c90d16a877c8}{lif\+\_\+\+B\+I\+N2\+B\+CD} (uint8\+\_\+t data)
\begin{DoxyCompactList}\small\item\em Convert number $>$= 0 and $<$= 99 to B\+CD. \end{DoxyCompactList}\item 
void \hyperlink{lifutils_8h_af2e35296eec6eba5cb2d5c9964d0b738}{lif\+\_\+time2lif} (uint8\+\_\+t $\ast$bcd, \hyperlink{time_8h_a3346b04b0420b32ccf6b706551b70762}{time\+\_\+t} t)
\begin{DoxyCompactList}\small\item\em U\+N\+IX time to L\+IF time format. \end{DoxyCompactList}\item 
void \hyperlink{lifutils_8h_a1038b27c4593489c48a46e2f140b675a}{lif\+\_\+dir\+\_\+clear} (\hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$\hyperlink{structDIR}{D\+IR})
\begin{DoxyCompactList}\small\item\em Clear main \hyperlink{structlifdir__t}{lifdir\+\_\+t} \hyperlink{structDIR}{D\+IR} structure. \end{DoxyCompactList}\item 
void \hyperlink{lifutils_8h_ac24d806ba3d75f423b1e17e5528fc90e}{lif\+\_\+dirent\+\_\+clear} (\hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$\hyperlink{structDIR}{D\+IR})
\begin{DoxyCompactList}\small\item\em Clear \hyperlink{structlifdirent__t}{lifdirent\+\_\+t} DE structure in \hyperlink{structDIR}{D\+IR}. \end{DoxyCompactList}\item 
void \hyperlink{lifutils_8h_a49a3bb535736ef9c2948a391a03cef4e}{lif\+\_\+vol\+\_\+clear} (\hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$\hyperlink{structDIR}{D\+IR})
\begin{DoxyCompactList}\small\item\em Clear \hyperlink{structlifvol__t}{lifvol\+\_\+t} V structure in \hyperlink{structDIR}{D\+IR}. \end{DoxyCompactList}\item 
void \hyperlink{lifutils_8h_affd7d0933d80fe7f90a9eb6751f21ff2}{lif\+\_\+rewinddir} (\hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$\hyperlink{structDIR}{D\+IR})
\begin{DoxyCompactList}\small\item\em rewind L\+IF directory Modeled after Linux \hyperlink{posix_8c_aaeac2b41e8c2c3a5f91c9bd511a8c0a6}{closedir()} Here we just rewind, there is nothing to unallocate \end{DoxyCompactList}\item 
int \hyperlink{lifutils_8h_a2691478126c4c013b2dff751b6627921}{lif\+\_\+closedir} (\hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$\hyperlink{structDIR}{D\+IR})
\begin{DoxyCompactList}\small\item\em Close L\+IF directory Modeled after Linux \hyperlink{posix_8c_aaeac2b41e8c2c3a5f91c9bd511a8c0a6}{closedir()} Here we just rewind, there is nothing to unallocate. \end{DoxyCompactList}\item 
\hyperlink{posix_8h_aed4dabeb9f7c518ded42f930a04abce8}{F\+I\+LE} $\ast$ \hyperlink{lifutils_8h_afe395b08bb0cfe54ee46529a0181c11e}{lif\+\_\+open} (char $\ast$name, char $\ast$mode)
\begin{DoxyCompactList}\small\item\em Open a file that must exist. \end{DoxyCompactList}\item 
\hyperlink{defines_8h_aebb3d0e746d3aa086e0baa48ad66b964}{stat\+\_\+t} $\ast$ \hyperlink{lifutils_8h_aabcbc42b059eb4dadaab5c63778547f8}{lif\+\_\+stat} (char $\ast$name)
\begin{DoxyCompactList}\small\item\em Stat a file. \end{DoxyCompactList}\item 
long \hyperlink{lifutils_8h_afd91a3610ac5b104097ac0686a56cefd}{lif\+\_\+read} (char $\ast$name, void $\ast$buf, long offset, int bytes)
\begin{DoxyCompactList}\small\item\em Read data from a L\+IF image File is closed after read W\+HY? We want time minimize file open to to avoid corruption on the S\+D\+C\+A\+RD. \end{DoxyCompactList}\item 
int \hyperlink{lifutils_8h_a6be20c8f3213656e828aae93b303d776}{lif\+\_\+write} (char $\ast$name, void $\ast$buf, long offset, int bytes)
\begin{DoxyCompactList}\small\item\em Write data to an L\+IF image File is closed, positioned to the end of file, after write Why? We want time minimize file open to to avoid corruption on the S\+D\+C\+A\+RD. \end{DoxyCompactList}\item 
uint32\+\_\+t \hyperlink{lifutils_8h_a40ed7793b30604930acd8eb211190672}{lif\+\_\+bytes2sectors} (long bytes)
\begin{DoxyCompactList}\small\item\em Convert bytes into used sectors. \end{DoxyCompactList}\item 
\hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$ \hyperlink{lifutils_8h_aeb17f2894ee9e774872d0a4110271f88}{lif\+\_\+opendir} (char $\ast$name, int debug)
\item 
\hyperlink{structlifdirent__t}{lifdirent\+\_\+t} $\ast$ \hyperlink{lifutils_8h_a470203a61f36e84f411fa42e965b731a}{lif\+\_\+readdir} (\hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$\hyperlink{structDIR}{D\+IR})
\begin{DoxyCompactList}\small\item\em Open L\+IF directory for reading Modeled after Linux \hyperlink{posix_8c_a1508fedaef509d2976b43300306d1400}{readdir()} \end{DoxyCompactList}\item 
long \hyperlink{lifutils_8h_a5bde42f25a87ea3db74cf7b379022ddb}{lif\+\_\+writedir} (\hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$\hyperlink{structDIR}{D\+IR})
\begin{DoxyCompactList}\small\item\em Write a director entry Modeled after Linux \hyperlink{posix_8c_a1508fedaef509d2976b43300306d1400}{readdir()} \end{DoxyCompactList}\item 
long \hyperlink{lifutils_8h_a5c10caf1bb5c6d712e11c6a25cf9e1e7}{lif\+\_\+filelength} (\hyperlink{structlifdirent__t}{lifdirent\+\_\+t} $\ast$DE)
\begin{DoxyCompactList}\small\item\em get L\+IF file size from directory entry \end{DoxyCompactList}\item 
\hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$ \hyperlink{lifutils_8h_abe3455762ba54c28015c0395ed723b5c}{lif\+\_\+find\+\_\+free} (\hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$\hyperlink{structDIR}{D\+IR}, uint32\+\_\+t sectors)
\begin{DoxyCompactList}\small\item\em Find offset to first free sector that is big enough Modeled after Linux \hyperlink{posix_8c_a1508fedaef509d2976b43300306d1400}{readdir()} \end{DoxyCompactList}\item 
\hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$ \hyperlink{lifutils_8h_ad1f6f41429bd3f4e3e4fc936827bc6d8}{lif\+\_\+updatefree} (\hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$\hyperlink{structDIR}{D\+IR})
\begin{DoxyCompactList}\small\item\em Find free space. \end{DoxyCompactList}\item 
int \hyperlink{lifutils_8h_aca0a37c5d186a795d821d7c05c87dcc5}{lif\+\_\+dir} (char $\ast$lifimagename)
\begin{DoxyCompactList}\small\item\em Display a L\+IF image file directory. \end{DoxyCompactList}\item 
\hyperlink{structlifdirent__t}{lifdirent\+\_\+t} $\ast$ \hyperlink{lifutils_8h_a6941adbadc0ab52eff803f65cbd8e62f}{lif\+\_\+find\+\_\+file} (\hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$\hyperlink{structDIR}{D\+IR}, char $\ast$username)
\begin{DoxyCompactList}\small\item\em Find a directory entry for a file in a L\+IF image file. \end{DoxyCompactList}\item 
int \hyperlink{lifutils_8h_afe792710b99bc68286a99366963512b5}{lif\+\_\+extract\+\_\+file} (char $\ast$lifimagename, char $\ast$lifname, char $\ast$username)
\begin{DoxyCompactList}\small\item\em Extarct an 0xe010 ascii file from a L\+IF image. \end{DoxyCompactList}\item 
int \hyperlink{lifutils_8h_ae077333ae15ec21e05b9da7f9b77e63a}{lif\+\_\+write\+\_\+pad} (\hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$\hyperlink{structDIR}{D\+IR}, long offset)
\begin{DoxyCompactList}\small\item\em Pad the last sector to the end When \hyperlink{structDIR}{D\+IR} is null we do not write, just compute the write size. \end{DoxyCompactList}\item 
int \hyperlink{lifutils_8h_af9c97ea233d2bbd2265ece4966246543}{lif\+\_\+write\+\_\+string} (\hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$\hyperlink{structDIR}{D\+IR}, long offset, void $\ast$vptr)
\begin{DoxyCompactList}\small\item\em H\+P85 A\+S\+C\+II L\+IF records have a 3 byte header ef \mbox{[}ff\mbox{]}$\ast$ = end of data in this sector (no size) , pad with ff\textquotesingle{}s optionally if there is room df size = string cf size = split accross sector end \char`\"{}6f size\char`\"{} at start of next sector but the 6f size bytes are not included in cf size! (yuck!) 6f size = split continue (always starts at sector boundry) df 00 00 ef \mbox{[}ff\mbox{]}$\ast$ = E\+OF (df size = 0) ef send of sector and optional padding size = 16 bits L\+SB M\+SB. \end{DoxyCompactList}\item 
long \hyperlink{lifutils_8h_a31f61566ccec3e137c93b259d508ea11}{lif\+\_\+ascii2lif} (char $\ast$name, \hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$\hyperlink{structDIR}{D\+IR})
\begin{DoxyCompactList}\small\item\em Convert a user A\+S\+C\+II file into H\+P85 0x\+E010 L\+IF format We must know the convered file size B\+E\+F\+O\+RE writting So we must call this function T\+W\+I\+CE 1) find out how big the converted file is (\hyperlink{structDIR}{D\+IR} is N\+U\+LL) 2) Specify where to put it (\hyperlink{structDIR}{D\+IR} is set) \end{DoxyCompactList}\item 
long \hyperlink{lifutils_8h_acc02f6c04090b6b17f348804f7c45368}{lif\+\_\+add\+\_\+file} (char $\ast$lifimagename, char $\ast$lifname, char $\ast$userfile)
\begin{DoxyCompactList}\small\item\em Add a user file to the L\+IF image The basename of the lifname, without extensions, is used as the L\+IF file name. \end{DoxyCompactList}\item 
long \hyperlink{lifutils_8h_a63bbf2c5f1f68c7a339cbc0dbcfaa255}{lif\+\_\+create\+\_\+image} (char $\ast$lifimagename, char $\ast$liflabel, uint32\+\_\+t dirsecs, uint32\+\_\+t sectors)
\begin{DoxyCompactList}\small\item\em Create/\+Format a L\+IF disk image This can take a while to run, about 1 min for 10,000,000 bytes. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{lifutils_8h_af219299ebad47daa6631415a8b41345a}{debuglevel}
\begin{DoxyCompactList}\small\item\em Debug flag -\/ used to log G\+P\+IB and emulator messages. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\index{lifutils.\+h@{lifutils.\+h}!L\+I\+F\+\_\+\+C\+H\+U\+N\+K\+\_\+\+S\+I\+ZE@{L\+I\+F\+\_\+\+C\+H\+U\+N\+K\+\_\+\+S\+I\+ZE}}
\index{L\+I\+F\+\_\+\+C\+H\+U\+N\+K\+\_\+\+S\+I\+ZE@{L\+I\+F\+\_\+\+C\+H\+U\+N\+K\+\_\+\+S\+I\+ZE}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{L\+I\+F\+\_\+\+C\+H\+U\+N\+K\+\_\+\+S\+I\+ZE}{LIF_CHUNK_SIZE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\+I\+F\+\_\+\+C\+H\+U\+N\+K\+\_\+\+S\+I\+ZE~({\bf L\+I\+F\+\_\+\+S\+E\+C\+T\+O\+R\+\_\+\+S\+I\+ZE}$\ast${\bf L\+I\+F\+\_\+\+C\+H\+U\+N\+KS})}\hypertarget{lifutils_8h_a625b7a543a55b48e28ea93fbb61595eb}{}\label{lifutils_8h_a625b7a543a55b48e28ea93fbb61595eb}


Definition at line 31 of file lifutils.\+h.

\index{lifutils.\+h@{lifutils.\+h}!L\+I\+F\+\_\+\+C\+H\+U\+N\+KS@{L\+I\+F\+\_\+\+C\+H\+U\+N\+KS}}
\index{L\+I\+F\+\_\+\+C\+H\+U\+N\+KS@{L\+I\+F\+\_\+\+C\+H\+U\+N\+KS}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{L\+I\+F\+\_\+\+C\+H\+U\+N\+KS}{LIF_CHUNKS}}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\+I\+F\+\_\+\+C\+H\+U\+N\+KS~16}\hypertarget{lifutils_8h_a7e7f4ebd8f31cd7f9dcb0e9758ef8f44}{}\label{lifutils_8h_a7e7f4ebd8f31cd7f9dcb0e9758ef8f44}


used for formatting 

When formatting a disk define how many sectors we can write at once 

Definition at line 30 of file lifutils.\+h.

\index{lifutils.\+h@{lifutils.\+h}!L\+I\+F\+\_\+\+D\+I\+R\+\_\+\+S\+I\+ZE@{L\+I\+F\+\_\+\+D\+I\+R\+\_\+\+S\+I\+ZE}}
\index{L\+I\+F\+\_\+\+D\+I\+R\+\_\+\+S\+I\+ZE@{L\+I\+F\+\_\+\+D\+I\+R\+\_\+\+S\+I\+ZE}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{L\+I\+F\+\_\+\+D\+I\+R\+\_\+\+S\+I\+ZE}{LIF_DIR_SIZE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\+I\+F\+\_\+\+D\+I\+R\+\_\+\+S\+I\+ZE~32}\hypertarget{lifutils_8h_a99ad70dd3200a3ee46388bc2c36fe720}{}\label{lifutils_8h_a99ad70dd3200a3ee46388bc2c36fe720}


L\+IF directory entry size. 



Definition at line 34 of file lifutils.\+h.



Referenced by lif\+\_\+create\+\_\+image(), lif\+\_\+readdir(), and lif\+\_\+writedir().

\index{lifutils.\+h@{lifutils.\+h}!L\+I\+F\+\_\+\+I\+M\+A\+G\+E\+\_\+\+N\+A\+M\+E\+\_\+\+S\+I\+ZE@{L\+I\+F\+\_\+\+I\+M\+A\+G\+E\+\_\+\+N\+A\+M\+E\+\_\+\+S\+I\+ZE}}
\index{L\+I\+F\+\_\+\+I\+M\+A\+G\+E\+\_\+\+N\+A\+M\+E\+\_\+\+S\+I\+ZE@{L\+I\+F\+\_\+\+I\+M\+A\+G\+E\+\_\+\+N\+A\+M\+E\+\_\+\+S\+I\+ZE}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{L\+I\+F\+\_\+\+I\+M\+A\+G\+E\+\_\+\+N\+A\+M\+E\+\_\+\+S\+I\+ZE}{LIF_IMAGE_NAME_SIZE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\+I\+F\+\_\+\+I\+M\+A\+G\+E\+\_\+\+N\+A\+M\+E\+\_\+\+S\+I\+ZE~64}\hypertarget{lifutils_8h_a8cfa79b094fc3a5db37b26761a639e6d}{}\label{lifutils_8h_a8cfa79b094fc3a5db37b26761a639e6d}


size of image file name size used by lif\+\_\+format() 



Definition at line 36 of file lifutils.\+h.



Referenced by lif\+\_\+opendir().

\index{lifutils.\+h@{lifutils.\+h}!L\+I\+F\+\_\+\+S\+E\+C\+T\+O\+R\+\_\+\+S\+I\+ZE@{L\+I\+F\+\_\+\+S\+E\+C\+T\+O\+R\+\_\+\+S\+I\+ZE}}
\index{L\+I\+F\+\_\+\+S\+E\+C\+T\+O\+R\+\_\+\+S\+I\+ZE@{L\+I\+F\+\_\+\+S\+E\+C\+T\+O\+R\+\_\+\+S\+I\+ZE}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{L\+I\+F\+\_\+\+S\+E\+C\+T\+O\+R\+\_\+\+S\+I\+ZE}{LIF_SECTOR_SIZE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\+I\+F\+\_\+\+S\+E\+C\+T\+O\+R\+\_\+\+S\+I\+ZE~256}\hypertarget{lifutils_8h_a9f32d2537f4daba6a314185cf52b7e56}{}\label{lifutils_8h_a9f32d2537f4daba6a314185cf52b7e56}


Depends on how much free ram we have. 



Definition at line 26 of file lifutils.\+h.



Referenced by lif\+\_\+ascii2lif(), lif\+\_\+bytes2sectors(), lif\+\_\+create\+\_\+image(), lif\+\_\+extract\+\_\+file(), lif\+\_\+filelength(), lif\+\_\+opendir(), lif\+\_\+readdir(), lif\+\_\+write\+\_\+pad(), and lif\+\_\+writedir().



\subsection{Typedef Documentation}
\index{lifutils.\+h@{lifutils.\+h}!stat\+\_\+t@{stat\+\_\+t}}
\index{stat\+\_\+t@{stat\+\_\+t}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{stat\+\_\+t}{stat_t}}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf stat} {\bf stat\+\_\+t}}\hypertarget{lifutils_8h_aebb3d0e746d3aa086e0baa48ad66b964}{}\label{lifutils_8h_aebb3d0e746d3aa086e0baa48ad66b964}


Definition at line 23 of file lifutils.\+h.



\subsection{Function Documentation}
\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+add\+\_\+file@{lif\+\_\+add\+\_\+file}}
\index{lif\+\_\+add\+\_\+file@{lif\+\_\+add\+\_\+file}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+add\+\_\+file(char $\ast$lifimagename, char $\ast$lifname, char $\ast$userfile)}{lif_add_file(char *lifimagename, char *lifname, char *userfile)}}]{\setlength{\rightskip}{0pt plus 5cm}long lif\+\_\+add\+\_\+file (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{lifimagename, }
\item[{char $\ast$}]{lifname, }
\item[{char $\ast$}]{userfile}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_acc02f6c04090b6b17f348804f7c45368}{}\label{lifutils_8h_acc02f6c04090b6b17f348804f7c45368}


Add a user file to the L\+IF image The basename of the lifname, without extensions, is used as the L\+IF file name. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em lifimagename} & L\+IF image name \\
\hline
\mbox{\tt in}  & {\em lifname} & L\+IF file name \\
\hline
\mbox{\tt in}  & {\em userfile} & userfile name \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size of data written into to L\+IF image, or -\/1 on error 
\end{DoxyReturn}


Definition at line 1270 of file lifutils.\+c.



Referenced by lif\+\_\+tests().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+ascii2lif@{lif\+\_\+ascii2lif}}
\index{lif\+\_\+ascii2lif@{lif\+\_\+ascii2lif}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+ascii2lif(char $\ast$name, lifdir\+\_\+t $\ast$\+D\+I\+R)}{lif_ascii2lif(char *name, lifdir_t *DIR)}}]{\setlength{\rightskip}{0pt plus 5cm}long lif\+\_\+ascii2lif (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{name, }
\item[{{\bf lifdir\+\_\+t} $\ast$}]{D\+IR}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a31f61566ccec3e137c93b259d508ea11}{}\label{lifutils_8h_a31f61566ccec3e137c93b259d508ea11}


Convert a user A\+S\+C\+II file into H\+P85 0x\+E010 L\+IF format We must know the convered file size B\+E\+F\+O\+RE writting So we must call this function T\+W\+I\+CE 1) find out how big the converted file is (\hyperlink{structDIR}{D\+IR} is N\+U\+LL) 2) Specify where to put it (\hyperlink{structDIR}{D\+IR} is set) 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em userfile} & User A\+S\+C\+II file source \\
\hline
\mbox{\tt in}  & {\em $\ast$\+D\+IR} & Where to write file if set (not N\+U\+LL) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size of L\+IF image in bytes, or -\/1 on error 
\end{DoxyReturn}


Definition at line 1183 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+file().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+\+B2S@{lif\+\_\+\+B2S}}
\index{lif\+\_\+\+B2S@{lif\+\_\+\+B2S}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+\+B2\+S(uint8\+\_\+t $\ast$\+B, uint8\+\_\+t $\ast$name, int size)}{lif_B2S(uint8_t *B, uint8_t *name, int size)}}]{\setlength{\rightskip}{0pt plus 5cm}int lif\+\_\+\+B2S (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{B, }
\item[{uint8\+\_\+t $\ast$}]{name, }
\item[{int}]{size}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a6ef03363b9241a81bdd36c868ec93190}{}\label{lifutils_8h_a6ef03363b9241a81bdd36c868ec93190}


Convert L\+IF space padded string name into normal string. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$B} & L\+IF name space padded \\
\hline
\mbox{\tt out}  & {\em $\ast$name} & string result with traling spaces removed  1 if string i ok or 0 if bad characters were found \\
\hline
\end{DoxyParams}


Definition at line 155 of file lifutils.\+c.



Referenced by lif\+\_\+\+Un\+Pack\+Dir(), and lif\+\_\+\+Un\+Pack\+Volume().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+\+B\+I\+N2\+B\+CD@{lif\+\_\+\+B\+I\+N2\+B\+CD}}
\index{lif\+\_\+\+B\+I\+N2\+B\+CD@{lif\+\_\+\+B\+I\+N2\+B\+CD}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+\+B\+I\+N2\+B\+C\+D(uint8\+\_\+t data)}{lif_BIN2BCD(uint8_t data)}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t lif\+\_\+\+B\+I\+N2\+B\+CD (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{data}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a68235d8edc4ac1583e77c90d16a877c8}{}\label{lifutils_8h_a68235d8edc4ac1583e77c90d16a877c8}


Convert number $>$= 0 and $<$= 99 to B\+CD. 


\begin{DoxyItemize}
\item B\+CD format has each hex nibble has a digit 0 .. 9
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em data} & number to convert. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
B\+CD value 
\end{DoxyReturn}
\begin{DoxyWarning}{Warning}
we assume the number is in range. 
\end{DoxyWarning}


Definition at line 379 of file lifutils.\+c.



Referenced by lif\+\_\+time2lif().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+bytes2sectors@{lif\+\_\+bytes2sectors}}
\index{lif\+\_\+bytes2sectors@{lif\+\_\+bytes2sectors}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+bytes2sectors(long bytes)}{lif_bytes2sectors(long bytes)}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t lif\+\_\+bytes2sectors (
\begin{DoxyParamCaption}
\item[{long}]{bytes}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a40ed7793b30604930acd8eb211190672}{}\label{lifutils_8h_a40ed7793b30604930acd8eb211190672}


Convert bytes into used sectors. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em bytes} & size in bytes \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
sectors 
\end{DoxyReturn}


Definition at line 581 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+file(), lif\+\_\+extract\+\_\+file(), and lif\+\_\+opendir().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+chars@{lif\+\_\+chars}}
\index{lif\+\_\+chars@{lif\+\_\+chars}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+chars(int c, int index)}{lif_chars(int c, int index)}}]{\setlength{\rightskip}{0pt plus 5cm}int lif\+\_\+chars (
\begin{DoxyParamCaption}
\item[{int}]{c, }
\item[{int}]{index}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a390b6787d7428e6c8492013b8c982fd9}{}\label{lifutils_8h_a390b6787d7428e6c8492013b8c982fd9}


Check if characters in a volume of file name are valid. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em c} & character to test \\
\hline
\mbox{\tt in}  & {\em index} & index of character in volume or file name  c (optionally upper cased) or 0 if no match \\
\hline
\end{DoxyParams}


Definition at line 136 of file lifutils.\+c.



Referenced by lif\+\_\+\+B2\+S(), lif\+\_\+checkname(), and lif\+\_\+fixname().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+checkname@{lif\+\_\+checkname}}
\index{lif\+\_\+checkname@{lif\+\_\+checkname}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+checkname(char $\ast$name)}{lif_checkname(char *name)}}]{\setlength{\rightskip}{0pt plus 5cm}int lif\+\_\+checkname (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{name}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a87df4549ffaf99f198cc8aa40923d1e8}{}\label{lifutils_8h_a87df4549ffaf99f198cc8aa40923d1e8}


Check that a IF volume name of directory name is valid. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$name} & name to test  1 if the string is ok or 0 if invalid L\+IF name characters on input string \\
\hline
\end{DoxyParams}


Definition at line 174 of file lifutils.\+c.



Referenced by lif\+\_\+\+Validate\+Volume().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+closedir@{lif\+\_\+closedir}}
\index{lif\+\_\+closedir@{lif\+\_\+closedir}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+closedir(lifdir\+\_\+t $\ast$\+D\+I\+R)}{lif_closedir(lifdir_t *DIR)}}]{\setlength{\rightskip}{0pt plus 5cm}int lif\+\_\+closedir (
\begin{DoxyParamCaption}
\item[{{\bf lifdir\+\_\+t} $\ast$}]{D\+IR}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a2691478126c4c013b2dff751b6627921}{}\label{lifutils_8h_a2691478126c4c013b2dff751b6627921}


Close L\+IF directory Modeled after Linux \hyperlink{posix_8c_aaeac2b41e8c2c3a5f91c9bd511a8c0a6}{closedir()} Here we just rewind, there is nothing to unallocate. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+D\+IR} & pointer to L\+IF Volume/\+Directoy structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on sucesss, -\/1 on error 
\end{DoxyReturn}


Definition at line 446 of file lifutils.\+c.



Referenced by lif\+\_\+dir().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+create\+\_\+image@{lif\+\_\+create\+\_\+image}}
\index{lif\+\_\+create\+\_\+image@{lif\+\_\+create\+\_\+image}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+create\+\_\+image(char $\ast$lifimagename, char $\ast$liflabel, uint32\+\_\+t dirsecs, uint32\+\_\+t sectors)}{lif_create_image(char *lifimagename, char *liflabel, uint32_t dirsecs, uint32_t sectors)}}]{\setlength{\rightskip}{0pt plus 5cm}long lif\+\_\+create\+\_\+image (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{lifimagename, }
\item[{char $\ast$}]{liflabel, }
\item[{uint32\+\_\+t}]{dirsecs, }
\item[{uint32\+\_\+t}]{sectors}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a63bbf2c5f1f68c7a339cbc0dbcfaa255}{}\label{lifutils_8h_a63bbf2c5f1f68c7a339cbc0dbcfaa255}


Create/\+Format a L\+IF disk image This can take a while to run, about 1 min for 10,000,000 bytes. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em lifimagename} & L\+IF disk image name \\
\hline
\mbox{\tt in}  & {\em liflabel} & L\+IF Volume Label name \\
\hline
\mbox{\tt in}  & {\em dirsecs} & Number of L\+IF directory sectors \\
\hline
\mbox{\tt in}  & {\em sectors} & total disk image size in sectors \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bytes writting to disk image 
\end{DoxyReturn}
Current Date

Open L\+IF disk image for writting

Initial file position

File type of 0xffff is last directory entry

F\+I\+X\+ME this is the default that the H\+Pdrive project uses, not sure of this

Zero out remining disk image 

Definition at line 1369 of file lifutils.\+c.



Referenced by format\+\_\+drives(), and lif\+\_\+tests().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+dir@{lif\+\_\+dir}}
\index{lif\+\_\+dir@{lif\+\_\+dir}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+dir(char $\ast$lifimagename)}{lif_dir(char *lifimagename)}}]{\setlength{\rightskip}{0pt plus 5cm}int lif\+\_\+dir (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{lifimagename}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_aca0a37c5d186a795d821d7c05c87dcc5}{}\label{lifutils_8h_aca0a37c5d186a795d821d7c05c87dcc5}


Display a L\+IF image file directory. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em lifimagename} & L\+IF disk image name \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/1 on error or number of files found 
\end{DoxyReturn}


Definition at line 777 of file lifutils.\+c.



Referenced by lif\+\_\+tests().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+dir\+\_\+clear@{lif\+\_\+dir\+\_\+clear}}
\index{lif\+\_\+dir\+\_\+clear@{lif\+\_\+dir\+\_\+clear}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+dir\+\_\+clear(lifdir\+\_\+t $\ast$\+D\+I\+R)}{lif_dir_clear(lifdir_t *DIR)}}]{\setlength{\rightskip}{0pt plus 5cm}void lif\+\_\+dir\+\_\+clear (
\begin{DoxyParamCaption}
\item[{{\bf lifdir\+\_\+t} $\ast$}]{D\+IR}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a1038b27c4593489c48a46e2f140b675a}{}\label{lifutils_8h_a1038b27c4593489c48a46e2f140b675a}


Clear main \hyperlink{structlifdir__t}{lifdir\+\_\+t} \hyperlink{structDIR}{D\+IR} structure. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+D\+IR} & pointer to \hyperlink{structDIR}{D\+IR} structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 406 of file lifutils.\+c.



Referenced by lif\+\_\+opendir().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+dirent\+\_\+clear@{lif\+\_\+dirent\+\_\+clear}}
\index{lif\+\_\+dirent\+\_\+clear@{lif\+\_\+dirent\+\_\+clear}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+dirent\+\_\+clear(lifdir\+\_\+t $\ast$\+D\+I\+R)}{lif_dirent_clear(lifdir_t *DIR)}}]{\setlength{\rightskip}{0pt plus 5cm}void lif\+\_\+dirent\+\_\+clear (
\begin{DoxyParamCaption}
\item[{{\bf lifdir\+\_\+t} $\ast$}]{D\+IR}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_ac24d806ba3d75f423b1e17e5528fc90e}{}\label{lifutils_8h_ac24d806ba3d75f423b1e17e5528fc90e}


Clear \hyperlink{structlifdirent__t}{lifdirent\+\_\+t} DE structure in \hyperlink{structDIR}{D\+IR}. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+D\+IR} & pointer to \hyperlink{structDIR}{D\+IR} structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 415 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+image().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+extract\+\_\+file@{lif\+\_\+extract\+\_\+file}}
\index{lif\+\_\+extract\+\_\+file@{lif\+\_\+extract\+\_\+file}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+extract\+\_\+file(char $\ast$lifimagename, char $\ast$lifname, char $\ast$username)}{lif_extract_file(char *lifimagename, char *lifname, char *username)}}]{\setlength{\rightskip}{0pt plus 5cm}int lif\+\_\+extract\+\_\+file (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{lifimagename, }
\item[{char $\ast$}]{lifname, }
\item[{char $\ast$}]{username}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_afe792710b99bc68286a99366963512b5}{}\label{lifutils_8h_afe792710b99bc68286a99366963512b5}


Extarct an 0xe010 ascii file from a L\+IF image. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em lifimagename} & L\+IF disk image name \\
\hline
\mbox{\tt in}  & {\em lifname} & name of file in L\+IF image \\
\hline
\mbox{\tt in}  & {\em username} & name to call the extracted image \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/1 on error or number of files found 
\end{DoxyReturn}


Definition at line 854 of file lifutils.\+c.



Referenced by lif\+\_\+tests().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+filelength@{lif\+\_\+filelength}}
\index{lif\+\_\+filelength@{lif\+\_\+filelength}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+filelength(lifdirent\+\_\+t $\ast$\+D\+E)}{lif_filelength(lifdirent_t *DE)}}]{\setlength{\rightskip}{0pt plus 5cm}long lif\+\_\+filelength (
\begin{DoxyParamCaption}
\item[{{\bf lifdirent\+\_\+t} $\ast$}]{DE}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a5c10caf1bb5c6d712e11c6a25cf9e1e7}{}\label{lifutils_8h_a5c10caf1bb5c6d712e11c6a25cf9e1e7}


get L\+IF file size from directory entry 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em name} & L\+IF disk image name \\
\hline
\mbox{\tt in}  & {\em DE} & L\+IF directory entry  void \\
\hline
\end{DoxyParams}


Definition at line 708 of file lifutils.\+c.



Referenced by lif\+\_\+dir().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+find\+\_\+file@{lif\+\_\+find\+\_\+file}}
\index{lif\+\_\+find\+\_\+file@{lif\+\_\+find\+\_\+file}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+find\+\_\+file(lifdir\+\_\+t $\ast$\+D\+I\+R, char $\ast$username)}{lif_find_file(lifdir_t *DIR, char *username)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lifdirent\+\_\+t}$\ast$ lif\+\_\+find\+\_\+file (
\begin{DoxyParamCaption}
\item[{{\bf lifdir\+\_\+t} $\ast$}]{D\+IR, }
\item[{char $\ast$}]{username}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a6941adbadc0ab52eff803f65cbd8e62f}{}\label{lifutils_8h_a6941adbadc0ab52eff803f65cbd8e62f}


Find a directory entry for a file in a L\+IF image file. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+D\+IR} & directory pointer \\
\hline
\mbox{\tt in}  & {\em username} & File name in L\+IF image \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{structlifdirent__t}{lifdirent\+\_\+t} $\ast$ directory entry, or N\+U\+LL if no match 
\end{DoxyReturn}


Definition at line 828 of file lifutils.\+c.



Referenced by lif\+\_\+extract\+\_\+file().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+find\+\_\+free@{lif\+\_\+find\+\_\+free}}
\index{lif\+\_\+find\+\_\+free@{lif\+\_\+find\+\_\+free}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+find\+\_\+free(lifdir\+\_\+t $\ast$\+D\+I\+R, uint32\+\_\+t sectors)}{lif_find_free(lifdir_t *DIR, uint32_t sectors)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lifdir\+\_\+t}$\ast$ lif\+\_\+find\+\_\+free (
\begin{DoxyParamCaption}
\item[{{\bf lifdir\+\_\+t} $\ast$}]{D\+IR, }
\item[{uint32\+\_\+t}]{sectors}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_abe3455762ba54c28015c0395ed723b5c}{}\label{lifutils_8h_abe3455762ba54c28015c0395ed723b5c}


Find offset to first free sector that is big enough Modeled after Linux \hyperlink{posix_8c_a1508fedaef509d2976b43300306d1400}{readdir()} 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+D\+IR} & \hyperlink{structDIR}{D\+IR} pointer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Directory pointer 
\end{DoxyReturn}


Definition at line 722 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+file().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+fixname@{lif\+\_\+fixname}}
\index{lif\+\_\+fixname@{lif\+\_\+fixname}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+fixname(uint8\+\_\+t $\ast$\+B, char $\ast$name, int size)}{lif_fixname(uint8_t *B, char *name, int size)}}]{\setlength{\rightskip}{0pt plus 5cm}int lif\+\_\+fixname (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{B, }
\item[{char $\ast$}]{name, }
\item[{int}]{size}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a4526efb5e3517ff7bb83e6ac08e4c6b6}{}\label{lifutils_8h_a4526efb5e3517ff7bb83e6ac08e4c6b6}


Convert a file name (unix/fat32) format into a valid L\+IF name Only use the \hyperlink{posix_8c_a4d3dfaf2f5a63e2e4eaa128477a9b5e7}{basename()} part of the string and remove any file name extentions L\+IF names may have only these characters\+: \mbox{[}A-\/Z\mbox{]}\mbox{[}A-\/\+Z0-\/09\+\_\+\mbox{]}+ L\+IF names are converted to upper case L\+IF names are padded at the end with spaces Any invalid input characters are converted into spaces. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em $\ast$B} & output L\+IF string \\
\hline
\mbox{\tt in}  & {\em $\ast$name} & input string \\
\hline
\mbox{\tt in}  & {\em size} & maximum size of output string \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
length of result 
\end{DoxyReturn}


Definition at line 212 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+file(), and lif\+\_\+create\+\_\+image().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+help@{lif\+\_\+help}}
\index{lif\+\_\+help@{lif\+\_\+help}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+help(void)}{lif_help(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void lif\+\_\+help (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_adcd52baa64a03567d69ce3579e3f66ea}{}\label{lifutils_8h_adcd52baa64a03567d69ce3579e3f66ea}


Help Menu for User invoked G\+P\+IB functions and tasks See\+: int \hyperlink{gpib__tests_8h_aed0c6a0a794f33d5cf7691c96d3e4955}{gpib\+\_\+tests(char $\ast$str)} 

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 26 of file lifutils.\+c.



Referenced by help().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+open@{lif\+\_\+open}}
\index{lif\+\_\+open@{lif\+\_\+open}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+open(char $\ast$name, char $\ast$mode)}{lif_open(char *name, char *mode)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf F\+I\+LE}$\ast$ lif\+\_\+open (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{name, }
\item[{char $\ast$}]{mode}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_afe395b08bb0cfe54ee46529a0181c11e}{}\label{lifutils_8h_afe395b08bb0cfe54ee46529a0181c11e}


Open a file that must exist. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$name} & file name of L\+IF image \\
\hline
\mbox{\tt in}  & {\em $\ast$mode} & open mode -\/ see fopen \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
F\+I\+LE $\ast$ pointer 
\end{DoxyReturn}


Definition at line 460 of file lifutils.\+c.



Referenced by lif\+\_\+ascii2lif(), lif\+\_\+extract\+\_\+file(), lif\+\_\+read(), and lif\+\_\+write().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+opendir@{lif\+\_\+opendir}}
\index{lif\+\_\+opendir@{lif\+\_\+opendir}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+opendir(char $\ast$name, int debug)}{lif_opendir(char *name, int debug)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lifdir\+\_\+t}$\ast$ lif\+\_\+opendir (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{name, }
\item[{int}]{debug}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_aeb17f2894ee9e774872d0a4110271f88}{}\label{lifutils_8h_aeb17f2894ee9e774872d0a4110271f88}


Definition at line 595 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+file(), lif\+\_\+dir(), and lif\+\_\+extract\+\_\+file().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+\+Pack\+Dir@{lif\+\_\+\+Pack\+Dir}}
\index{lif\+\_\+\+Pack\+Dir@{lif\+\_\+\+Pack\+Dir}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+\+Pack\+Dir(uint8\+\_\+t $\ast$\+B, lifdir\+\_\+t $\ast$\+D\+I\+R)}{lif_PackDir(uint8_t *B, lifdir_t *DIR)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lifdir\+\_\+t}$\ast$ lif\+\_\+\+Pack\+Dir (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{B, }
\item[{{\bf lifdir\+\_\+t} $\ast$}]{D\+IR}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a6a866bf201f0e1608653a22776aa1b85}{}\label{lifutils_8h_a6a866bf201f0e1608653a22776aa1b85}


Pack Dire\+Entry\+Type data into bytes. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em B} & byte vector to pack data into \\
\hline
 & {\em } & \\
\hline
\end{DoxyParams}


Definition at line 342 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+image(), and lif\+\_\+writedir().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+\+Pack\+Volume@{lif\+\_\+\+Pack\+Volume}}
\index{lif\+\_\+\+Pack\+Volume@{lif\+\_\+\+Pack\+Volume}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+\+Pack\+Volume(uint8\+\_\+t $\ast$\+B, lifvol\+\_\+t $\ast$\+V)}{lif_PackVolume(uint8_t *B, lifvol_t *V)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lifvol\+\_\+t}$\ast$ lif\+\_\+\+Pack\+Volume (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{B, }
\item[{{\bf lifvol\+\_\+t} $\ast$}]{V}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_aa510ba1ba6da0fdde01e0d123d368802}{}\label{lifutils_8h_aa510ba1ba6da0fdde01e0d123d368802}


Pack \hyperlink{structlifvol__t}{lifvol\+\_\+t} data into bytes. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em B} & byte vector to pack data into \\
\hline
 & {\em } & \\
\hline
\end{DoxyParams}


Definition at line 247 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+image().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+read@{lif\+\_\+read}}
\index{lif\+\_\+read@{lif\+\_\+read}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+read(char $\ast$name, void $\ast$buf, long offset, int bytes)}{lif_read(char *name, void *buf, long offset, int bytes)}}]{\setlength{\rightskip}{0pt plus 5cm}long lif\+\_\+read (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{name, }
\item[{void $\ast$}]{buf, }
\item[{long}]{offset, }
\item[{int}]{bytes}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_afd91a3610ac5b104097ac0686a56cefd}{}\label{lifutils_8h_afd91a3610ac5b104097ac0686a56cefd}


Read data from a L\+IF image File is closed after read W\+HY? We want time minimize file open to to avoid corruption on the S\+D\+C\+A\+RD. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$name} & file name of L\+IF image \\
\hline
\mbox{\tt in}  & {\em $\ast$buf} & read buffer \\
\hline
\mbox{\tt in}  & {\em offset} & read offset \\
\hline
\mbox{\tt in}  & {\em bytes} & number of bytes to read \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
number of bytes read -\/ OR -\/ -\/1 on error 
\end{DoxyReturn}
Initial file position 

Definition at line 498 of file lifutils.\+c.



Referenced by lif\+\_\+extract\+\_\+file(), lif\+\_\+opendir(), and lif\+\_\+readdir().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+readdir@{lif\+\_\+readdir}}
\index{lif\+\_\+readdir@{lif\+\_\+readdir}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+readdir(lifdir\+\_\+t $\ast$\+D\+I\+R)}{lif_readdir(lifdir_t *DIR)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lifdirent\+\_\+t}$\ast$ lif\+\_\+readdir (
\begin{DoxyParamCaption}
\item[{{\bf lifdir\+\_\+t} $\ast$}]{D\+IR}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a470203a61f36e84f411fa42e965b731a}{}\label{lifutils_8h_a470203a61f36e84f411fa42e965b731a}


Open L\+IF directory for reading Modeled after Linux \hyperlink{posix_8c_a1508fedaef509d2976b43300306d1400}{readdir()} 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+D\+IR} & to L\+IF Volume/\+Diractoy structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{structlifdirent__t}{lifdirent\+\_\+t} filled with directory structure, or N\+U\+LL on error of end of Directory 
\end{DoxyReturn}


Definition at line 639 of file lifutils.\+c.



Referenced by lif\+\_\+dir(), lif\+\_\+find\+\_\+file(), lif\+\_\+find\+\_\+free(), and lif\+\_\+updatefree().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+rewinddir@{lif\+\_\+rewinddir}}
\index{lif\+\_\+rewinddir@{lif\+\_\+rewinddir}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+rewinddir(lifdir\+\_\+t $\ast$\+D\+I\+R)}{lif_rewinddir(lifdir_t *DIR)}}]{\setlength{\rightskip}{0pt plus 5cm}void lif\+\_\+rewinddir (
\begin{DoxyParamCaption}
\item[{{\bf lifdir\+\_\+t} $\ast$}]{D\+IR}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_affd7d0933d80fe7f90a9eb6751f21ff2}{}\label{lifutils_8h_affd7d0933d80fe7f90a9eb6751f21ff2}


rewind L\+IF directory Modeled after Linux \hyperlink{posix_8c_aaeac2b41e8c2c3a5f91c9bd511a8c0a6}{closedir()} Here we just rewind, there is nothing to unallocate 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+D\+IR} & pointer to L\+IF Volume/\+Directoy structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on sucesss, -\/1 on error 
\end{DoxyReturn}


Definition at line 432 of file lifutils.\+c.



Referenced by lif\+\_\+closedir(), lif\+\_\+find\+\_\+file(), lif\+\_\+find\+\_\+free(), and lif\+\_\+updatefree().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+\+S2B@{lif\+\_\+\+S2B}}
\index{lif\+\_\+\+S2B@{lif\+\_\+\+S2B}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+\+S2\+B(uint8\+\_\+t $\ast$\+B, uint8\+\_\+t $\ast$name, int size)}{lif_S2B(uint8_t *B, uint8_t *name, int size)}}]{\setlength{\rightskip}{0pt plus 5cm}void lif\+\_\+\+S2B (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{B, }
\item[{uint8\+\_\+t $\ast$}]{name, }
\item[{int}]{size}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a3581f407fe6c5cbe6a5db361fe49d387}{}\label{lifutils_8h_a3581f407fe6c5cbe6a5db361fe49d387}


string to L\+IF directory entry 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em $\ast$B} & L\+IF result with added trailing spaces \\
\hline
\mbox{\tt in}  & {\em $\ast$name} & string  1 if the string is ok or 0 if invalid L\+IF name characters on input string \\
\hline
\end{DoxyParams}


Definition at line 190 of file lifutils.\+c.



Referenced by lif\+\_\+\+Pack\+Dir(), and lif\+\_\+\+Pack\+Volume().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+stat@{lif\+\_\+stat}}
\index{lif\+\_\+stat@{lif\+\_\+stat}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+stat(char $\ast$name)}{lif_stat(char *name)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf stat\+\_\+t}$\ast$ lif\+\_\+stat (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{name}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_aabcbc42b059eb4dadaab5c63778547f8}{}\label{lifutils_8h_aabcbc42b059eb4dadaab5c63778547f8}


Stat a file. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$name} & file name of L\+IF image \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
struct stat $\ast$ 
\end{DoxyReturn}


Definition at line 474 of file lifutils.\+c.



Referenced by lif\+\_\+opendir().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+tests@{lif\+\_\+tests}}
\index{lif\+\_\+tests@{lif\+\_\+tests}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+tests(char $\ast$str)}{lif_tests(char *str)}}]{\setlength{\rightskip}{0pt plus 5cm}int lif\+\_\+tests (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{str}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a32dc220253a6108ad1d2f6b06318d326}{}\label{lifutils_8h_a32dc220253a6108ad1d2f6b06318d326}


L\+I\+F\+Guser tests. 

\begin{DoxyReturn}{Returns}
1 matched token, 0 if not 
\end{DoxyReturn}
format L\+IF image 

Definition at line 38 of file lifutils.\+c.



Referenced by task().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+time2lif@{lif\+\_\+time2lif}}
\index{lif\+\_\+time2lif@{lif\+\_\+time2lif}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+time2lif(uint8\+\_\+t $\ast$bcd, time\+\_\+t t)}{lif_time2lif(uint8_t *bcd, time_t t)}}]{\setlength{\rightskip}{0pt plus 5cm}void lif\+\_\+time2lif (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{bcd, }
\item[{{\bf time\+\_\+t}}]{t}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_af2e35296eec6eba5cb2d5c9964d0b738}{}\label{lifutils_8h_af2e35296eec6eba5cb2d5c9964d0b738}


U\+N\+IX time to L\+IF time format. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em bcd} & packed 6 byte B\+CD L\+IF time YY,MM,DD,HH,MM,SS \\
\hline
\mbox{\tt in}  & {\em t} & U\+N\+IX time\+\_\+t time value \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\hyperlink{time_8c_a32b1cbd925752f0cd61d202bbe204a69}{time()} in \hyperlink{time_8c}{time.\+c} 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 391 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+image().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+\+Un\+Pack\+Dir@{lif\+\_\+\+Un\+Pack\+Dir}}
\index{lif\+\_\+\+Un\+Pack\+Dir@{lif\+\_\+\+Un\+Pack\+Dir}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+\+Un\+Pack\+Dir(uint8\+\_\+t $\ast$\+B, lifdir\+\_\+t $\ast$\+D\+I\+R)}{lif_UnPackDir(uint8_t *B, lifdir_t *DIR)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lifdir\+\_\+t}$\ast$ lif\+\_\+\+Un\+Pack\+Dir (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{B, }
\item[{{\bf lifdir\+\_\+t} $\ast$}]{D\+IR}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a128879e17fae3e7bb2785ecc35f0e312}{}\label{lifutils_8h_a128879e17fae3e7bb2785ecc35f0e312}


Un\+Pack \hyperlink{structlifdirent__t}{lifdirent\+\_\+t} data from bytes. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em B} & byte vector to extract data from \\
\hline
 & {\em } & \\
\hline
\end{DoxyParams}


Definition at line 359 of file lifutils.\+c.



Referenced by lif\+\_\+readdir().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+\+Un\+Pack\+Volume@{lif\+\_\+\+Un\+Pack\+Volume}}
\index{lif\+\_\+\+Un\+Pack\+Volume@{lif\+\_\+\+Un\+Pack\+Volume}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+\+Un\+Pack\+Volume(uint8\+\_\+t $\ast$\+B, lifvol\+\_\+t $\ast$\+V)}{lif_UnPackVolume(uint8_t *B, lifvol_t *V)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lifvol\+\_\+t}$\ast$ lif\+\_\+\+Un\+Pack\+Volume (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{B, }
\item[{{\bf lifvol\+\_\+t} $\ast$}]{V}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a2691a261adb3a6a8b491bdef501f90a8}{}\label{lifutils_8h_a2691a261adb3a6a8b491bdef501f90a8}


Un\+Pack \hyperlink{structlifvol__t}{lifvol\+\_\+t} data from bytes. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em B} & byte vector to pack data into \\
\hline
\mbox{\tt out}  & {\em V} & \hyperlink{structlifvol__t}{lifvol\+\_\+t} structure pointer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
null 
\end{DoxyReturn}


Definition at line 320 of file lifutils.\+c.



Referenced by lif\+\_\+opendir().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+updatefree@{lif\+\_\+updatefree}}
\index{lif\+\_\+updatefree@{lif\+\_\+updatefree}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+updatefree(lifdir\+\_\+t $\ast$\+D\+I\+R)}{lif_updatefree(lifdir_t *DIR)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lifdir\+\_\+t}$\ast$ lif\+\_\+updatefree (
\begin{DoxyParamCaption}
\item[{{\bf lifdir\+\_\+t} $\ast$}]{D\+IR}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_ad1f6f41429bd3f4e3e4fc936827bc6d8}{}\label{lifutils_8h_ad1f6f41429bd3f4e3e4fc936827bc6d8}


Find free space. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+D\+IR} & to L\+IF Volume/\+Diractoy structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Directory pointer 
\end{DoxyReturn}


Definition at line 751 of file lifutils.\+c.



Referenced by lif\+\_\+opendir().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+\+Validate\+Volume@{lif\+\_\+\+Validate\+Volume}}
\index{lif\+\_\+\+Validate\+Volume@{lif\+\_\+\+Validate\+Volume}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+\+Validate\+Volume(lifvol\+\_\+t $\ast$\+V, int debug)}{lif_ValidateVolume(lifvol_t *V, int debug)}}]{\setlength{\rightskip}{0pt plus 5cm}int lif\+\_\+\+Validate\+Volume (
\begin{DoxyParamCaption}
\item[{{\bf lifvol\+\_\+t} $\ast$}]{V, }
\item[{int}]{debug}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_aadb8d7b2205d009d52fb0dc0b4ae8f21}{}\label{lifutils_8h_aadb8d7b2205d009d52fb0dc0b4ae8f21}


Check Volume Table. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em V} & \hyperlink{structlifvol__t}{lifvol\+\_\+t} structure pointer \\
\hline
\mbox{\tt in}  & {\em debug} & dispaly diagostice messages \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 of ok, 0 on eeror 
\end{DoxyReturn}


Definition at line 268 of file lifutils.\+c.



Referenced by lif\+\_\+opendir().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+vol\+\_\+clear@{lif\+\_\+vol\+\_\+clear}}
\index{lif\+\_\+vol\+\_\+clear@{lif\+\_\+vol\+\_\+clear}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+vol\+\_\+clear(lifdir\+\_\+t $\ast$\+D\+I\+R)}{lif_vol_clear(lifdir_t *DIR)}}]{\setlength{\rightskip}{0pt plus 5cm}void lif\+\_\+vol\+\_\+clear (
\begin{DoxyParamCaption}
\item[{{\bf lifdir\+\_\+t} $\ast$}]{D\+IR}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a49a3bb535736ef9c2948a391a03cef4e}{}\label{lifutils_8h_a49a3bb535736ef9c2948a391a03cef4e}


Clear \hyperlink{structlifvol__t}{lifvol\+\_\+t} V structure in \hyperlink{structDIR}{D\+IR}. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+D\+IR} & pointer to \hyperlink{structDIR}{D\+IR} structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 423 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+image().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+write@{lif\+\_\+write}}
\index{lif\+\_\+write@{lif\+\_\+write}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+write(char $\ast$name, void $\ast$buf, long offset, int bytes)}{lif_write(char *name, void *buf, long offset, int bytes)}}]{\setlength{\rightskip}{0pt plus 5cm}int lif\+\_\+write (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{name, }
\item[{void $\ast$}]{buf, }
\item[{long}]{offset, }
\item[{int}]{bytes}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a6be20c8f3213656e828aae93b303d776}{}\label{lifutils_8h_a6be20c8f3213656e828aae93b303d776}


Write data to an L\+IF image File is closed, positioned to the end of file, after write Why? We want time minimize file open to to avoid corruption on the S\+D\+C\+A\+RD. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$name} & file name of L\+IF image \\
\hline
\mbox{\tt in}  & {\em $\ast$buf} & write buffer \\
\hline
\mbox{\tt in}  & {\em offset} & write offset \\
\hline
\mbox{\tt in}  & {\em bytes} & number of bytes to write \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/1 on error or number of bytes written 
\end{DoxyReturn}
Initial file position 

Definition at line 536 of file lifutils.\+c.



Referenced by lif\+\_\+write\+\_\+pad(), and lif\+\_\+writedir().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+write\+\_\+pad@{lif\+\_\+write\+\_\+pad}}
\index{lif\+\_\+write\+\_\+pad@{lif\+\_\+write\+\_\+pad}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+write\+\_\+pad(lifdir\+\_\+t $\ast$\+D\+I\+R, long offset)}{lif_write_pad(lifdir_t *DIR, long offset)}}]{\setlength{\rightskip}{0pt plus 5cm}int lif\+\_\+write\+\_\+pad (
\begin{DoxyParamCaption}
\item[{{\bf lifdir\+\_\+t} $\ast$}]{D\+IR, }
\item[{long}]{offset}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_ae077333ae15ec21e05b9da7f9b77e63a}{}\label{lifutils_8h_ae077333ae15ec21e05b9da7f9b77e63a}


Pad the last sector to the end When \hyperlink{structDIR}{D\+IR} is null we do not write, just compute the write size. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \hyperlink{structDIR}{D\+IR}} & L\+IF image file sructure \\
\hline
\mbox{\tt in}  & {\em offset} & offset to write to \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
number of bytes written , -\/1 on error 
\end{DoxyReturn}


Definition at line 1009 of file lifutils.\+c.



Referenced by lif\+\_\+ascii2lif().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+write\+\_\+string@{lif\+\_\+write\+\_\+string}}
\index{lif\+\_\+write\+\_\+string@{lif\+\_\+write\+\_\+string}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+write\+\_\+string(lifdir\+\_\+t $\ast$\+D\+I\+R, long offset, void $\ast$vptr)}{lif_write_string(lifdir_t *DIR, long offset, void *vptr)}}]{\setlength{\rightskip}{0pt plus 5cm}int lif\+\_\+write\+\_\+string (
\begin{DoxyParamCaption}
\item[{{\bf lifdir\+\_\+t} $\ast$}]{D\+IR, }
\item[{long}]{offset, }
\item[{void $\ast$}]{vptr}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_af9c97ea233d2bbd2265ece4966246543}{}\label{lifutils_8h_af9c97ea233d2bbd2265ece4966246543}


H\+P85 A\+S\+C\+II L\+IF records have a 3 byte header ef \mbox{[}ff\mbox{]}$\ast$ = end of data in this sector (no size) , pad with ff\textquotesingle{}s optionally if there is room df size = string cf size = split accross sector end \char`\"{}6f size\char`\"{} at start of next sector but the 6f size bytes are not included in cf size! (yuck!) 6f size = split continue (always starts at sector boundry) df 00 00 ef \mbox{[}ff\mbox{]}$\ast$ = E\+OF (df size = 0) ef send of sector and optional padding size = 16 bits L\+SB M\+SB. 

Example\+: 000080e0 \+: 4b 7c 22 0d cf 29 00 31 34 20 44 49 53 50 20 22 \+: K$\vert$\char`\"{}..).\+14 D\+I\+S\+P \char`\"{} 000080f0 \+: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 5f \+: \+\_\+ 00008100 \+: 6f 10 00 5f 5f 5f 5f 5f 5f 5f 5f 5f 5f 5f 5f 5f \+: o..\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+ 00008110 \+: 5f 22 0d df 2b 00 31 35 20 44 49 53 50 20 22 20 \+: \+\_\+\char`\"{}..+.\+15 D\+I\+S\+P \char`\"{}

cf 29 00 (19 is to sector end) (new sector start with 6F 10 00 (10 is remainder) So 29 = 19 and 10 (yuck!)Write a string with header to a lif file When \hyperlink{structDIR}{D\+IR} is null we do not write, just compute the write size 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \hyperlink{structDIR}{D\+IR}} & L\+IF image file sructure \\
\hline
\mbox{\tt in}  & {\em offset} & offset to write to \\
\hline
\mbox{\tt in}  & {\em str} & string to write \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
wtite size in bytes, -\/1 on error 
\end{DoxyReturn}


Definition at line 1060 of file lifutils.\+c.



Referenced by lif\+\_\+ascii2lif(), and lif\+\_\+write\+\_\+pad().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+writedir@{lif\+\_\+writedir}}
\index{lif\+\_\+writedir@{lif\+\_\+writedir}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+writedir(lifdir\+\_\+t $\ast$\+D\+I\+R)}{lif_writedir(lifdir_t *DIR)}}]{\setlength{\rightskip}{0pt plus 5cm}long lif\+\_\+writedir (
\begin{DoxyParamCaption}
\item[{{\bf lifdir\+\_\+t} $\ast$}]{D\+IR}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a5bde42f25a87ea3db74cf7b379022ddb}{}\label{lifutils_8h_a5bde42f25a87ea3db74cf7b379022ddb}


Write a director entry Modeled after Linux \hyperlink{posix_8c_a1508fedaef509d2976b43300306d1400}{readdir()} 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+D\+IR} & to L\+IF Volume/\+Diractoy structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
number of bytes written 
\end{DoxyReturn}


Definition at line 674 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+file().



\subsection{Variable Documentation}
\index{lifutils.\+h@{lifutils.\+h}!debuglevel@{debuglevel}}
\index{debuglevel@{debuglevel}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{debuglevel}{debuglevel}}]{\setlength{\rightskip}{0pt plus 5cm}int debuglevel}\hypertarget{lifutils_8h_af219299ebad47daa6631415a8b41345a}{}\label{lifutils_8h_af219299ebad47daa6631415a8b41345a}


Debug flag -\/ used to log G\+P\+IB and emulator messages. 



Definition at line 32 of file gpib\+\_\+task.\+c.



Referenced by G\+P\+I\+B(), gpib\+\_\+error\+\_\+test(), gpib\+\_\+file\+\_\+init(), G\+P\+I\+B\+\_\+\+L\+I\+S\+T\+E\+N(), G\+P\+I\+B\+\_\+\+S\+E\+C\+O\+N\+D\+A\+R\+Y\+\_\+\+A\+D\+D\+R\+E\+S\+S(), G\+P\+I\+B\+\_\+\+T\+A\+L\+K(), gpib\+\_\+task(), listen\+\_\+cleanup(), and Send\+\_\+\+Identify().


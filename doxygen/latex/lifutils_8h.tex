\hypertarget{lifutils_8h}{}\section{gpib/lifutils.h File Reference}
\label{lifutils_8h}\index{gpib/lifutils.\+h@{gpib/lifutils.\+h}}
{\ttfamily \#include \char`\"{}user\+\_\+config.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}defines.\+h\char`\"{}}\\*
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structlifvol__t}{lifvol\+\_\+t}
\begin{DoxyCompactList}\small\item\em Disk Layout. \end{DoxyCompactList}\item 
struct \hyperlink{structlifdirent__t}{lifdirent\+\_\+t}
\begin{DoxyCompactList}\small\item\em Directory layout. \end{DoxyCompactList}\item 
struct \hyperlink{structlifdir__t}{lifdir\+\_\+t}
\begin{DoxyCompactList}\small\item\em Master L\+IF data structure Contains image file name Volume Structure Current Directory Entry read/write flag. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{lifutils_8h_a9f32d2537f4daba6a314185cf52b7e56}{L\+I\+F\+\_\+\+S\+E\+C\+T\+O\+R\+\_\+\+S\+I\+ZE}~256
\begin{DoxyCompactList}\small\item\em Depends on how much free ram we have. \end{DoxyCompactList}\item 
\#define \hyperlink{lifutils_8h_a7e7f4ebd8f31cd7f9dcb0e9758ef8f44}{L\+I\+F\+\_\+\+C\+H\+U\+N\+KS}~16
\begin{DoxyCompactList}\small\item\em used for formatting \end{DoxyCompactList}\item 
\#define \hyperlink{lifutils_8h_a625b7a543a55b48e28ea93fbb61595eb}{L\+I\+F\+\_\+\+C\+H\+U\+N\+K\+\_\+\+S\+I\+ZE}~(\hyperlink{lifutils_8h_a9f32d2537f4daba6a314185cf52b7e56}{L\+I\+F\+\_\+\+S\+E\+C\+T\+O\+R\+\_\+\+S\+I\+ZE}$\ast$\hyperlink{lifutils_8h_a7e7f4ebd8f31cd7f9dcb0e9758ef8f44}{L\+I\+F\+\_\+\+C\+H\+U\+N\+KS})
\item 
\#define \hyperlink{lifutils_8h_a99ad70dd3200a3ee46388bc2c36fe720}{L\+I\+F\+\_\+\+D\+I\+R\+\_\+\+S\+I\+ZE}~32
\begin{DoxyCompactList}\small\item\em L\+IF directory entry size. \end{DoxyCompactList}\item 
\#define \hyperlink{lifutils_8h_a8cfa79b094fc3a5db37b26761a639e6d}{L\+I\+F\+\_\+\+I\+M\+A\+G\+E\+\_\+\+N\+A\+M\+E\+\_\+\+S\+I\+ZE}~64
\begin{DoxyCompactList}\small\item\em size of image file name size used by lif\+\_\+format() \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \hyperlink{structstat}{stat} \hyperlink{lifutils_8h_aebb3d0e746d3aa086e0baa48ad66b964}{stat\+\_\+t}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{lifutils_8h_adcd52baa64a03567d69ce3579e3f66ea}{lif\+\_\+help} (void)
\begin{DoxyCompactList}\small\item\em Help Menu for User invoked G\+P\+IB functions and tasks See\+: int \hyperlink{gpib__tests_8h_aed0c6a0a794f33d5cf7691c96d3e4955}{gpib\+\_\+tests(char $\ast$str)} \end{DoxyCompactList}\item 
int \hyperlink{lifutils_8h_a32dc220253a6108ad1d2f6b06318d326}{lif\+\_\+tests} (char $\ast$str)
\begin{DoxyCompactList}\small\item\em L\+I\+F\+Guser tests. \end{DoxyCompactList}\item 
void \hyperlink{lifutils_8h_a0e71af1d76d982ee586717537dd67417}{lif\+\_\+\+B2S} (uint8\+\_\+t $\ast$B, uint8\+\_\+t $\ast$name, int size)
\begin{DoxyCompactList}\small\item\em Convert L\+IF space padded string name into normal string. \end{DoxyCompactList}\item 
void \hyperlink{lifutils_8h_a3581f407fe6c5cbe6a5db361fe49d387}{lif\+\_\+\+S2B} (uint8\+\_\+t $\ast$B, uint8\+\_\+t $\ast$name, int size)
\begin{DoxyCompactList}\small\item\em string to L\+IF directory entry \end{DoxyCompactList}\item 
int \hyperlink{lifutils_8h_a4526efb5e3517ff7bb83e6ac08e4c6b6}{lif\+\_\+fixname} (uint8\+\_\+t $\ast$B, char $\ast$name, int size)
\begin{DoxyCompactList}\small\item\em Convert a file name (unix/fat32) format into a valid L\+IF name First we do a basename on the string (remove any leading file paths) Next we remove any extensions L\+IF names may have only these characters\+: \mbox{[}A-\/Z\mbox{]}\mbox{[}A-\/\+Z0-\/09\+\_\+\mbox{]}+ L\+IF names are converted to upper case L\+IF names are padded at the end with spaces. \end{DoxyCompactList}\item 
void \hyperlink{lifutils_8h_a2ead31a7c8161db8ee528ff0cb7d7325}{lif\+\_\+\+Pack\+Volume} (uint8\+\_\+t $\ast$B, \hyperlink{structlifvol__t}{lifvol\+\_\+t} $\ast$V)
\begin{DoxyCompactList}\small\item\em Pack \hyperlink{structlifvol__t}{lifvol\+\_\+t} data into bytes. \end{DoxyCompactList}\item 
void \hyperlink{lifutils_8h_a199fe2e35d157581120008a78d26b4cd}{lif\+\_\+\+Un\+Pack\+Volume} (uint8\+\_\+t $\ast$B, \hyperlink{structlifvol__t}{lifvol\+\_\+t} $\ast$V)
\begin{DoxyCompactList}\small\item\em Un\+Pack \hyperlink{structlifvol__t}{lifvol\+\_\+t} data from bytes. \end{DoxyCompactList}\item 
void \hyperlink{lifutils_8h_a85f2680ef77647d6f09ffbaf465879a2}{lif\+\_\+\+Pack\+Dir} (uint8\+\_\+t $\ast$B, \hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$\hyperlink{structDIR}{D\+IR})
\begin{DoxyCompactList}\small\item\em Pack Dire\+Entry\+Type data into bytes. \end{DoxyCompactList}\item 
void \hyperlink{lifutils_8h_ab5a6d92768c95407e731ddded99040f6}{lif\+\_\+\+Un\+Pack\+Dir} (uint8\+\_\+t $\ast$B, \hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$\hyperlink{structDIR}{D\+IR})
\begin{DoxyCompactList}\small\item\em Un\+Pack \hyperlink{structlifdirent__t}{lifdirent\+\_\+t} data from bytes. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{lifutils_8h_a68235d8edc4ac1583e77c90d16a877c8}{lif\+\_\+\+B\+I\+N2\+B\+CD} (uint8\+\_\+t data)
\begin{DoxyCompactList}\small\item\em Convert number $>$= 0 and $<$= 99 to B\+CD. \end{DoxyCompactList}\item 
void \hyperlink{lifutils_8h_af2e35296eec6eba5cb2d5c9964d0b738}{lif\+\_\+time2lif} (uint8\+\_\+t $\ast$bcd, \hyperlink{time_8h_a3346b04b0420b32ccf6b706551b70762}{time\+\_\+t} t)
\begin{DoxyCompactList}\small\item\em U\+N\+IX time to L\+IF time format. \end{DoxyCompactList}\item 
void \hyperlink{lifutils_8h_a1038b27c4593489c48a46e2f140b675a}{lif\+\_\+dir\+\_\+clear} (\hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$\hyperlink{structDIR}{D\+IR})
\begin{DoxyCompactList}\small\item\em Clear main \hyperlink{structlifdir__t}{lifdir\+\_\+t} \hyperlink{structDIR}{D\+IR} structure. \end{DoxyCompactList}\item 
void \hyperlink{lifutils_8h_ac24d806ba3d75f423b1e17e5528fc90e}{lif\+\_\+dirent\+\_\+clear} (\hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$\hyperlink{structDIR}{D\+IR})
\begin{DoxyCompactList}\small\item\em Clear \hyperlink{structlifdirent__t}{lifdirent\+\_\+t} DE structure in \hyperlink{structDIR}{D\+IR}. \end{DoxyCompactList}\item 
void \hyperlink{lifutils_8h_a49a3bb535736ef9c2948a391a03cef4e}{lif\+\_\+vol\+\_\+clear} (\hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$\hyperlink{structDIR}{D\+IR})
\begin{DoxyCompactList}\small\item\em Clear \hyperlink{structlifvol__t}{lifvol\+\_\+t} V structure in \hyperlink{structDIR}{D\+IR}. \end{DoxyCompactList}\item 
int \hyperlink{lifutils_8h_a2691478126c4c013b2dff751b6627921}{lif\+\_\+closedir} (\hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$\hyperlink{structDIR}{D\+IR})
\begin{DoxyCompactList}\small\item\em Close L\+IF directory Modeled after Linux \hyperlink{posix_8c_aaeac2b41e8c2c3a5f91c9bd511a8c0a6}{closedir()} \end{DoxyCompactList}\item 
\hyperlink{posix_8h_aed4dabeb9f7c518ded42f930a04abce8}{F\+I\+LE} $\ast$ \hyperlink{lifutils_8h_afe395b08bb0cfe54ee46529a0181c11e}{lif\+\_\+open} (char $\ast$name, char $\ast$mode)
\begin{DoxyCompactList}\small\item\em Open a file that must exist. \end{DoxyCompactList}\item 
\hyperlink{defines_8h_aebb3d0e746d3aa086e0baa48ad66b964}{stat\+\_\+t} $\ast$ \hyperlink{lifutils_8h_aabcbc42b059eb4dadaab5c63778547f8}{lif\+\_\+stat} (char $\ast$name)
\begin{DoxyCompactList}\small\item\em Stat a file. \end{DoxyCompactList}\item 
long \hyperlink{lifutils_8h_afd91a3610ac5b104097ac0686a56cefd}{lif\+\_\+read} (char $\ast$name, void $\ast$buf, long offset, int bytes)
\begin{DoxyCompactList}\small\item\em Read data from a L\+IF image File is closed after read W\+HY? We want time minimize file open to to avoid corruption on the S\+D\+C\+A\+RD. \end{DoxyCompactList}\item 
int \hyperlink{lifutils_8h_a6be20c8f3213656e828aae93b303d776}{lif\+\_\+write} (char $\ast$name, void $\ast$buf, long offset, int bytes)
\begin{DoxyCompactList}\small\item\em Write data to an L\+IF image File is closed, positioned to the end of file, after write Why? We want time minimize file open to to avoid corruption on the S\+D\+C\+A\+RD. \end{DoxyCompactList}\item 
\hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$ \hyperlink{lifutils_8h_a6b37a1c50e14b4e64e8110f13b74dfeb}{lif\+\_\+opendir} (char $\ast$name)
\item 
\hyperlink{structlifdirent__t}{lifdirent\+\_\+t} $\ast$ \hyperlink{lifutils_8h_a470203a61f36e84f411fa42e965b731a}{lif\+\_\+readdir} (\hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$\hyperlink{structDIR}{D\+IR})
\begin{DoxyCompactList}\small\item\em Open L\+IF directory for reading Modeled after Linux \hyperlink{posix_8c_a1508fedaef509d2976b43300306d1400}{readdir()} \end{DoxyCompactList}\item 
long \hyperlink{lifutils_8h_a5bde42f25a87ea3db74cf7b379022ddb}{lif\+\_\+writedir} (\hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$\hyperlink{structDIR}{D\+IR})
\begin{DoxyCompactList}\small\item\em Write a director entry Modeled after Linux \hyperlink{posix_8c_a1508fedaef509d2976b43300306d1400}{readdir()} \end{DoxyCompactList}\item 
long \hyperlink{lifutils_8h_a5c10caf1bb5c6d712e11c6a25cf9e1e7}{lif\+\_\+filelength} (\hyperlink{structlifdirent__t}{lifdirent\+\_\+t} $\ast$DE)
\begin{DoxyCompactList}\small\item\em get L\+IF file size from directory entry \end{DoxyCompactList}\item 
\hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$ \hyperlink{lifutils_8h_a5f6f0773f5f6e94bc1bb6c63d32e243f}{lif\+\_\+find\+\_\+free} (char $\ast$name, long size)
\begin{DoxyCompactList}\small\item\em Find offset to first free sector that is big enough Modeled after Linux \hyperlink{posix_8c_a1508fedaef509d2976b43300306d1400}{readdir()} \end{DoxyCompactList}\item 
int \hyperlink{lifutils_8h_aca0a37c5d186a795d821d7c05c87dcc5}{lif\+\_\+dir} (char $\ast$lifimagename)
\begin{DoxyCompactList}\small\item\em Display a L\+IF image file directory. \end{DoxyCompactList}\item 
long \hyperlink{lifutils_8h_a6e1ce15dd4303f2f22df70835e6c2af3}{lif\+\_\+user2lif} (char $\ast$userfile, \hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$\hyperlink{structDIR}{D\+IR})
\begin{DoxyCompactList}\small\item\em Convert a user A\+S\+C\+II file into H\+P85 0x\+E010 L\+IF format We must know the convered file size B\+E\+F\+O\+RE writting So we must call this function T\+W\+I\+CE 1) find out how big the converted file is (\hyperlink{structDIR}{D\+IR} is N\+U\+LL) 2) Specify where to put it (\hyperlink{structDIR}{D\+IR} is set) \end{DoxyCompactList}\item 
long \hyperlink{lifutils_8h_acc02f6c04090b6b17f348804f7c45368}{lif\+\_\+add\+\_\+file} (char $\ast$lifimagename, char $\ast$lifname, char $\ast$userfile)
\begin{DoxyCompactList}\small\item\em Add a user file to the L\+IF image The basename of the userfile, without extensions, is used as the L\+IF file name. \end{DoxyCompactList}\item 
long \hyperlink{lifutils_8h_a5c7d1152746b689e81e293e23eb8339e}{lif\+\_\+create\+\_\+image} (char $\ast$lifimagename, char $\ast$liflabel, long dirsecs, long sectors)
\begin{DoxyCompactList}\small\item\em Create/\+Format a L\+IF disk image This can take a while to run, about 1 min for 10,000,000 bytes. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{lifutils_8h_af219299ebad47daa6631415a8b41345a}{debuglevel}
\begin{DoxyCompactList}\small\item\em Debug flag -\/ used to log G\+P\+IB and emulator messages. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\index{lifutils.\+h@{lifutils.\+h}!L\+I\+F\+\_\+\+C\+H\+U\+N\+K\+\_\+\+S\+I\+ZE@{L\+I\+F\+\_\+\+C\+H\+U\+N\+K\+\_\+\+S\+I\+ZE}}
\index{L\+I\+F\+\_\+\+C\+H\+U\+N\+K\+\_\+\+S\+I\+ZE@{L\+I\+F\+\_\+\+C\+H\+U\+N\+K\+\_\+\+S\+I\+ZE}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{L\+I\+F\+\_\+\+C\+H\+U\+N\+K\+\_\+\+S\+I\+ZE}{LIF_CHUNK_SIZE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\+I\+F\+\_\+\+C\+H\+U\+N\+K\+\_\+\+S\+I\+ZE~({\bf L\+I\+F\+\_\+\+S\+E\+C\+T\+O\+R\+\_\+\+S\+I\+ZE}$\ast${\bf L\+I\+F\+\_\+\+C\+H\+U\+N\+KS})}\hypertarget{lifutils_8h_a625b7a543a55b48e28ea93fbb61595eb}{}\label{lifutils_8h_a625b7a543a55b48e28ea93fbb61595eb}


Definition at line 31 of file lifutils.\+h.

\index{lifutils.\+h@{lifutils.\+h}!L\+I\+F\+\_\+\+C\+H\+U\+N\+KS@{L\+I\+F\+\_\+\+C\+H\+U\+N\+KS}}
\index{L\+I\+F\+\_\+\+C\+H\+U\+N\+KS@{L\+I\+F\+\_\+\+C\+H\+U\+N\+KS}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{L\+I\+F\+\_\+\+C\+H\+U\+N\+KS}{LIF_CHUNKS}}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\+I\+F\+\_\+\+C\+H\+U\+N\+KS~16}\hypertarget{lifutils_8h_a7e7f4ebd8f31cd7f9dcb0e9758ef8f44}{}\label{lifutils_8h_a7e7f4ebd8f31cd7f9dcb0e9758ef8f44}


used for formatting 

When formatting a disk define how many sectors we can write at once 

Definition at line 30 of file lifutils.\+h.

\index{lifutils.\+h@{lifutils.\+h}!L\+I\+F\+\_\+\+D\+I\+R\+\_\+\+S\+I\+ZE@{L\+I\+F\+\_\+\+D\+I\+R\+\_\+\+S\+I\+ZE}}
\index{L\+I\+F\+\_\+\+D\+I\+R\+\_\+\+S\+I\+ZE@{L\+I\+F\+\_\+\+D\+I\+R\+\_\+\+S\+I\+ZE}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{L\+I\+F\+\_\+\+D\+I\+R\+\_\+\+S\+I\+ZE}{LIF_DIR_SIZE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\+I\+F\+\_\+\+D\+I\+R\+\_\+\+S\+I\+ZE~32}\hypertarget{lifutils_8h_a99ad70dd3200a3ee46388bc2c36fe720}{}\label{lifutils_8h_a99ad70dd3200a3ee46388bc2c36fe720}


L\+IF directory entry size. 



Definition at line 34 of file lifutils.\+h.



Referenced by lif\+\_\+create\+\_\+image(), lif\+\_\+readdir(), and lif\+\_\+writedir().

\index{lifutils.\+h@{lifutils.\+h}!L\+I\+F\+\_\+\+I\+M\+A\+G\+E\+\_\+\+N\+A\+M\+E\+\_\+\+S\+I\+ZE@{L\+I\+F\+\_\+\+I\+M\+A\+G\+E\+\_\+\+N\+A\+M\+E\+\_\+\+S\+I\+ZE}}
\index{L\+I\+F\+\_\+\+I\+M\+A\+G\+E\+\_\+\+N\+A\+M\+E\+\_\+\+S\+I\+ZE@{L\+I\+F\+\_\+\+I\+M\+A\+G\+E\+\_\+\+N\+A\+M\+E\+\_\+\+S\+I\+ZE}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{L\+I\+F\+\_\+\+I\+M\+A\+G\+E\+\_\+\+N\+A\+M\+E\+\_\+\+S\+I\+ZE}{LIF_IMAGE_NAME_SIZE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\+I\+F\+\_\+\+I\+M\+A\+G\+E\+\_\+\+N\+A\+M\+E\+\_\+\+S\+I\+ZE~64}\hypertarget{lifutils_8h_a8cfa79b094fc3a5db37b26761a639e6d}{}\label{lifutils_8h_a8cfa79b094fc3a5db37b26761a639e6d}


size of image file name size used by lif\+\_\+format() 



Definition at line 36 of file lifutils.\+h.



Referenced by lif\+\_\+opendir().

\index{lifutils.\+h@{lifutils.\+h}!L\+I\+F\+\_\+\+S\+E\+C\+T\+O\+R\+\_\+\+S\+I\+ZE@{L\+I\+F\+\_\+\+S\+E\+C\+T\+O\+R\+\_\+\+S\+I\+ZE}}
\index{L\+I\+F\+\_\+\+S\+E\+C\+T\+O\+R\+\_\+\+S\+I\+ZE@{L\+I\+F\+\_\+\+S\+E\+C\+T\+O\+R\+\_\+\+S\+I\+ZE}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{L\+I\+F\+\_\+\+S\+E\+C\+T\+O\+R\+\_\+\+S\+I\+ZE}{LIF_SECTOR_SIZE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\+I\+F\+\_\+\+S\+E\+C\+T\+O\+R\+\_\+\+S\+I\+ZE~256}\hypertarget{lifutils_8h_a9f32d2537f4daba6a314185cf52b7e56}{}\label{lifutils_8h_a9f32d2537f4daba6a314185cf52b7e56}


Depends on how much free ram we have. 



Definition at line 26 of file lifutils.\+h.



Referenced by lif\+\_\+add\+\_\+file(), lif\+\_\+create\+\_\+image(), lif\+\_\+filelength(), lif\+\_\+find\+\_\+free(), lif\+\_\+opendir(), lif\+\_\+readdir(), lif\+\_\+user2lif(), and lif\+\_\+writedir().



\subsection{Typedef Documentation}
\index{lifutils.\+h@{lifutils.\+h}!stat\+\_\+t@{stat\+\_\+t}}
\index{stat\+\_\+t@{stat\+\_\+t}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{stat\+\_\+t}{stat_t}}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf stat} {\bf stat\+\_\+t}}\hypertarget{lifutils_8h_aebb3d0e746d3aa086e0baa48ad66b964}{}\label{lifutils_8h_aebb3d0e746d3aa086e0baa48ad66b964}


Definition at line 23 of file lifutils.\+h.



\subsection{Function Documentation}
\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+add\+\_\+file@{lif\+\_\+add\+\_\+file}}
\index{lif\+\_\+add\+\_\+file@{lif\+\_\+add\+\_\+file}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+add\+\_\+file(char $\ast$lifimagename, char $\ast$lifname, char $\ast$userfile)}{lif_add_file(char *lifimagename, char *lifname, char *userfile)}}]{\setlength{\rightskip}{0pt plus 5cm}long lif\+\_\+add\+\_\+file (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{lifimagename, }
\item[{char $\ast$}]{lifname, }
\item[{char $\ast$}]{userfile}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_acc02f6c04090b6b17f348804f7c45368}{}\label{lifutils_8h_acc02f6c04090b6b17f348804f7c45368}


Add a user file to the L\+IF image The basename of the userfile, without extensions, is used as the L\+IF file name. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em lifimagename} & L\+IF image name \\
\hline
\mbox{\tt in}  & {\em lifname} & L\+IF file name \\
\hline
\mbox{\tt in}  & {\em userfile} & userfile name \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size of data written into to L\+IF image, or -\/1 on error 
\end{DoxyReturn}


Definition at line 792 of file lifutils.\+c.



Referenced by lif\+\_\+tests().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+\+B2S@{lif\+\_\+\+B2S}}
\index{lif\+\_\+\+B2S@{lif\+\_\+\+B2S}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+\+B2\+S(uint8\+\_\+t $\ast$\+B, uint8\+\_\+t $\ast$name, int size)}{lif_B2S(uint8_t *B, uint8_t *name, int size)}}]{\setlength{\rightskip}{0pt plus 5cm}void lif\+\_\+\+B2S (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{B, }
\item[{uint8\+\_\+t $\ast$}]{name, }
\item[{int}]{size}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a0e71af1d76d982ee586717537dd67417}{}\label{lifutils_8h_a0e71af1d76d982ee586717537dd67417}


Convert L\+IF space padded string name into normal string. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$B} & L\+IF name space padded \\
\hline
\mbox{\tt out}  & {\em $\ast$name} & string result  void \\
\hline
\end{DoxyParams}


Definition at line 114 of file lifutils.\+c.



Referenced by lif\+\_\+\+Un\+Pack\+Dir(), and lif\+\_\+\+Un\+Pack\+Volume().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+\+B\+I\+N2\+B\+CD@{lif\+\_\+\+B\+I\+N2\+B\+CD}}
\index{lif\+\_\+\+B\+I\+N2\+B\+CD@{lif\+\_\+\+B\+I\+N2\+B\+CD}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+\+B\+I\+N2\+B\+C\+D(uint8\+\_\+t data)}{lif_BIN2BCD(uint8_t data)}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t lif\+\_\+\+B\+I\+N2\+B\+CD (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{data}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a68235d8edc4ac1583e77c90d16a877c8}{}\label{lifutils_8h_a68235d8edc4ac1583e77c90d16a877c8}


Convert number $>$= 0 and $<$= 99 to B\+CD. 


\begin{DoxyItemize}
\item B\+CD format has each hex nibble has a digit 0 .. 9
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em data} & number to convert. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
B\+CD value 
\end{DoxyReturn}
\begin{DoxyWarning}{Warning}
we assume the number is in range. 
\end{DoxyWarning}


Definition at line 276 of file lifutils.\+c.



Referenced by lif\+\_\+time2lif().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+closedir@{lif\+\_\+closedir}}
\index{lif\+\_\+closedir@{lif\+\_\+closedir}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+closedir(lifdir\+\_\+t $\ast$\+D\+I\+R)}{lif_closedir(lifdir_t *DIR)}}]{\setlength{\rightskip}{0pt plus 5cm}int lif\+\_\+closedir (
\begin{DoxyParamCaption}
\item[{{\bf lifdir\+\_\+t} $\ast$}]{D\+IR}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a2691478126c4c013b2dff751b6627921}{}\label{lifutils_8h_a2691478126c4c013b2dff751b6627921}


Close L\+IF directory Modeled after Linux \hyperlink{posix_8c_aaeac2b41e8c2c3a5f91c9bd511a8c0a6}{closedir()} 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+D\+IR} & pointer to L\+IF Volume/\+Directoy structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on sucesss, -\/1 on error 
\end{DoxyReturn}


Definition at line 329 of file lifutils.\+c.



Referenced by lif\+\_\+dir(), and lif\+\_\+find\+\_\+free().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+create\+\_\+image@{lif\+\_\+create\+\_\+image}}
\index{lif\+\_\+create\+\_\+image@{lif\+\_\+create\+\_\+image}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+create\+\_\+image(char $\ast$lifimagename, char $\ast$liflabel, long dirsecs, long sectors)}{lif_create_image(char *lifimagename, char *liflabel, long dirsecs, long sectors)}}]{\setlength{\rightskip}{0pt plus 5cm}long lif\+\_\+create\+\_\+image (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{lifimagename, }
\item[{char $\ast$}]{liflabel, }
\item[{long}]{dirsecs, }
\item[{long}]{sectors}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a5c7d1152746b689e81e293e23eb8339e}{}\label{lifutils_8h_a5c7d1152746b689e81e293e23eb8339e}


Create/\+Format a L\+IF disk image This can take a while to run, about 1 min for 10,000,000 bytes. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em lifimagename} & L\+IF disk image name \\
\hline
\mbox{\tt in}  & {\em liflabel} & L\+IF Volume Label name \\
\hline
\mbox{\tt in}  & {\em dirsecs} & Number of L\+IF directory sectors \\
\hline
\mbox{\tt in}  & {\em sectors} & total disk image size in sectors \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bytes writting to disk image 
\end{DoxyReturn}
Current Date

Open L\+IF disk image for writting

Initial file position

File type of 0xffff is last directory entry

F\+I\+X\+ME this is the default that the H\+Pdrive project uses, not sure of this

Zero out remining disk image 

Definition at line 884 of file lifutils.\+c.



Referenced by format\+\_\+drives(), and lif\+\_\+tests().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+dir@{lif\+\_\+dir}}
\index{lif\+\_\+dir@{lif\+\_\+dir}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+dir(char $\ast$lifimagename)}{lif_dir(char *lifimagename)}}]{\setlength{\rightskip}{0pt plus 5cm}int lif\+\_\+dir (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{lifimagename}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_aca0a37c5d186a795d821d7c05c87dcc5}{}\label{lifutils_8h_aca0a37c5d186a795d821d7c05c87dcc5}


Display a L\+IF image file directory. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em lifimagename} & L\+IF disk image name \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/1 on error or number of files found 
\end{DoxyReturn}


Definition at line 611 of file lifutils.\+c.



Referenced by lif\+\_\+tests().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+dir\+\_\+clear@{lif\+\_\+dir\+\_\+clear}}
\index{lif\+\_\+dir\+\_\+clear@{lif\+\_\+dir\+\_\+clear}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+dir\+\_\+clear(lifdir\+\_\+t $\ast$\+D\+I\+R)}{lif_dir_clear(lifdir_t *DIR)}}]{\setlength{\rightskip}{0pt plus 5cm}void lif\+\_\+dir\+\_\+clear (
\begin{DoxyParamCaption}
\item[{{\bf lifdir\+\_\+t} $\ast$}]{D\+IR}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a1038b27c4593489c48a46e2f140b675a}{}\label{lifutils_8h_a1038b27c4593489c48a46e2f140b675a}


Clear main \hyperlink{structlifdir__t}{lifdir\+\_\+t} \hyperlink{structDIR}{D\+IR} structure. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+D\+IR} & pointer to \hyperlink{structDIR}{D\+IR} structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 303 of file lifutils.\+c.



Referenced by lif\+\_\+opendir().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+dirent\+\_\+clear@{lif\+\_\+dirent\+\_\+clear}}
\index{lif\+\_\+dirent\+\_\+clear@{lif\+\_\+dirent\+\_\+clear}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+dirent\+\_\+clear(lifdir\+\_\+t $\ast$\+D\+I\+R)}{lif_dirent_clear(lifdir_t *DIR)}}]{\setlength{\rightskip}{0pt plus 5cm}void lif\+\_\+dirent\+\_\+clear (
\begin{DoxyParamCaption}
\item[{{\bf lifdir\+\_\+t} $\ast$}]{D\+IR}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_ac24d806ba3d75f423b1e17e5528fc90e}{}\label{lifutils_8h_ac24d806ba3d75f423b1e17e5528fc90e}


Clear \hyperlink{structlifdirent__t}{lifdirent\+\_\+t} DE structure in \hyperlink{structDIR}{D\+IR}. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+D\+IR} & pointer to \hyperlink{structDIR}{D\+IR} structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 312 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+image().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+filelength@{lif\+\_\+filelength}}
\index{lif\+\_\+filelength@{lif\+\_\+filelength}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+filelength(lifdirent\+\_\+t $\ast$\+D\+E)}{lif_filelength(lifdirent_t *DE)}}]{\setlength{\rightskip}{0pt plus 5cm}long lif\+\_\+filelength (
\begin{DoxyParamCaption}
\item[{{\bf lifdirent\+\_\+t} $\ast$}]{DE}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a5c10caf1bb5c6d712e11c6a25cf9e1e7}{}\label{lifutils_8h_a5c10caf1bb5c6d712e11c6a25cf9e1e7}


get L\+IF file size from directory entry 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em name} & L\+IF disk image name \\
\hline
\mbox{\tt in}  & {\em DE} & L\+IF directory entry  void \\
\hline
\end{DoxyParams}


Definition at line 566 of file lifutils.\+c.



Referenced by lif\+\_\+dir(), and lif\+\_\+find\+\_\+free().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+find\+\_\+free@{lif\+\_\+find\+\_\+free}}
\index{lif\+\_\+find\+\_\+free@{lif\+\_\+find\+\_\+free}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+find\+\_\+free(char $\ast$name, long size)}{lif_find_free(char *name, long size)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lifdir\+\_\+t}$\ast$ lif\+\_\+find\+\_\+free (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{name, }
\item[{long}]{size}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a5f6f0773f5f6e94bc1bb6c63d32e243f}{}\label{lifutils_8h_a5f6f0773f5f6e94bc1bb6c63d32e243f}


Find offset to first free sector that is big enough Modeled after Linux \hyperlink{posix_8c_a1508fedaef509d2976b43300306d1400}{readdir()} 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+D\+IR} & to L\+IF Volume/\+Diractoy structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Directory pointer 
\end{DoxyReturn}


Definition at line 579 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+file().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+fixname@{lif\+\_\+fixname}}
\index{lif\+\_\+fixname@{lif\+\_\+fixname}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+fixname(uint8\+\_\+t $\ast$\+B, char $\ast$name, int size)}{lif_fixname(uint8_t *B, char *name, int size)}}]{\setlength{\rightskip}{0pt plus 5cm}int lif\+\_\+fixname (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{B, }
\item[{char $\ast$}]{name, }
\item[{int}]{size}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a4526efb5e3517ff7bb83e6ac08e4c6b6}{}\label{lifutils_8h_a4526efb5e3517ff7bb83e6ac08e4c6b6}


Convert a file name (unix/fat32) format into a valid L\+IF name First we do a basename on the string (remove any leading file paths) Next we remove any extensions L\+IF names may have only these characters\+: \mbox{[}A-\/Z\mbox{]}\mbox{[}A-\/\+Z0-\/09\+\_\+\mbox{]}+ L\+IF names are converted to upper case L\+IF names are padded at the end with spaces. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em $\ast$B} & output L\+IF string \\
\hline
\mbox{\tt in}  & {\em $\ast$name} & input string \\
\hline
\mbox{\tt in}  & {\em size} & maximum size of output string \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
length of result 
\end{DoxyReturn}


Definition at line 148 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+file(), and lif\+\_\+create\+\_\+image().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+help@{lif\+\_\+help}}
\index{lif\+\_\+help@{lif\+\_\+help}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+help(void)}{lif_help(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void lif\+\_\+help (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_adcd52baa64a03567d69ce3579e3f66ea}{}\label{lifutils_8h_adcd52baa64a03567d69ce3579e3f66ea}


Help Menu for User invoked G\+P\+IB functions and tasks See\+: int \hyperlink{gpib__tests_8h_aed0c6a0a794f33d5cf7691c96d3e4955}{gpib\+\_\+tests(char $\ast$str)} 

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 26 of file lifutils.\+c.



Referenced by help().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+open@{lif\+\_\+open}}
\index{lif\+\_\+open@{lif\+\_\+open}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+open(char $\ast$name, char $\ast$mode)}{lif_open(char *name, char *mode)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf F\+I\+LE}$\ast$ lif\+\_\+open (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{name, }
\item[{char $\ast$}]{mode}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_afe395b08bb0cfe54ee46529a0181c11e}{}\label{lifutils_8h_afe395b08bb0cfe54ee46529a0181c11e}


Open a file that must exist. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$name} & file name of L\+IF image \\
\hline
\mbox{\tt in}  & {\em $\ast$mode} & open mode -\/ see fopen \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
F\+I\+LE $\ast$ pointer 
\end{DoxyReturn}


Definition at line 339 of file lifutils.\+c.



Referenced by lif\+\_\+read(), lif\+\_\+user2lif(), and lif\+\_\+write().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+opendir@{lif\+\_\+opendir}}
\index{lif\+\_\+opendir@{lif\+\_\+opendir}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+opendir(char $\ast$name)}{lif_opendir(char *name)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lifdir\+\_\+t}$\ast$ lif\+\_\+opendir (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{name}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a6b37a1c50e14b4e64e8110f13b74dfeb}{}\label{lifutils_8h_a6b37a1c50e14b4e64e8110f13b74dfeb}


Definition at line 461 of file lifutils.\+c.



Referenced by lif\+\_\+dir(), and lif\+\_\+find\+\_\+free().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+\+Pack\+Dir@{lif\+\_\+\+Pack\+Dir}}
\index{lif\+\_\+\+Pack\+Dir@{lif\+\_\+\+Pack\+Dir}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+\+Pack\+Dir(uint8\+\_\+t $\ast$\+B, lifdir\+\_\+t $\ast$\+D\+I\+R)}{lif_PackDir(uint8_t *B, lifdir_t *DIR)}}]{\setlength{\rightskip}{0pt plus 5cm}void lif\+\_\+\+Pack\+Dir (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{B, }
\item[{{\bf lifdir\+\_\+t} $\ast$}]{D\+IR}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a85f2680ef77647d6f09ffbaf465879a2}{}\label{lifutils_8h_a85f2680ef77647d6f09ffbaf465879a2}


Pack Dire\+Entry\+Type data into bytes. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em B} & byte vector to pack data into \\
\hline
 & {\em } & \\
\hline
\end{DoxyParams}


Definition at line 241 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+image(), and lif\+\_\+writedir().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+\+Pack\+Volume@{lif\+\_\+\+Pack\+Volume}}
\index{lif\+\_\+\+Pack\+Volume@{lif\+\_\+\+Pack\+Volume}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+\+Pack\+Volume(uint8\+\_\+t $\ast$\+B, lifvol\+\_\+t $\ast$\+V)}{lif_PackVolume(uint8_t *B, lifvol_t *V)}}]{\setlength{\rightskip}{0pt plus 5cm}void lif\+\_\+\+Pack\+Volume (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{B, }
\item[{{\bf lifvol\+\_\+t} $\ast$}]{V}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a2ead31a7c8161db8ee528ff0cb7d7325}{}\label{lifutils_8h_a2ead31a7c8161db8ee528ff0cb7d7325}


Pack \hyperlink{structlifvol__t}{lifvol\+\_\+t} data into bytes. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em B} & byte vector to pack data into \\
\hline
 & {\em } & \\
\hline
\end{DoxyParams}


Definition at line 201 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+image().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+read@{lif\+\_\+read}}
\index{lif\+\_\+read@{lif\+\_\+read}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+read(char $\ast$name, void $\ast$buf, long offset, int bytes)}{lif_read(char *name, void *buf, long offset, int bytes)}}]{\setlength{\rightskip}{0pt plus 5cm}long lif\+\_\+read (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{name, }
\item[{void $\ast$}]{buf, }
\item[{long}]{offset, }
\item[{int}]{bytes}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_afd91a3610ac5b104097ac0686a56cefd}{}\label{lifutils_8h_afd91a3610ac5b104097ac0686a56cefd}


Read data from a L\+IF image File is closed after read W\+HY? We want time minimize file open to to avoid corruption on the S\+D\+C\+A\+RD. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$name} & file name of L\+IF image \\
\hline
\mbox{\tt in}  & {\em $\ast$buf} & read buffer \\
\hline
\mbox{\tt in}  & {\em offset} & read offset \\
\hline
\mbox{\tt in}  & {\em bytes} & number of bytes to read \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
number of bytes read -\/ OR -\/ -\/1 on error 
\end{DoxyReturn}
Initial file position 

Definition at line 377 of file lifutils.\+c.



Referenced by lif\+\_\+opendir(), and lif\+\_\+readdir().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+readdir@{lif\+\_\+readdir}}
\index{lif\+\_\+readdir@{lif\+\_\+readdir}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+readdir(lifdir\+\_\+t $\ast$\+D\+I\+R)}{lif_readdir(lifdir_t *DIR)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lifdirent\+\_\+t}$\ast$ lif\+\_\+readdir (
\begin{DoxyParamCaption}
\item[{{\bf lifdir\+\_\+t} $\ast$}]{D\+IR}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a470203a61f36e84f411fa42e965b731a}{}\label{lifutils_8h_a470203a61f36e84f411fa42e965b731a}


Open L\+IF directory for reading Modeled after Linux \hyperlink{posix_8c_a1508fedaef509d2976b43300306d1400}{readdir()} 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+D\+IR} & to L\+IF Volume/\+Diractoy structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{structlifdirent__t}{lifdirent\+\_\+t} filled with directory structure, or N\+U\+LL on error of end of Directory 
\end{DoxyReturn}


Definition at line 495 of file lifutils.\+c.



Referenced by lif\+\_\+dir(), and lif\+\_\+find\+\_\+free().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+\+S2B@{lif\+\_\+\+S2B}}
\index{lif\+\_\+\+S2B@{lif\+\_\+\+S2B}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+\+S2\+B(uint8\+\_\+t $\ast$\+B, uint8\+\_\+t $\ast$name, int size)}{lif_S2B(uint8_t *B, uint8_t *name, int size)}}]{\setlength{\rightskip}{0pt plus 5cm}void lif\+\_\+\+S2B (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{B, }
\item[{uint8\+\_\+t $\ast$}]{name, }
\item[{int}]{size}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a3581f407fe6c5cbe6a5db361fe49d387}{}\label{lifutils_8h_a3581f407fe6c5cbe6a5db361fe49d387}


string to L\+IF directory entry 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em $\ast$B} & L\+IF result \\
\hline
\mbox{\tt in}  & {\em $\ast$name} & string  void \\
\hline
\end{DoxyParams}


Definition at line 128 of file lifutils.\+c.



Referenced by lif\+\_\+\+Pack\+Dir(), and lif\+\_\+\+Pack\+Volume().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+stat@{lif\+\_\+stat}}
\index{lif\+\_\+stat@{lif\+\_\+stat}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+stat(char $\ast$name)}{lif_stat(char *name)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf stat\+\_\+t}$\ast$ lif\+\_\+stat (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{name}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_aabcbc42b059eb4dadaab5c63778547f8}{}\label{lifutils_8h_aabcbc42b059eb4dadaab5c63778547f8}


Stat a file. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$name} & file name of L\+IF image \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
struct stat $\ast$ 
\end{DoxyReturn}


Definition at line 353 of file lifutils.\+c.



Referenced by lif\+\_\+opendir().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+tests@{lif\+\_\+tests}}
\index{lif\+\_\+tests@{lif\+\_\+tests}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+tests(char $\ast$str)}{lif_tests(char *str)}}]{\setlength{\rightskip}{0pt plus 5cm}int lif\+\_\+tests (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{str}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a32dc220253a6108ad1d2f6b06318d326}{}\label{lifutils_8h_a32dc220253a6108ad1d2f6b06318d326}


L\+I\+F\+Guser tests. 

\begin{DoxyReturn}{Returns}
1 matched token, 0 if not 
\end{DoxyReturn}
format L\+IF image 

Definition at line 37 of file lifutils.\+c.



Referenced by task().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+time2lif@{lif\+\_\+time2lif}}
\index{lif\+\_\+time2lif@{lif\+\_\+time2lif}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+time2lif(uint8\+\_\+t $\ast$bcd, time\+\_\+t t)}{lif_time2lif(uint8_t *bcd, time_t t)}}]{\setlength{\rightskip}{0pt plus 5cm}void lif\+\_\+time2lif (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{bcd, }
\item[{{\bf time\+\_\+t}}]{t}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_af2e35296eec6eba5cb2d5c9964d0b738}{}\label{lifutils_8h_af2e35296eec6eba5cb2d5c9964d0b738}


U\+N\+IX time to L\+IF time format. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em bcd} & packed 6 byte B\+CD L\+IF time YY,MM,DD,HH,MM,SS \\
\hline
\mbox{\tt in}  & {\em t} & U\+N\+IX time\+\_\+t time value \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\hyperlink{time_8c_a32b1cbd925752f0cd61d202bbe204a69}{time()} in \hyperlink{time_8c}{time.\+c} 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 288 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+image().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+\+Un\+Pack\+Dir@{lif\+\_\+\+Un\+Pack\+Dir}}
\index{lif\+\_\+\+Un\+Pack\+Dir@{lif\+\_\+\+Un\+Pack\+Dir}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+\+Un\+Pack\+Dir(uint8\+\_\+t $\ast$\+B, lifdir\+\_\+t $\ast$\+D\+I\+R)}{lif_UnPackDir(uint8_t *B, lifdir_t *DIR)}}]{\setlength{\rightskip}{0pt plus 5cm}void lif\+\_\+\+Un\+Pack\+Dir (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{B, }
\item[{{\bf lifdir\+\_\+t} $\ast$}]{D\+IR}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_ab5a6d92768c95407e731ddded99040f6}{}\label{lifutils_8h_ab5a6d92768c95407e731ddded99040f6}


Un\+Pack \hyperlink{structlifdirent__t}{lifdirent\+\_\+t} data from bytes. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em B} & byte vector to extract data from \\
\hline
 & {\em } & \\
\hline
\end{DoxyParams}


Definition at line 257 of file lifutils.\+c.



Referenced by lif\+\_\+readdir().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+\+Un\+Pack\+Volume@{lif\+\_\+\+Un\+Pack\+Volume}}
\index{lif\+\_\+\+Un\+Pack\+Volume@{lif\+\_\+\+Un\+Pack\+Volume}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+\+Un\+Pack\+Volume(uint8\+\_\+t $\ast$\+B, lifvol\+\_\+t $\ast$\+V)}{lif_UnPackVolume(uint8_t *B, lifvol_t *V)}}]{\setlength{\rightskip}{0pt plus 5cm}void lif\+\_\+\+Un\+Pack\+Volume (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{B, }
\item[{{\bf lifvol\+\_\+t} $\ast$}]{V}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a199fe2e35d157581120008a78d26b4cd}{}\label{lifutils_8h_a199fe2e35d157581120008a78d26b4cd}


Un\+Pack \hyperlink{structlifvol__t}{lifvol\+\_\+t} data from bytes. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em B} & byte vector to pack data into \\
\hline
\mbox{\tt out}  & {\em V} & \hyperlink{structlifvol__t}{lifvol\+\_\+t} structure pointer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
null 
\end{DoxyReturn}


Definition at line 221 of file lifutils.\+c.



Referenced by lif\+\_\+opendir().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+user2lif@{lif\+\_\+user2lif}}
\index{lif\+\_\+user2lif@{lif\+\_\+user2lif}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+user2lif(char $\ast$userfile, lifdir\+\_\+t $\ast$\+D\+I\+R)}{lif_user2lif(char *userfile, lifdir_t *DIR)}}]{\setlength{\rightskip}{0pt plus 5cm}long lif\+\_\+user2lif (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{userfile, }
\item[{{\bf lifdir\+\_\+t} $\ast$}]{D\+IR}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a6e1ce15dd4303f2f22df70835e6c2af3}{}\label{lifutils_8h_a6e1ce15dd4303f2f22df70835e6c2af3}


Convert a user A\+S\+C\+II file into H\+P85 0x\+E010 L\+IF format We must know the convered file size B\+E\+F\+O\+RE writting So we must call this function T\+W\+I\+CE 1) find out how big the converted file is (\hyperlink{structDIR}{D\+IR} is N\+U\+LL) 2) Specify where to put it (\hyperlink{structDIR}{D\+IR} is set) 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em userfile} & User A\+S\+C\+II file source \\
\hline
\mbox{\tt in}  & {\em $\ast$\+D\+IR} & Where to write file if set (not N\+U\+LL) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size of L\+IF image in bytes, or -\/1 on error 
\end{DoxyReturn}
Read and process into image file

H\+P85 A\+S\+C\+II L\+IF records have a 3 byte header Byte 1\+: (0xdf = data) or (0xef = E\+OF) Byte 2\+: L\+SB number of bytes to next L\+IF record Byte 3\+: M\+SB nunber of bytes to next L\+IF record E\+OF has these 4 bytes 0xdf 0x00 0x00 0xef 0xff 0xff Example small file\+: 0xdf 0x05 0x00 \char`\"{}\+H\+P85\textbackslash{}r\char`\"{} 0xdf 0x00 0x00 0xef 0xff 0xff .... 

Definition at line 674 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+file().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+vol\+\_\+clear@{lif\+\_\+vol\+\_\+clear}}
\index{lif\+\_\+vol\+\_\+clear@{lif\+\_\+vol\+\_\+clear}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+vol\+\_\+clear(lifdir\+\_\+t $\ast$\+D\+I\+R)}{lif_vol_clear(lifdir_t *DIR)}}]{\setlength{\rightskip}{0pt plus 5cm}void lif\+\_\+vol\+\_\+clear (
\begin{DoxyParamCaption}
\item[{{\bf lifdir\+\_\+t} $\ast$}]{D\+IR}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a49a3bb535736ef9c2948a391a03cef4e}{}\label{lifutils_8h_a49a3bb535736ef9c2948a391a03cef4e}


Clear \hyperlink{structlifvol__t}{lifvol\+\_\+t} V structure in \hyperlink{structDIR}{D\+IR}. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+D\+IR} & pointer to \hyperlink{structDIR}{D\+IR} structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 320 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+image().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+write@{lif\+\_\+write}}
\index{lif\+\_\+write@{lif\+\_\+write}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+write(char $\ast$name, void $\ast$buf, long offset, int bytes)}{lif_write(char *name, void *buf, long offset, int bytes)}}]{\setlength{\rightskip}{0pt plus 5cm}int lif\+\_\+write (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{name, }
\item[{void $\ast$}]{buf, }
\item[{long}]{offset, }
\item[{int}]{bytes}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a6be20c8f3213656e828aae93b303d776}{}\label{lifutils_8h_a6be20c8f3213656e828aae93b303d776}


Write data to an L\+IF image File is closed, positioned to the end of file, after write Why? We want time minimize file open to to avoid corruption on the S\+D\+C\+A\+RD. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$name} & file name of L\+IF image \\
\hline
\mbox{\tt in}  & {\em $\ast$buf} & write buffer \\
\hline
\mbox{\tt in}  & {\em offset} & write offset \\
\hline
\mbox{\tt in}  & {\em bytes} & number of bytes to write \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/1 on error or number of bytes written 
\end{DoxyReturn}
Initial file position 

Definition at line 415 of file lifutils.\+c.



Referenced by lif\+\_\+user2lif(), and lif\+\_\+writedir().

\index{lifutils.\+h@{lifutils.\+h}!lif\+\_\+writedir@{lif\+\_\+writedir}}
\index{lif\+\_\+writedir@{lif\+\_\+writedir}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{lif\+\_\+writedir(lifdir\+\_\+t $\ast$\+D\+I\+R)}{lif_writedir(lifdir_t *DIR)}}]{\setlength{\rightskip}{0pt plus 5cm}long lif\+\_\+writedir (
\begin{DoxyParamCaption}
\item[{{\bf lifdir\+\_\+t} $\ast$}]{D\+IR}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8h_a5bde42f25a87ea3db74cf7b379022ddb}{}\label{lifutils_8h_a5bde42f25a87ea3db74cf7b379022ddb}


Write a director entry Modeled after Linux \hyperlink{posix_8c_a1508fedaef509d2976b43300306d1400}{readdir()} 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+D\+IR} & to L\+IF Volume/\+Diractoy structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
number of bytes written 
\end{DoxyReturn}


Definition at line 533 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+file().



\subsection{Variable Documentation}
\index{lifutils.\+h@{lifutils.\+h}!debuglevel@{debuglevel}}
\index{debuglevel@{debuglevel}!lifutils.\+h@{lifutils.\+h}}
\subsubsection[{\texorpdfstring{debuglevel}{debuglevel}}]{\setlength{\rightskip}{0pt plus 5cm}int debuglevel}\hypertarget{lifutils_8h_af219299ebad47daa6631415a8b41345a}{}\label{lifutils_8h_af219299ebad47daa6631415a8b41345a}


Debug flag -\/ used to log G\+P\+IB and emulator messages. 



Definition at line 32 of file gpib\+\_\+task.\+c.



Referenced by G\+P\+I\+B(), gpib\+\_\+error\+\_\+test(), gpib\+\_\+file\+\_\+init(), G\+P\+I\+B\+\_\+\+L\+I\+S\+T\+E\+N(), G\+P\+I\+B\+\_\+\+S\+E\+C\+O\+N\+D\+A\+R\+Y\+\_\+\+A\+D\+D\+R\+E\+S\+S(), G\+P\+I\+B\+\_\+\+T\+A\+L\+K(), gpib\+\_\+task(), listen\+\_\+cleanup(), and Send\+\_\+\+Identify().


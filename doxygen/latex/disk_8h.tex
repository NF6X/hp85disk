\hypertarget{disk_8h}{\section{fatfs/disk.h File Reference}
\label{disk_8h}\index{fatfs/disk.\-h@{fatfs/disk.\-h}}
}


Allocate, Free and display \hyperlink{structFILINFO}{F\-I\-L\-I\-N\-F\-O} structurs, getfattime(), display error messages.  


{\ttfamily \#include $<$hardware/hardware.\-h$>$}\\*
{\ttfamily \#include \char`\"{}ff.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}diskio.\-h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{disk_8h_a9e41ec7ad56bfc095ddb5e718280c4eb}{put\-\_\-rc} (int rc)
\begin{DoxyCompactList}\small\item\em display Fat\-Fs return code as ascii string \end{DoxyCompactList}\item 
\hyperlink{structFILINFO}{F\-I\-L\-I\-N\-F\-O} $\ast$ \hyperlink{disk_8h_afb13747c885845dd2b4011109364f83a}{fatfs\-\_\-alloc\-\_\-finfo} (int allocate)
\begin{DoxyCompactList}\small\item\em Allocate \hyperlink{structFILINFO}{F\-I\-L\-I\-N\-F\-O} structure and optional long file name buffer. \end{DoxyCompactList}\item 
void \hyperlink{disk_8h_a55f2dd92d9b43ef0094f0eb6a07956a8}{fatfs\-\_\-free\-\_\-filinfo} (\hyperlink{structFILINFO}{F\-I\-L\-I\-N\-F\-O} $\ast$finfo)
\begin{DoxyCompactList}\small\item\em Free a \hyperlink{structFILINFO}{F\-I\-L\-I\-N\-F\-O} structure and optional long file name buffer allocated by \hyperlink{disk_8c_a2aa2a2ec84f17f64a69196c9717fc3f4}{fatfs\-\_\-alloc\-\_\-finfo()} \end{DoxyCompactList}\item 
int \hyperlink{disk_8h_aeeaba07e5b5b3540ba023b7181b73467}{fatfs\-\_\-scan\-\_\-files} (char $\ast$path)
\begin{DoxyCompactList}\small\item\em Compute space used, number of directories and files contained under a specified directory. \end{DoxyCompactList}\item 
void \hyperlink{disk_8h_acc4f31b5dcf3d631bb9711c39c8a916f}{fatfs\-\_\-status} (char $\ast$ptr)
\begin{DoxyCompactList}\small\item\em Compute space used, number of directories and files contained used by a drive. \end{DoxyCompactList}\item 
void \hyperlink{disk_8h_adcd917b6190c42742129a67b304d9f1b}{fatfs\-\_\-filinfo\-\_\-list} (\hyperlink{structFILINFO}{F\-I\-L\-I\-N\-F\-O} $\ast$info)
\begin{DoxyCompactList}\small\item\em Display \hyperlink{structFILINFO}{F\-I\-L\-I\-N\-F\-O} structure in a readable format. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{integer_8h_ad342ac907eb044443153a22f964bf0af}{D\-W\-O\-R\-D} \hyperlink{disk_8h_a1e9c5ddcfdf89c9a42c96ee1d2196876}{Acc\-Size}
\begin{DoxyCompactList}\small\item\em Total file space used. \end{DoxyCompactList}\item 
\hyperlink{integer_8h_a197942eefa7db30960ae396d68339b97}{W\-O\-R\-D} \hyperlink{disk_8h_a8886578bc67fc71837328a1ee237d10c}{Acc\-Files}
\begin{DoxyCompactList}\small\item\em Total number or Files and Directories. \end{DoxyCompactList}\item 
\hyperlink{integer_8h_a197942eefa7db30960ae396d68339b97}{W\-O\-R\-D} \hyperlink{disk_8h_a4fb5ebb5ee82d1ddf3fdcf88329dd5d3}{Acc\-Dirs}
\item 
\hyperlink{structFATFS}{F\-A\-T\-F\-S} \hyperlink{disk_8h_aae427cc909a4b5993032934d85fd8c31}{Fatfs} \mbox{[}\hyperlink{ffconf_8h_a366da9a40c8ceb3103a6b72ca02b9969}{\-\_\-\-V\-O\-L\-U\-M\-E\-S}\mbox{]}
\begin{DoxyCompactList}\small\item\em Fat\-Fs Drive Volumes. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Allocate, Free and display \hyperlink{structFILINFO}{F\-I\-L\-I\-N\-F\-O} structurs, getfattime(), display error messages. \begin{DoxyParagraph}{Copyright \copyright{} 2015 Mike Gore, G\-P\-L License}

\end{DoxyParagraph}
\begin{DoxyParagraph}{Copyright \copyright{} 2013 Cha\-N.}

\end{DoxyParagraph}
\begin{DoxyParagraph}{Credit\-: part of Fat\-Fs avr example project (C)Cha\-N, 2013.}

\end{DoxyParagraph}
\begin{DoxyParagraph}{You are free to use this code under the terms of G\-P\-L}
please retain a copy of this notice in any code you use it in.
\end{DoxyParagraph}
This is free software\-: you can redistribute it and/or modify it under the terms of the G\-N\-U General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.

This software is distributed in the hope that it will be useful, but W\-I\-T\-H\-O\-U\-T A\-N\-Y W\-A\-R\-R\-A\-N\-T\-Y; without even the implied warranty of M\-E\-R\-C\-H\-A\-N\-T\-A\-B\-I\-L\-I\-T\-Y or F\-I\-T\-N\-E\-S\-S F\-O\-R A P\-A\-R\-T\-I\-C\-U\-L\-A\-R P\-U\-R\-P\-O\-S\-E. See the G\-N\-U General Public License for more details.

You should have received a copy of the G\-N\-U General Public License along with this program. If not, see \href{http://www.gnu.org/licenses/}{\tt http\-://www.\-gnu.\-org/licenses/}. 

Definition in file \hyperlink{disk_8h_source}{disk.\-h}.



\subsection{Function Documentation}
\hypertarget{disk_8h_afb13747c885845dd2b4011109364f83a}{\index{disk.\-h@{disk.\-h}!fatfs\-\_\-alloc\-\_\-finfo@{fatfs\-\_\-alloc\-\_\-finfo}}
\index{fatfs\-\_\-alloc\-\_\-finfo@{fatfs\-\_\-alloc\-\_\-finfo}!disk.h@{disk.\-h}}
\subsubsection[{fatfs\-\_\-alloc\-\_\-finfo}]{\setlength{\rightskip}{0pt plus 5cm}{\bf F\-I\-L\-I\-N\-F\-O}$\ast$ fatfs\-\_\-alloc\-\_\-finfo (
\begin{DoxyParamCaption}
\item[{int}]{allocate}
\end{DoxyParamCaption}
)}}\label{disk_8h_afb13747c885845dd2b4011109364f83a}


Allocate \hyperlink{structFILINFO}{F\-I\-L\-I\-N\-F\-O} structure and optional long file name buffer. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em allocate} & If allocate is true use safecalloc otherwise return static \-\_\-\-\_\-finfo \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See Also}
fatfs\-\_\-free\-\_\-finfo() 

\hyperlink{disk_8c_a2bfd82a70117cdb8941b6b0a2c069dbd}{fatfs\-\_\-scan\-\_\-files()} 

\hyperlink{fatfs__utils_8c_a257bdc077fb2c1a5aeeb5c1f3c1c2157}{fatfs\-\_\-ls()} 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
\hyperlink{structFILINFO}{F\-I\-L\-I\-N\-F\-O} $\ast$ on success 

N\-U\-L\-L on error 
\end{DoxyReturn}


Definition at line 169 of file disk.\-c.



Referenced by fatfs\-\_\-ls(), fatfs\-\_\-scan\-\_\-files(), fatfs\-\_\-stat(), and stat().

\hypertarget{disk_8h_adcd917b6190c42742129a67b304d9f1b}{\index{disk.\-h@{disk.\-h}!fatfs\-\_\-filinfo\-\_\-list@{fatfs\-\_\-filinfo\-\_\-list}}
\index{fatfs\-\_\-filinfo\-\_\-list@{fatfs\-\_\-filinfo\-\_\-list}!disk.h@{disk.\-h}}
\subsubsection[{fatfs\-\_\-filinfo\-\_\-list}]{\setlength{\rightskip}{0pt plus 5cm}void fatfs\-\_\-filinfo\-\_\-list (
\begin{DoxyParamCaption}
\item[{{\bf F\-I\-L\-I\-N\-F\-O} $\ast$}]{info}
\end{DoxyParamCaption}
)}}\label{disk_8h_adcd917b6190c42742129a67b304d9f1b}


Display \hyperlink{structFILINFO}{F\-I\-L\-I\-N\-F\-O} structure in a readable format. 


\begin{DoxyItemize}
\item Credit\-: part of Fat\-Fs avr example project (C)Cha\-N, 2013.
\item Example\-: \begin{DoxyVerb}/// ----A 2014/10/16 00:39        14    test2.txt  
/// D---- 2014/10/12 21:29         0          tmp 
/// \end{DoxyVerb}
 \begin{DoxyVerb}@param[in] : FILINFO pointer
@return  void  \end{DoxyVerb}
 
\end{DoxyItemize}

Definition at line 358 of file disk.\-c.



Referenced by fatfs\-\_\-ls(), and fatfs\-\_\-stat().

\hypertarget{disk_8h_a55f2dd92d9b43ef0094f0eb6a07956a8}{\index{disk.\-h@{disk.\-h}!fatfs\-\_\-free\-\_\-filinfo@{fatfs\-\_\-free\-\_\-filinfo}}
\index{fatfs\-\_\-free\-\_\-filinfo@{fatfs\-\_\-free\-\_\-filinfo}!disk.h@{disk.\-h}}
\subsubsection[{fatfs\-\_\-free\-\_\-filinfo}]{\setlength{\rightskip}{0pt plus 5cm}void fatfs\-\_\-free\-\_\-filinfo (
\begin{DoxyParamCaption}
\item[{{\bf F\-I\-L\-I\-N\-F\-O} $\ast$}]{finfo}
\end{DoxyParamCaption}
)}}\label{disk_8h_a55f2dd92d9b43ef0094f0eb6a07956a8}


Free a \hyperlink{structFILINFO}{F\-I\-L\-I\-N\-F\-O} structure and optional long file name buffer allocated by \hyperlink{disk_8c_a2aa2a2ec84f17f64a69196c9717fc3f4}{fatfs\-\_\-alloc\-\_\-finfo()} 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em finfo} & Fat\-Fs \hyperlink{structFILINFO}{F\-I\-L\-I\-N\-F\-O} pointer to free \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See Also}
\hyperlink{disk_8c_a2aa2a2ec84f17f64a69196c9717fc3f4}{fatfs\-\_\-alloc\-\_\-finfo()} 

\hyperlink{disk_8c_a2bfd82a70117cdb8941b6b0a2c069dbd}{fatfs\-\_\-scan\-\_\-files()} 

\hyperlink{fatfs__utils_8c_a257bdc077fb2c1a5aeeb5c1f3c1c2157}{fatfs\-\_\-ls()} 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 218 of file disk.\-c.

\hypertarget{disk_8h_aeeaba07e5b5b3540ba023b7181b73467}{\index{disk.\-h@{disk.\-h}!fatfs\-\_\-scan\-\_\-files@{fatfs\-\_\-scan\-\_\-files}}
\index{fatfs\-\_\-scan\-\_\-files@{fatfs\-\_\-scan\-\_\-files}!disk.h@{disk.\-h}}
\subsubsection[{fatfs\-\_\-scan\-\_\-files}]{\setlength{\rightskip}{0pt plus 5cm}int fatfs\-\_\-scan\-\_\-files (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{path}
\end{DoxyParamCaption}
)}}\label{disk_8h_aeeaba07e5b5b3540ba023b7181b73467}


Compute space used, number of directories and files contained under a specified directory. 


\begin{DoxyItemize}
\item Credit\-: part of Fat\-Fs avr example project (C)Cha\-N, 2013
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em path} & \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See Also}
\hyperlink{ff_8c_aeb607fa4b05d127d971ff40f143bac66}{f\-\_\-opendir()} 

\hyperlink{ff_8c_ae9647e339708c3d803db8de141986d96}{f\-\_\-readdir()} 

\hyperlink{disk_8c_a4fb5ebb5ee82d1ddf3fdcf88329dd5d3}{Acc\-Dirs}\-: Total number of directories 

\hyperlink{disk_8c_a8886578bc67fc71837328a1ee237d10c}{Acc\-Files}\-: Total number of Files 

\hyperlink{disk_8c_a1e9c5ddcfdf89c9a42c96ee1d2196876}{Acc\-Size}\-: Total size of all files 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
0 if no error 

Faf\-Fs error code 
\end{DoxyReturn}


Definition at line 246 of file disk.\-c.



Referenced by fatfs\-\_\-scan\-\_\-files(), and fatfs\-\_\-status().

\hypertarget{disk_8h_acc4f31b5dcf3d631bb9711c39c8a916f}{\index{disk.\-h@{disk.\-h}!fatfs\-\_\-status@{fatfs\-\_\-status}}
\index{fatfs\-\_\-status@{fatfs\-\_\-status}!disk.h@{disk.\-h}}
\subsubsection[{fatfs\-\_\-status}]{\setlength{\rightskip}{0pt plus 5cm}void fatfs\-\_\-status (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{ptr}
\end{DoxyParamCaption}
)}}\label{disk_8h_acc4f31b5dcf3d631bb9711c39c8a916f}


Compute space used, number of directories and files contained used by a drive. 


\begin{DoxyItemize}
\item Credit\-: part of Fat\-Fs avr example project (C)Cha\-N, 2013
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ptr} & Drive path like \char`\"{}/\char`\"{} \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See Also}
\hyperlink{ff_8c_a72098afbbef7ff8b850bacfc721d6bd0}{f\-\_\-getfree()} drive free space 

\hyperlink{disk_8c_a2bfd82a70117cdb8941b6b0a2c069dbd}{fatfs\-\_\-scan\-\_\-files()} 

\hyperlink{disk_8c_a4fb5ebb5ee82d1ddf3fdcf88329dd5d3}{Acc\-Dirs}\-: Total number of directories 

\hyperlink{disk_8c_a8886578bc67fc71837328a1ee237d10c}{Acc\-Files}\-: Total number of Files 

\hyperlink{disk_8c_a1e9c5ddcfdf89c9a42c96ee1d2196876}{Acc\-Size}\-: Total size of all files 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 307 of file disk.\-c.



Referenced by fatfs\-\_\-tests(), mmc\-\_\-init(), and mmc\-\_\-test().

\hypertarget{disk_8h_a9e41ec7ad56bfc095ddb5e718280c4eb}{\index{disk.\-h@{disk.\-h}!put\-\_\-rc@{put\-\_\-rc}}
\index{put\-\_\-rc@{put\-\_\-rc}!disk.h@{disk.\-h}}
\subsubsection[{put\-\_\-rc}]{\setlength{\rightskip}{0pt plus 5cm}void put\-\_\-rc (
\begin{DoxyParamCaption}
\item[{int}]{rc}
\end{DoxyParamCaption}
)}}\label{disk_8h_a9e41ec7ad56bfc095ddb5e718280c4eb}


display Fat\-Fs return code as ascii string 

Credit\-: Part of Fat\-Fs avr example project (C)Cha\-N, 2013 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em rc} & Fat\-Fs status return code \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 134 of file disk.\-c.



Referenced by dbf\-\_\-close(), dbf\-\_\-lseek(), dbf\-\_\-open(), dbf\-\_\-read(), dbf\-\_\-write(), fatfs\-\_\-cat(), fatfs\-\_\-cd(), fatfs\-\_\-copy(), fatfs\-\_\-create(), fatfs\-\_\-ls(), fatfs\-\_\-mkdir(), fatfs\-\_\-pwd(), fatfs\-\_\-rename(), fatfs\-\_\-rm(), fatfs\-\_\-rmdir(), fatfs\-\_\-stat(), fatfs\-\_\-status(), fatfs\-\_\-tests(), and mmc\-\_\-init().



\subsection{Variable Documentation}
\hypertarget{disk_8h_a4fb5ebb5ee82d1ddf3fdcf88329dd5d3}{\index{disk.\-h@{disk.\-h}!Acc\-Dirs@{Acc\-Dirs}}
\index{Acc\-Dirs@{Acc\-Dirs}!disk.h@{disk.\-h}}
\subsubsection[{Acc\-Dirs}]{\setlength{\rightskip}{0pt plus 5cm}{\bf W\-O\-R\-D} Acc\-Dirs}}\label{disk_8h_a4fb5ebb5ee82d1ddf3fdcf88329dd5d3}


Definition at line 150 of file disk.\-c.



Referenced by fatfs\-\_\-scan\-\_\-files(), and fatfs\-\_\-status().

\hypertarget{disk_8h_a8886578bc67fc71837328a1ee237d10c}{\index{disk.\-h@{disk.\-h}!Acc\-Files@{Acc\-Files}}
\index{Acc\-Files@{Acc\-Files}!disk.h@{disk.\-h}}
\subsubsection[{Acc\-Files}]{\setlength{\rightskip}{0pt plus 5cm}{\bf W\-O\-R\-D} Acc\-Files}}\label{disk_8h_a8886578bc67fc71837328a1ee237d10c}


Total number or Files and Directories. 



Definition at line 150 of file disk.\-c.



Referenced by fatfs\-\_\-scan\-\_\-files(), and fatfs\-\_\-status().

\hypertarget{disk_8h_a1e9c5ddcfdf89c9a42c96ee1d2196876}{\index{disk.\-h@{disk.\-h}!Acc\-Size@{Acc\-Size}}
\index{Acc\-Size@{Acc\-Size}!disk.h@{disk.\-h}}
\subsubsection[{Acc\-Size}]{\setlength{\rightskip}{0pt plus 5cm}{\bf D\-W\-O\-R\-D} Acc\-Size}}\label{disk_8h_a1e9c5ddcfdf89c9a42c96ee1d2196876}


Total file space used. 



Definition at line 147 of file disk.\-c.



Referenced by fatfs\-\_\-scan\-\_\-files(), and fatfs\-\_\-status().

\hypertarget{disk_8h_aae427cc909a4b5993032934d85fd8c31}{\index{disk.\-h@{disk.\-h}!Fatfs@{Fatfs}}
\index{Fatfs@{Fatfs}!disk.h@{disk.\-h}}
\subsubsection[{Fatfs}]{\setlength{\rightskip}{0pt plus 5cm}{\bf F\-A\-T\-F\-S} Fatfs\mbox{[}{\bf \-\_\-\-V\-O\-L\-U\-M\-E\-S}\mbox{]}}}\label{disk_8h_aae427cc909a4b5993032934d85fd8c31}


Fat\-Fs Drive Volumes. 



Definition at line 34 of file disk.\-c.



Referenced by mmc\-\_\-init().


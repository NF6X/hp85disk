\hypertarget{amigo_8c}{}\section{gpib/amigo.c File Reference}
\label{amigo_8c}\index{gpib/amigo.\+c@{gpib/amigo.\+c}}


A\+M\+I\+GO disk emulator for H\+P85 disk emulator project for A\+V\+R8.  


{\ttfamily \#include \char`\"{}user\+\_\+config.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}defines.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}gpib.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}gpib\+\_\+hal.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}gpib\+\_\+task.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}amigo.\+h\char`\"{}}\\*
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{amigo_8c_a7d3869d64c8e26be25a286779419d335}{A\+M\+I\+G\+O\+\_\+states} \{ \\*
\hyperlink{amigo_8c_a7d3869d64c8e26be25a286779419d335a16e8a4c64c13580e21ae210693639080}{A\+M\+I\+G\+O\+\_\+\+I\+D\+LE} = 0, 
\hyperlink{amigo_8c_a7d3869d64c8e26be25a286779419d335a726e15230f0e429fbd406be79ee5ccfe}{A\+M\+I\+G\+O\+\_\+\+R\+E\+Q\+U\+E\+S\+T\+\_\+\+S\+T\+A\+T\+US}, 
\hyperlink{amigo_8c_a7d3869d64c8e26be25a286779419d335a6fd2f3e3f356ce8341f1c4f42c220978}{A\+M\+I\+G\+O\+\_\+\+R\+E\+Q\+U\+E\+S\+T\+\_\+\+S\+T\+A\+T\+U\+S\+\_\+\+U\+N\+B\+U\+F\+F\+E\+R\+ED}, 
\hyperlink{amigo_8c_a7d3869d64c8e26be25a286779419d335a6d7ced0a2fc673da1446a166df5ef08f}{A\+M\+I\+G\+O\+\_\+\+R\+E\+Q\+U\+E\+S\+T\+\_\+\+S\+T\+A\+T\+U\+S\+\_\+\+B\+U\+F\+F\+E\+R\+ED}, 
\\*
\hyperlink{amigo_8c_a7d3869d64c8e26be25a286779419d335ada8c32a13401a829a93c24d3d8ca7399}{A\+M\+I\+G\+O\+\_\+\+R\+E\+Q\+U\+E\+S\+T\+\_\+\+L\+O\+G\+I\+C\+A\+L\+\_\+\+A\+D\+D\+R\+E\+SS}, 
\hyperlink{amigo_8c_a7d3869d64c8e26be25a286779419d335a41d06e42ceb462144f99ad01121404f8}{A\+M\+I\+G\+O\+\_\+\+C\+O\+L\+D\+\_\+\+L\+O\+A\+D\+\_\+\+R\+E\+AD}, 
\hyperlink{amigo_8c_a7d3869d64c8e26be25a286779419d335abbf5f7db2c80c4455ae50c55fae5f8fa}{A\+M\+I\+G\+O\+\_\+\+R\+E\+A\+D\+\_\+\+U\+N\+B\+U\+F\+F\+E\+R\+ED}, 
\hyperlink{amigo_8c_a7d3869d64c8e26be25a286779419d335a00c4be94621bda3820804fc719791923}{A\+M\+I\+G\+O\+\_\+\+R\+E\+A\+D\+\_\+\+B\+U\+F\+F\+E\+R\+ED}, 
\\*
\hyperlink{amigo_8c_a7d3869d64c8e26be25a286779419d335a9a43858ee7b188686415fa08d20702c6}{A\+M\+I\+G\+O\+\_\+\+W\+R\+I\+T\+E\+\_\+\+U\+N\+B\+U\+F\+F\+E\+R\+ED}, 
\hyperlink{amigo_8c_a7d3869d64c8e26be25a286779419d335a39479dd4c934ff0cc21697e3ec8b8d29}{A\+M\+I\+G\+O\+\_\+\+W\+R\+I\+T\+E\+\_\+\+B\+U\+F\+F\+E\+R\+ED}, 
\hyperlink{amigo_8c_a7d3869d64c8e26be25a286779419d335a13ebb564a90a98115d1ad7ac75209f40}{A\+M\+I\+G\+O\+\_\+\+I\+N\+I\+T\+I\+A\+L\+I\+ZE}
 \}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{amigo_8c_a0eec1cf4ce108a8bc0c5831b0bb149b7}{amigo\+\_\+init} ()
\begin{DoxyCompactList}\small\item\em Initialize Amigo state machine, Disk Position, Error status. \end{DoxyCompactList}\item 
int \hyperlink{amigo_8c_a4c8b9f945c52bab66fa4c7aaac5df625}{amigo\+\_\+request\+\_\+logical\+\_\+address} ()
\begin{DoxyCompactList}\small\item\em Set current address in A\+M\+I\+G\+O\+State.\+logical\+\_\+address\mbox{[}\mbox{]}. \end{DoxyCompactList}\item 
int \hyperlink{amigo_8c_ac3755431f029d6bf480c5d2eceaca7e6}{amigo\+\_\+request\+\_\+status} ()
\begin{DoxyCompactList}\small\item\em Set drive status in A\+M\+I\+G\+O\+State.\+status\mbox{[}\mbox{]}. \end{DoxyCompactList}\item 
int \hyperlink{amigo_8c_a288fab8221af2cef3cd52be5db8bc834}{amigo\+\_\+send\+\_\+logical\+\_\+address} ()
\begin{DoxyCompactList}\small\item\em Send current address in A\+M\+I\+G\+O\+State.\+logical\+\_\+address\mbox{[}\mbox{]}. \end{DoxyCompactList}\item 
int \hyperlink{amigo_8c_a5469dfd99a532f1324999a77256d91a8}{amigo\+\_\+send\+\_\+status} ()
\begin{DoxyCompactList}\small\item\em Send drive status in A\+M\+I\+G\+O\+State.\+status\mbox{[}\mbox{]}. \end{DoxyCompactList}\item 
static \hyperlink{integer_8h_ad342ac907eb044443153a22f964bf0af}{D\+W\+O\+RD} \hyperlink{amigo_8c_ab3e935afb5accc656f08aa5f16881c09}{amigo\+\_\+chs\+\_\+to\+\_\+logical} (\hyperlink{structAMIGOStateType}{A\+M\+I\+G\+O\+State\+Type} $\ast$p, char $\ast$msg)
\begin{DoxyCompactList}\small\item\em Convert Drive C\+HS position to offset. \end{DoxyCompactList}\item 
static int \hyperlink{amigo_8c_a2dfde05c482503d3604e87be61aaa5bd}{amigo\+\_\+overflow\+\_\+check} (\hyperlink{structAMIGOStateType}{A\+M\+I\+G\+O\+State\+Type} $\ast$p, char $\ast$msg)
\begin{DoxyCompactList}\small\item\em Check for C\+HS position overflow. \end{DoxyCompactList}\item 
int \hyperlink{amigo_8c_ae6c9b56f7f0179eecd6d57c2844bc56c}{amigo\+\_\+increment} (char $\ast$msg)
\begin{DoxyCompactList}\small\item\em Increment sector if it will not overflow. \end{DoxyCompactList}\item 
int \hyperlink{amigo_8c_a17be7a7fc76ab2dc6018801be855e1d5}{amigo\+\_\+seek} (\hyperlink{structAMIGOStateType}{A\+M\+I\+G\+O\+State\+Type} $\ast$p)
\begin{DoxyCompactList}\small\item\em Seek to the position held in the disk structure. \end{DoxyCompactList}\item 
int \hyperlink{amigo_8c_ab08912bf94dc6e8fbe87990ff41f46f0}{amigo\+\_\+verify} (uint16\+\_\+t sectors)
\begin{DoxyCompactList}\small\item\em Verify Disk Sectors at current position. \end{DoxyCompactList}\item 
int \hyperlink{amigo_8c_a85a3d11b8dd534100df603e4c3514c92}{amigo\+\_\+format} (uint8\+\_\+t override, uint8\+\_\+t interleave, uint8\+\_\+t db)
\begin{DoxyCompactList}\small\item\em Format Disk. \end{DoxyCompactList}\item 
int \hyperlink{amigo_8c_a825aa1ed704bfabe55d37787234a273d}{amigo\+\_\+buffered\+\_\+read} ()
\begin{DoxyCompactList}\small\item\em Do a buffered read of the current sector. \end{DoxyCompactList}\item 
int \hyperlink{amigo_8c_ac92648301b959f38296610669487727a}{amigo\+\_\+buffered\+\_\+write} ()
\begin{DoxyCompactList}\small\item\em Do a buffered write of the current sector. \end{DoxyCompactList}\item 
int \hyperlink{amigo_8c_a3ab896c5b3810e84072107a6bcf896c9}{amigo\+\_\+cmd\+\_\+dsj} ()
\begin{DoxyCompactList}\small\item\em Send D\+SJ. \end{DoxyCompactList}\item 
int \hyperlink{amigo_8c_ac919a69a536ece0514b8c60df5208868}{amigo\+\_\+cmd\+\_\+wakeup} ()
\begin{DoxyCompactList}\small\item\em Wakeup (undocumented), just enable P\+PR response. \end{DoxyCompactList}\item 
int \hyperlink{amigo_8c_a50637caffe2f5419fd06b70a66d26176}{amigo\+\_\+cmd\+\_\+clear} ()
\begin{DoxyCompactList}\small\item\em Response to selected device clear or all clear. \end{DoxyCompactList}\item 
int \hyperlink{amigo_8c_a6c99539773ae8be3bd4d3bd7493c16d6}{amigo\+\_\+todo\+\_\+op} (uint8\+\_\+t \hyperlink{gpib_8h_a25538708e408bbc21b380cb6f709f5d8}{secondary}, uint8\+\_\+t opcode, int len)
\begin{DoxyCompactList}\small\item\em Report any Unimplimented commands with Op Codes. \end{DoxyCompactList}\item 
int \hyperlink{amigo_8c_a437bef06e567b3f6728f2519b9065354}{amigo\+\_\+todo} (uint8\+\_\+t \hyperlink{gpib_8h_a25538708e408bbc21b380cb6f709f5d8}{secondary})
\begin{DoxyCompactList}\small\item\em Report any Unimplimented commands. \end{DoxyCompactList}\item 
int \hyperlink{amigo_8c_a2fc6f1413199d33d2b32e675dd45e181}{Amigo\+\_\+\+Command} (int \hyperlink{gpib_8h_a25538708e408bbc21b380cb6f709f5d8}{secondary})
\begin{DoxyCompactList}\small\item\em Amigo Command and OP Code Processing functions. \end{DoxyCompactList}\item 
int \hyperlink{amigo_8c_ad7271e45e6b3bb6edef42da4ad5bb25a}{Amigo\+\_\+\+Execute} (int \hyperlink{gpib_8h_a25538708e408bbc21b380cb6f709f5d8}{secondary})
\begin{DoxyCompactList}\small\item\em Amigo Execute command processing. \end{DoxyCompactList}\item 
int \hyperlink{amigo_8c_a77b7d46bd469c79c73696a9ae2a3543d}{A\+M\+I\+G\+O\+\_\+\+C\+O\+M\+M\+A\+N\+DS} (uint8\+\_\+t ch)
\begin{DoxyCompactList}\small\item\em A\+M\+I\+GO Command state processing. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
uint8\+\_\+t \hyperlink{amigo_8c_acef501d1e292f230efac5ed0cddf90e8}{talking}
\begin{DoxyCompactList}\small\item\em gpib talk address \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{amigo_8c_a906eb6f6a81521d91f73f9ab2e03b02e}{listening}
\begin{DoxyCompactList}\small\item\em gpib listen address \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
A\+M\+I\+GO disk emulator for H\+P85 disk emulator project for A\+V\+R8. 

\begin{DoxyParagraph}{Edit History -\/ \mbox{[}1.0\mbox{]} \mbox{[}Mike Gore\mbox{]} Initial revision of file.}

\end{DoxyParagraph}
\begin{DoxyParagraph}{Copyright \copyright{} 2014 Mike Gore, Inc. All rights reserved.}

\end{DoxyParagraph}
\begin{DoxyParagraph}{Based on work by Anders Gustafsson.}

\end{DoxyParagraph}
\begin{DoxyParagraph}{Copyright \copyright{} 2014 Anders Gustafsson All rights reserved..}

\end{DoxyParagraph}


\subsection{Enumeration Type Documentation}
\index{amigo.\+c@{amigo.\+c}!A\+M\+I\+G\+O\+\_\+states@{A\+M\+I\+G\+O\+\_\+states}}
\index{A\+M\+I\+G\+O\+\_\+states@{A\+M\+I\+G\+O\+\_\+states}!amigo.\+c@{amigo.\+c}}
\subsubsection[{\texorpdfstring{A\+M\+I\+G\+O\+\_\+states}{AMIGO_states}}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf A\+M\+I\+G\+O\+\_\+states}}\hypertarget{amigo_8c_a7d3869d64c8e26be25a286779419d335}{}\label{amigo_8c_a7d3869d64c8e26be25a286779419d335}
\begin{Desc}
\item[Enumerator]\par
\begin{description}
\index{A\+M\+I\+G\+O\+\_\+\+I\+D\+LE@{A\+M\+I\+G\+O\+\_\+\+I\+D\+LE}!amigo.\+c@{amigo.\+c}}\index{amigo.\+c@{amigo.\+c}!A\+M\+I\+G\+O\+\_\+\+I\+D\+LE@{A\+M\+I\+G\+O\+\_\+\+I\+D\+LE}}\item[{\em 
A\+M\+I\+G\+O\+\_\+\+I\+D\+LE\hypertarget{amigo_8c_a7d3869d64c8e26be25a286779419d335a16e8a4c64c13580e21ae210693639080}{}\label{amigo_8c_a7d3869d64c8e26be25a286779419d335a16e8a4c64c13580e21ae210693639080}
}]\index{A\+M\+I\+G\+O\+\_\+\+R\+E\+Q\+U\+E\+S\+T\+\_\+\+S\+T\+A\+T\+US@{A\+M\+I\+G\+O\+\_\+\+R\+E\+Q\+U\+E\+S\+T\+\_\+\+S\+T\+A\+T\+US}!amigo.\+c@{amigo.\+c}}\index{amigo.\+c@{amigo.\+c}!A\+M\+I\+G\+O\+\_\+\+R\+E\+Q\+U\+E\+S\+T\+\_\+\+S\+T\+A\+T\+US@{A\+M\+I\+G\+O\+\_\+\+R\+E\+Q\+U\+E\+S\+T\+\_\+\+S\+T\+A\+T\+US}}\item[{\em 
A\+M\+I\+G\+O\+\_\+\+R\+E\+Q\+U\+E\+S\+T\+\_\+\+S\+T\+A\+T\+US\hypertarget{amigo_8c_a7d3869d64c8e26be25a286779419d335a726e15230f0e429fbd406be79ee5ccfe}{}\label{amigo_8c_a7d3869d64c8e26be25a286779419d335a726e15230f0e429fbd406be79ee5ccfe}
}]\index{A\+M\+I\+G\+O\+\_\+\+R\+E\+Q\+U\+E\+S\+T\+\_\+\+S\+T\+A\+T\+U\+S\+\_\+\+U\+N\+B\+U\+F\+F\+E\+R\+ED@{A\+M\+I\+G\+O\+\_\+\+R\+E\+Q\+U\+E\+S\+T\+\_\+\+S\+T\+A\+T\+U\+S\+\_\+\+U\+N\+B\+U\+F\+F\+E\+R\+ED}!amigo.\+c@{amigo.\+c}}\index{amigo.\+c@{amigo.\+c}!A\+M\+I\+G\+O\+\_\+\+R\+E\+Q\+U\+E\+S\+T\+\_\+\+S\+T\+A\+T\+U\+S\+\_\+\+U\+N\+B\+U\+F\+F\+E\+R\+ED@{A\+M\+I\+G\+O\+\_\+\+R\+E\+Q\+U\+E\+S\+T\+\_\+\+S\+T\+A\+T\+U\+S\+\_\+\+U\+N\+B\+U\+F\+F\+E\+R\+ED}}\item[{\em 
A\+M\+I\+G\+O\+\_\+\+R\+E\+Q\+U\+E\+S\+T\+\_\+\+S\+T\+A\+T\+U\+S\+\_\+\+U\+N\+B\+U\+F\+F\+E\+R\+ED\hypertarget{amigo_8c_a7d3869d64c8e26be25a286779419d335a6fd2f3e3f356ce8341f1c4f42c220978}{}\label{amigo_8c_a7d3869d64c8e26be25a286779419d335a6fd2f3e3f356ce8341f1c4f42c220978}
}]\index{A\+M\+I\+G\+O\+\_\+\+R\+E\+Q\+U\+E\+S\+T\+\_\+\+S\+T\+A\+T\+U\+S\+\_\+\+B\+U\+F\+F\+E\+R\+ED@{A\+M\+I\+G\+O\+\_\+\+R\+E\+Q\+U\+E\+S\+T\+\_\+\+S\+T\+A\+T\+U\+S\+\_\+\+B\+U\+F\+F\+E\+R\+ED}!amigo.\+c@{amigo.\+c}}\index{amigo.\+c@{amigo.\+c}!A\+M\+I\+G\+O\+\_\+\+R\+E\+Q\+U\+E\+S\+T\+\_\+\+S\+T\+A\+T\+U\+S\+\_\+\+B\+U\+F\+F\+E\+R\+ED@{A\+M\+I\+G\+O\+\_\+\+R\+E\+Q\+U\+E\+S\+T\+\_\+\+S\+T\+A\+T\+U\+S\+\_\+\+B\+U\+F\+F\+E\+R\+ED}}\item[{\em 
A\+M\+I\+G\+O\+\_\+\+R\+E\+Q\+U\+E\+S\+T\+\_\+\+S\+T\+A\+T\+U\+S\+\_\+\+B\+U\+F\+F\+E\+R\+ED\hypertarget{amigo_8c_a7d3869d64c8e26be25a286779419d335a6d7ced0a2fc673da1446a166df5ef08f}{}\label{amigo_8c_a7d3869d64c8e26be25a286779419d335a6d7ced0a2fc673da1446a166df5ef08f}
}]\index{A\+M\+I\+G\+O\+\_\+\+R\+E\+Q\+U\+E\+S\+T\+\_\+\+L\+O\+G\+I\+C\+A\+L\+\_\+\+A\+D\+D\+R\+E\+SS@{A\+M\+I\+G\+O\+\_\+\+R\+E\+Q\+U\+E\+S\+T\+\_\+\+L\+O\+G\+I\+C\+A\+L\+\_\+\+A\+D\+D\+R\+E\+SS}!amigo.\+c@{amigo.\+c}}\index{amigo.\+c@{amigo.\+c}!A\+M\+I\+G\+O\+\_\+\+R\+E\+Q\+U\+E\+S\+T\+\_\+\+L\+O\+G\+I\+C\+A\+L\+\_\+\+A\+D\+D\+R\+E\+SS@{A\+M\+I\+G\+O\+\_\+\+R\+E\+Q\+U\+E\+S\+T\+\_\+\+L\+O\+G\+I\+C\+A\+L\+\_\+\+A\+D\+D\+R\+E\+SS}}\item[{\em 
A\+M\+I\+G\+O\+\_\+\+R\+E\+Q\+U\+E\+S\+T\+\_\+\+L\+O\+G\+I\+C\+A\+L\+\_\+\+A\+D\+D\+R\+E\+SS\hypertarget{amigo_8c_a7d3869d64c8e26be25a286779419d335ada8c32a13401a829a93c24d3d8ca7399}{}\label{amigo_8c_a7d3869d64c8e26be25a286779419d335ada8c32a13401a829a93c24d3d8ca7399}
}]\index{A\+M\+I\+G\+O\+\_\+\+C\+O\+L\+D\+\_\+\+L\+O\+A\+D\+\_\+\+R\+E\+AD@{A\+M\+I\+G\+O\+\_\+\+C\+O\+L\+D\+\_\+\+L\+O\+A\+D\+\_\+\+R\+E\+AD}!amigo.\+c@{amigo.\+c}}\index{amigo.\+c@{amigo.\+c}!A\+M\+I\+G\+O\+\_\+\+C\+O\+L\+D\+\_\+\+L\+O\+A\+D\+\_\+\+R\+E\+AD@{A\+M\+I\+G\+O\+\_\+\+C\+O\+L\+D\+\_\+\+L\+O\+A\+D\+\_\+\+R\+E\+AD}}\item[{\em 
A\+M\+I\+G\+O\+\_\+\+C\+O\+L\+D\+\_\+\+L\+O\+A\+D\+\_\+\+R\+E\+AD\hypertarget{amigo_8c_a7d3869d64c8e26be25a286779419d335a41d06e42ceb462144f99ad01121404f8}{}\label{amigo_8c_a7d3869d64c8e26be25a286779419d335a41d06e42ceb462144f99ad01121404f8}
}]\index{A\+M\+I\+G\+O\+\_\+\+R\+E\+A\+D\+\_\+\+U\+N\+B\+U\+F\+F\+E\+R\+ED@{A\+M\+I\+G\+O\+\_\+\+R\+E\+A\+D\+\_\+\+U\+N\+B\+U\+F\+F\+E\+R\+ED}!amigo.\+c@{amigo.\+c}}\index{amigo.\+c@{amigo.\+c}!A\+M\+I\+G\+O\+\_\+\+R\+E\+A\+D\+\_\+\+U\+N\+B\+U\+F\+F\+E\+R\+ED@{A\+M\+I\+G\+O\+\_\+\+R\+E\+A\+D\+\_\+\+U\+N\+B\+U\+F\+F\+E\+R\+ED}}\item[{\em 
A\+M\+I\+G\+O\+\_\+\+R\+E\+A\+D\+\_\+\+U\+N\+B\+U\+F\+F\+E\+R\+ED\hypertarget{amigo_8c_a7d3869d64c8e26be25a286779419d335abbf5f7db2c80c4455ae50c55fae5f8fa}{}\label{amigo_8c_a7d3869d64c8e26be25a286779419d335abbf5f7db2c80c4455ae50c55fae5f8fa}
}]\index{A\+M\+I\+G\+O\+\_\+\+R\+E\+A\+D\+\_\+\+B\+U\+F\+F\+E\+R\+ED@{A\+M\+I\+G\+O\+\_\+\+R\+E\+A\+D\+\_\+\+B\+U\+F\+F\+E\+R\+ED}!amigo.\+c@{amigo.\+c}}\index{amigo.\+c@{amigo.\+c}!A\+M\+I\+G\+O\+\_\+\+R\+E\+A\+D\+\_\+\+B\+U\+F\+F\+E\+R\+ED@{A\+M\+I\+G\+O\+\_\+\+R\+E\+A\+D\+\_\+\+B\+U\+F\+F\+E\+R\+ED}}\item[{\em 
A\+M\+I\+G\+O\+\_\+\+R\+E\+A\+D\+\_\+\+B\+U\+F\+F\+E\+R\+ED\hypertarget{amigo_8c_a7d3869d64c8e26be25a286779419d335a00c4be94621bda3820804fc719791923}{}\label{amigo_8c_a7d3869d64c8e26be25a286779419d335a00c4be94621bda3820804fc719791923}
}]\index{A\+M\+I\+G\+O\+\_\+\+W\+R\+I\+T\+E\+\_\+\+U\+N\+B\+U\+F\+F\+E\+R\+ED@{A\+M\+I\+G\+O\+\_\+\+W\+R\+I\+T\+E\+\_\+\+U\+N\+B\+U\+F\+F\+E\+R\+ED}!amigo.\+c@{amigo.\+c}}\index{amigo.\+c@{amigo.\+c}!A\+M\+I\+G\+O\+\_\+\+W\+R\+I\+T\+E\+\_\+\+U\+N\+B\+U\+F\+F\+E\+R\+ED@{A\+M\+I\+G\+O\+\_\+\+W\+R\+I\+T\+E\+\_\+\+U\+N\+B\+U\+F\+F\+E\+R\+ED}}\item[{\em 
A\+M\+I\+G\+O\+\_\+\+W\+R\+I\+T\+E\+\_\+\+U\+N\+B\+U\+F\+F\+E\+R\+ED\hypertarget{amigo_8c_a7d3869d64c8e26be25a286779419d335a9a43858ee7b188686415fa08d20702c6}{}\label{amigo_8c_a7d3869d64c8e26be25a286779419d335a9a43858ee7b188686415fa08d20702c6}
}]\index{A\+M\+I\+G\+O\+\_\+\+W\+R\+I\+T\+E\+\_\+\+B\+U\+F\+F\+E\+R\+ED@{A\+M\+I\+G\+O\+\_\+\+W\+R\+I\+T\+E\+\_\+\+B\+U\+F\+F\+E\+R\+ED}!amigo.\+c@{amigo.\+c}}\index{amigo.\+c@{amigo.\+c}!A\+M\+I\+G\+O\+\_\+\+W\+R\+I\+T\+E\+\_\+\+B\+U\+F\+F\+E\+R\+ED@{A\+M\+I\+G\+O\+\_\+\+W\+R\+I\+T\+E\+\_\+\+B\+U\+F\+F\+E\+R\+ED}}\item[{\em 
A\+M\+I\+G\+O\+\_\+\+W\+R\+I\+T\+E\+\_\+\+B\+U\+F\+F\+E\+R\+ED\hypertarget{amigo_8c_a7d3869d64c8e26be25a286779419d335a39479dd4c934ff0cc21697e3ec8b8d29}{}\label{amigo_8c_a7d3869d64c8e26be25a286779419d335a39479dd4c934ff0cc21697e3ec8b8d29}
}]\index{A\+M\+I\+G\+O\+\_\+\+I\+N\+I\+T\+I\+A\+L\+I\+ZE@{A\+M\+I\+G\+O\+\_\+\+I\+N\+I\+T\+I\+A\+L\+I\+ZE}!amigo.\+c@{amigo.\+c}}\index{amigo.\+c@{amigo.\+c}!A\+M\+I\+G\+O\+\_\+\+I\+N\+I\+T\+I\+A\+L\+I\+ZE@{A\+M\+I\+G\+O\+\_\+\+I\+N\+I\+T\+I\+A\+L\+I\+ZE}}\item[{\em 
A\+M\+I\+G\+O\+\_\+\+I\+N\+I\+T\+I\+A\+L\+I\+ZE\hypertarget{amigo_8c_a7d3869d64c8e26be25a286779419d335a13ebb564a90a98115d1ad7ac75209f40}{}\label{amigo_8c_a7d3869d64c8e26be25a286779419d335a13ebb564a90a98115d1ad7ac75209f40}
}]\end{description}
\end{Desc}


Definition at line 153 of file amigo.\+c.



\subsection{Function Documentation}
\index{amigo.\+c@{amigo.\+c}!amigo\+\_\+buffered\+\_\+read@{amigo\+\_\+buffered\+\_\+read}}
\index{amigo\+\_\+buffered\+\_\+read@{amigo\+\_\+buffered\+\_\+read}!amigo.\+c@{amigo.\+c}}
\subsubsection[{\texorpdfstring{amigo\+\_\+buffered\+\_\+read()}{amigo_buffered_read()}}]{\setlength{\rightskip}{0pt plus 5cm}int amigo\+\_\+buffered\+\_\+read (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{amigo_8c_a825aa1ed704bfabe55d37787234a273d}{}\label{amigo_8c_a825aa1ed704bfabe55d37787234a273d}


Do a buffered read of the current sector. 


\begin{DoxyItemize}
\item Reference\+: A33. \begin{DoxyReturn}{Returns}
0 ok 

G\+P\+IB Errors status,Sets dsj and Amigo\+\_\+errors 
\end{DoxyReturn}

\end{DoxyItemize}\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000004}{Todo}]Do we fail on overflow ? currently djs is set -\/ do we want to report that now ? \end{DoxyRefDesc}


Definition at line 563 of file amigo.\+c.



Referenced by Amigo\+\_\+\+Execute().

\index{amigo.\+c@{amigo.\+c}!amigo\+\_\+buffered\+\_\+write@{amigo\+\_\+buffered\+\_\+write}}
\index{amigo\+\_\+buffered\+\_\+write@{amigo\+\_\+buffered\+\_\+write}!amigo.\+c@{amigo.\+c}}
\subsubsection[{\texorpdfstring{amigo\+\_\+buffered\+\_\+write()}{amigo_buffered_write()}}]{\setlength{\rightskip}{0pt plus 5cm}int amigo\+\_\+buffered\+\_\+write (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{amigo_8c_ac92648301b959f38296610669487727a}{}\label{amigo_8c_ac92648301b959f38296610669487727a}


Do a buffered write of the current sector. 


\begin{DoxyItemize}
\item Reference\+: A43. \begin{DoxyReturn}{Returns}
0 ok 

G\+P\+IB Errors status,Sets dsj and Amigo\+\_\+errors 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 629 of file amigo.\+c.



Referenced by Amigo\+\_\+\+Execute().

\index{amigo.\+c@{amigo.\+c}!amigo\+\_\+chs\+\_\+to\+\_\+logical@{amigo\+\_\+chs\+\_\+to\+\_\+logical}}
\index{amigo\+\_\+chs\+\_\+to\+\_\+logical@{amigo\+\_\+chs\+\_\+to\+\_\+logical}!amigo.\+c@{amigo.\+c}}
\subsubsection[{\texorpdfstring{amigo\+\_\+chs\+\_\+to\+\_\+logical(\+A\+M\+I\+G\+O\+State\+Type $\ast$p, char $\ast$msg)}{amigo_chs_to_logical(AMIGOStateType *p, char *msg)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf D\+W\+O\+RD} amigo\+\_\+chs\+\_\+to\+\_\+logical (
\begin{DoxyParamCaption}
\item[{{\bf A\+M\+I\+G\+O\+State\+Type} $\ast$}]{p, }
\item[{char $\ast$}]{msg}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{amigo_8c_ab3e935afb5accc656f08aa5f16881c09}{}\label{amigo_8c_ab3e935afb5accc656f08aa5f16881c09}


Convert Drive C\+HS position to offset. 


\begin{DoxyItemize}
\item Reference\+: A15-\/\+A19. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em p} & Disk Layout \\
\hline
\mbox{\tt in}  & {\em msg} & user message on error \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 341 of file amigo.\+c.



Referenced by amigo\+\_\+buffered\+\_\+read(), amigo\+\_\+buffered\+\_\+write(), amigo\+\_\+format(), and amigo\+\_\+verify().

\index{amigo.\+c@{amigo.\+c}!amigo\+\_\+cmd\+\_\+clear@{amigo\+\_\+cmd\+\_\+clear}}
\index{amigo\+\_\+cmd\+\_\+clear@{amigo\+\_\+cmd\+\_\+clear}!amigo.\+c@{amigo.\+c}}
\subsubsection[{\texorpdfstring{amigo\+\_\+cmd\+\_\+clear()}{amigo_cmd_clear()}}]{\setlength{\rightskip}{0pt plus 5cm}int amigo\+\_\+cmd\+\_\+clear (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{amigo_8c_a50637caffe2f5419fd06b70a66d26176}{}\label{amigo_8c_a50637caffe2f5419fd06b70a66d26176}


Response to selected device clear or all clear. 


\begin{DoxyItemize}
\item Reference\+: A23.
\item Select sector 0. \begin{DoxyReturn}{Returns}
0 
\end{DoxyReturn}

\end{DoxyItemize}\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000007}{Todo}]F\+I\+X\+ME\end{DoxyRefDesc}


Clear the D\+SJ byte that might be 2 after powerup

Definition at line 776 of file amigo.\+c.



Referenced by G\+P\+I\+B().

\index{amigo.\+c@{amigo.\+c}!amigo\+\_\+cmd\+\_\+dsj@{amigo\+\_\+cmd\+\_\+dsj}}
\index{amigo\+\_\+cmd\+\_\+dsj@{amigo\+\_\+cmd\+\_\+dsj}!amigo.\+c@{amigo.\+c}}
\subsubsection[{\texorpdfstring{amigo\+\_\+cmd\+\_\+dsj()}{amigo_cmd_dsj()}}]{\setlength{\rightskip}{0pt plus 5cm}int amigo\+\_\+cmd\+\_\+dsj (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{amigo_8c_a3ab896c5b3810e84072107a6bcf896c9}{}\label{amigo_8c_a3ab896c5b3810e84072107a6bcf896c9}


Send D\+SJ. 


\begin{DoxyItemize}
\item Reference\+: A11. \begin{DoxyReturn}{Returns}
0 ok 

G\+P\+IB send Errors status
\end{DoxyReturn}

\item Sets dsj and Amigo\+\_\+errors 
\end{DoxyItemize}

Definition at line 696 of file amigo.\+c.



Referenced by A\+M\+I\+G\+O\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S().

\index{amigo.\+c@{amigo.\+c}!amigo\+\_\+cmd\+\_\+wakeup@{amigo\+\_\+cmd\+\_\+wakeup}}
\index{amigo\+\_\+cmd\+\_\+wakeup@{amigo\+\_\+cmd\+\_\+wakeup}!amigo.\+c@{amigo.\+c}}
\subsubsection[{\texorpdfstring{amigo\+\_\+cmd\+\_\+wakeup()}{amigo_cmd_wakeup()}}]{\setlength{\rightskip}{0pt plus 5cm}int amigo\+\_\+cmd\+\_\+wakeup (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{amigo_8c_ac919a69a536ece0514b8c60df5208868}{}\label{amigo_8c_ac919a69a536ece0514b8c60df5208868}


Wakeup (undocumented), just enable P\+PR response. 

\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000005}{Todo}]
\begin{DoxyItemize}
\item not finished
\item Sets dsj and Amigo\+\_\+errors
\end{DoxyItemize}\end{DoxyRefDesc}


\begin{DoxyReturn}{Returns}
G\+P\+IB Errors status -\/ or 0 OK 
\end{DoxyReturn}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000006}{Todo}]F\+I\+X\+ME \end{DoxyRefDesc}


Definition at line 738 of file amigo.\+c.

\index{amigo.\+c@{amigo.\+c}!Amigo\+\_\+\+Command@{Amigo\+\_\+\+Command}}
\index{Amigo\+\_\+\+Command@{Amigo\+\_\+\+Command}!amigo.\+c@{amigo.\+c}}
\subsubsection[{\texorpdfstring{Amigo\+\_\+\+Command(int secondary)}{Amigo_Command(int secondary)}}]{\setlength{\rightskip}{0pt plus 5cm}int Amigo\+\_\+\+Command (
\begin{DoxyParamCaption}
\item[{int}]{secondary}
\end{DoxyParamCaption}
)}\hypertarget{amigo_8c_a2fc6f1413199d33d2b32e675dd45e181}{}\label{amigo_8c_a2fc6f1413199d33d2b32e675dd45e181}


Amigo Command and OP Code Processing functions. 


\begin{DoxyItemize}
\item We disbale P\+PR as soon as a valide command is decoded.
\item O\+N\+LY process Secondary Commands in listen mode with op codes and optional data
\begin{DoxyItemize}
\item Ignore Talking.
\item Ignore Seconday Addresses.
\item Ignore Execute state \char`\"{}0x60\char`\"{} here.
\item Must have OP Codes, or Data, and E\+OI.
\end{DoxyItemize}
\item Read all of the Data/\+Opcodes/\+Parameters at once -\/ while A\+TN is false.
\item Last byte read should be E\+OI or an error.
\item Unknown OP Code processing rules.
\begin{DoxyItemize}
\item Skip the remaining codes, Wait for Report Phase.
\end{DoxyItemize}
\item We enable P\+PR on exit.
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em secondary} & command\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on sucess 

or G\+P\+IB error flags on fail 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{gpib_8h}{gpib.\+h} \hyperlink{gpib_8h_a10916ab21f8ba06e447e898790ef6a4b}{E\+R\+R\+O\+R\+\_\+\+M\+A\+SK} defines for a full list) 
\end{DoxySeeAlso}
Reference\+: A14

Reference\+: A25

Note\+: the function will \char`\"{}unread\char`\"{} any commands and return All Data M\+U\+ST have E\+OI

Reference\+: A40

\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000008}{Todo}]F\+I\+X\+ME \end{DoxyRefDesc}


\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000009}{Todo}]F\+I\+X\+ME \end{DoxyRefDesc}


Reference\+: A27

Seek 1 byte cylinder

Reference\+: A27

Seek 2 byte cylinder

Reference\+: A15

\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000010}{Todo}]is this the unit \$ ? \end{DoxyRefDesc}


Reference\+: A35

\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000011}{Todo}]unit ??? \end{DoxyRefDesc}


Reference\+: A48 .. A50

Reference\+: A23 

Definition at line 869 of file amigo.\+c.



Referenced by A\+M\+I\+G\+O\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S().

\index{amigo.\+c@{amigo.\+c}!A\+M\+I\+G\+O\+\_\+\+C\+O\+M\+M\+A\+N\+DS@{A\+M\+I\+G\+O\+\_\+\+C\+O\+M\+M\+A\+N\+DS}}
\index{A\+M\+I\+G\+O\+\_\+\+C\+O\+M\+M\+A\+N\+DS@{A\+M\+I\+G\+O\+\_\+\+C\+O\+M\+M\+A\+N\+DS}!amigo.\+c@{amigo.\+c}}
\subsubsection[{\texorpdfstring{A\+M\+I\+G\+O\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(uint8\+\_\+t ch)}{AMIGO_COMMANDS(uint8_t ch)}}]{\setlength{\rightskip}{0pt plus 5cm}int A\+M\+I\+G\+O\+\_\+\+C\+O\+M\+M\+A\+N\+DS (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{ch}
\end{DoxyParamCaption}
)}\hypertarget{amigo_8c_a77b7d46bd469c79c73696a9ae2a3543d}{}\label{amigo_8c_a77b7d46bd469c79c73696a9ae2a3543d}


A\+M\+I\+GO Command state processing. 


\begin{DoxyItemize}
\item Perform Command, Execute or Reporting Phase functions.
\begin{DoxyItemize}
\item \hyperlink{amigo_8c_a2fc6f1413199d33d2b32e675dd45e181}{Amigo\+\_\+\+Command()}.
\item \hyperlink{amigo_8c_ad7271e45e6b3bb6edef42da4ad5bb25a}{Amigo\+\_\+\+Execute()}.
\item \hyperlink{amigo_8c_a3ab896c5b3810e84072107a6bcf896c9}{amigo\+\_\+cmd\+\_\+dsj()}.
\end{DoxyItemize}
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ch} & command.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on sucess 

or G\+P\+IB error flags on fail 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{gpib_8h}{gpib.\+h} \hyperlink{gpib_8h_a10916ab21f8ba06e447e898790ef6a4b}{E\+R\+R\+O\+R\+\_\+\+M\+A\+SK} defines for a full list. 
\end{DoxySeeAlso}


Definition at line 1291 of file amigo.\+c.



Referenced by G\+P\+I\+B\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S().

\index{amigo.\+c@{amigo.\+c}!Amigo\+\_\+\+Execute@{Amigo\+\_\+\+Execute}}
\index{Amigo\+\_\+\+Execute@{Amigo\+\_\+\+Execute}!amigo.\+c@{amigo.\+c}}
\subsubsection[{\texorpdfstring{Amigo\+\_\+\+Execute(int secondary)}{Amigo_Execute(int secondary)}}]{\setlength{\rightskip}{0pt plus 5cm}int Amigo\+\_\+\+Execute (
\begin{DoxyParamCaption}
\item[{int}]{secondary}
\end{DoxyParamCaption}
)}\hypertarget{amigo_8c_ad7271e45e6b3bb6edef42da4ad5bb25a}{}\label{amigo_8c_ad7271e45e6b3bb6edef42da4ad5bb25a}


Amigo Execute command processing. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em secondary} & command\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on sucess 

or G\+P\+IB error flags on fail 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{gpib_8h}{gpib.\+h} \hyperlink{gpib_8h_a10916ab21f8ba06e447e898790ef6a4b}{E\+R\+R\+O\+R\+\_\+\+M\+A\+SK} defines for a full list) 
\end{DoxySeeAlso}


Definition at line 1179 of file amigo.\+c.



Referenced by A\+M\+I\+G\+O\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S().

\index{amigo.\+c@{amigo.\+c}!amigo\+\_\+format@{amigo\+\_\+format}}
\index{amigo\+\_\+format@{amigo\+\_\+format}!amigo.\+c@{amigo.\+c}}
\subsubsection[{\texorpdfstring{amigo\+\_\+format(uint8\+\_\+t override, uint8\+\_\+t interleave, uint8\+\_\+t db)}{amigo_format(uint8_t override, uint8_t interleave, uint8_t db)}}]{\setlength{\rightskip}{0pt plus 5cm}int amigo\+\_\+format (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{override, }
\item[{uint8\+\_\+t}]{interleave, }
\item[{uint8\+\_\+t}]{db}
\end{DoxyParamCaption}
)}\hypertarget{amigo_8c_a85a3d11b8dd534100df603e4c3514c92}{}\label{amigo_8c_a85a3d11b8dd534100df603e4c3514c92}


Format Disk. 


\begin{DoxyItemize}
\item Refernce\+: A50.
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em override} & not used \\
\hline
\mbox{\tt in}  & {\em interleave} & not used \\
\hline
\mbox{\tt in}  & {\em db} & byte to fill sector buffer with)\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 ok 

1 on Error,Sets dsj and Amigo\+\_\+errors 
\end{DoxyReturn}


Definition at line 507 of file amigo.\+c.



Referenced by Amigo\+\_\+\+Command().

\index{amigo.\+c@{amigo.\+c}!amigo\+\_\+increment@{amigo\+\_\+increment}}
\index{amigo\+\_\+increment@{amigo\+\_\+increment}!amigo.\+c@{amigo.\+c}}
\subsubsection[{\texorpdfstring{amigo\+\_\+increment(char $\ast$msg)}{amigo_increment(char *msg)}}]{\setlength{\rightskip}{0pt plus 5cm}int amigo\+\_\+increment (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{msg}
\end{DoxyParamCaption}
)}\hypertarget{amigo_8c_ae6c9b56f7f0179eecd6d57c2844bc56c}{}\label{amigo_8c_ae6c9b56f7f0179eecd6d57c2844bc56c}


Increment sector if it will not overflow. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em msg} & user message on overflow.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 ok. 

1 error. 
\end{DoxyReturn}


Definition at line 396 of file amigo.\+c.



Referenced by amigo\+\_\+buffered\+\_\+read(), amigo\+\_\+buffered\+\_\+write(), amigo\+\_\+format(), and amigo\+\_\+verify().

\index{amigo.\+c@{amigo.\+c}!amigo\+\_\+init@{amigo\+\_\+init}}
\index{amigo\+\_\+init@{amigo\+\_\+init}!amigo.\+c@{amigo.\+c}}
\subsubsection[{\texorpdfstring{amigo\+\_\+init()}{amigo_init()}}]{\setlength{\rightskip}{0pt plus 5cm}void amigo\+\_\+init (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{amigo_8c_a0eec1cf4ce108a8bc0c5831b0bb149b7}{}\label{amigo_8c_a0eec1cf4ce108a8bc0c5831b0bb149b7}


Initialize Amigo state machine, Disk Position, Error status. 

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000002}{Todo}]verify that we always want P\+PR disabled \end{DoxyRefDesc}


Definition at line 171 of file amigo.\+c.



Referenced by gpib\+\_\+init\+\_\+devices().

\index{amigo.\+c@{amigo.\+c}!amigo\+\_\+overflow\+\_\+check@{amigo\+\_\+overflow\+\_\+check}}
\index{amigo\+\_\+overflow\+\_\+check@{amigo\+\_\+overflow\+\_\+check}!amigo.\+c@{amigo.\+c}}
\subsubsection[{\texorpdfstring{amigo\+\_\+overflow\+\_\+check(\+A\+M\+I\+G\+O\+State\+Type $\ast$p, char $\ast$msg)}{amigo_overflow_check(AMIGOStateType *p, char *msg)}}]{\setlength{\rightskip}{0pt plus 5cm}static int amigo\+\_\+overflow\+\_\+check (
\begin{DoxyParamCaption}
\item[{{\bf A\+M\+I\+G\+O\+State\+Type} $\ast$}]{p, }
\item[{char $\ast$}]{msg}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{amigo_8c_a2dfde05c482503d3604e87be61aaa5bd}{}\label{amigo_8c_a2dfde05c482503d3604e87be61aaa5bd}


Check for C\+HS position overflow. 


\begin{DoxyItemize}
\item Reference\+: A15-\/\+A19 \begin{DoxyReturn}{Returns}
0 

1 overflow 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 364 of file amigo.\+c.



Referenced by amigo\+\_\+increment(), and amigo\+\_\+seek().

\index{amigo.\+c@{amigo.\+c}!amigo\+\_\+request\+\_\+logical\+\_\+address@{amigo\+\_\+request\+\_\+logical\+\_\+address}}
\index{amigo\+\_\+request\+\_\+logical\+\_\+address@{amigo\+\_\+request\+\_\+logical\+\_\+address}!amigo.\+c@{amigo.\+c}}
\subsubsection[{\texorpdfstring{amigo\+\_\+request\+\_\+logical\+\_\+address()}{amigo_request_logical_address()}}]{\setlength{\rightskip}{0pt plus 5cm}int amigo\+\_\+request\+\_\+logical\+\_\+address (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{amigo_8c_a4c8b9f945c52bab66fa4c7aaac5df625}{}\label{amigo_8c_a4c8b9f945c52bab66fa4c7aaac5df625}


Set current address in A\+M\+I\+G\+O\+State.\+logical\+\_\+address\mbox{[}\mbox{]}. 


\begin{DoxyItemize}
\item Reference\+: A15-\/\+A19
\item State\+: Command \begin{DoxyReturn}{Returns}
0 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 198 of file amigo.\+c.



Referenced by Amigo\+\_\+\+Command().

\index{amigo.\+c@{amigo.\+c}!amigo\+\_\+request\+\_\+status@{amigo\+\_\+request\+\_\+status}}
\index{amigo\+\_\+request\+\_\+status@{amigo\+\_\+request\+\_\+status}!amigo.\+c@{amigo.\+c}}
\subsubsection[{\texorpdfstring{amigo\+\_\+request\+\_\+status()}{amigo_request_status()}}]{\setlength{\rightskip}{0pt plus 5cm}int amigo\+\_\+request\+\_\+status (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{amigo_8c_ac3755431f029d6bf480c5d2eceaca7e6}{}\label{amigo_8c_ac3755431f029d6bf480c5d2eceaca7e6}


Set drive status in A\+M\+I\+G\+O\+State.\+status\mbox{[}\mbox{]}. 


\begin{DoxyItemize}
\item Reference\+: A15-\/\+A19.
\item State\+: Command. \begin{DoxyReturn}{Returns}
0 
\end{DoxyReturn}

\end{DoxyItemize}\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000003}{Todo}]dsj \end{DoxyRefDesc}


Definition at line 215 of file amigo.\+c.



Referenced by Amigo\+\_\+\+Command().

\index{amigo.\+c@{amigo.\+c}!amigo\+\_\+seek@{amigo\+\_\+seek}}
\index{amigo\+\_\+seek@{amigo\+\_\+seek}!amigo.\+c@{amigo.\+c}}
\subsubsection[{\texorpdfstring{amigo\+\_\+seek(\+A\+M\+I\+G\+O\+State\+Type $\ast$p)}{amigo_seek(AMIGOStateType *p)}}]{\setlength{\rightskip}{0pt plus 5cm}int amigo\+\_\+seek (
\begin{DoxyParamCaption}
\item[{{\bf A\+M\+I\+G\+O\+State\+Type} $\ast$}]{p}
\end{DoxyParamCaption}
)}\hypertarget{amigo_8c_a17be7a7fc76ab2dc6018801be855e1d5}{}\label{amigo_8c_a17be7a7fc76ab2dc6018801be855e1d5}


Seek to the position held in the disk structure. 


\begin{DoxyItemize}
\item Reference\+: A27.
\item We should not commit bad head/sector/cylinder values until tested!..
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em p} & \hyperlink{structAMIGOStateType}{A\+M\+I\+G\+O\+State\+Type} (Current Disk Position) pointer.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 ok 

1 error 
\end{DoxyReturn}


Definition at line 422 of file amigo.\+c.



Referenced by Amigo\+\_\+\+Command().

\index{amigo.\+c@{amigo.\+c}!amigo\+\_\+send\+\_\+logical\+\_\+address@{amigo\+\_\+send\+\_\+logical\+\_\+address}}
\index{amigo\+\_\+send\+\_\+logical\+\_\+address@{amigo\+\_\+send\+\_\+logical\+\_\+address}!amigo.\+c@{amigo.\+c}}
\subsubsection[{\texorpdfstring{amigo\+\_\+send\+\_\+logical\+\_\+address()}{amigo_send_logical_address()}}]{\setlength{\rightskip}{0pt plus 5cm}int amigo\+\_\+send\+\_\+logical\+\_\+address (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{amigo_8c_a288fab8221af2cef3cd52be5db8bc834}{}\label{amigo_8c_a288fab8221af2cef3cd52be5db8bc834}


Send current address in A\+M\+I\+G\+O\+State.\+logical\+\_\+address\mbox{[}\mbox{]}. 


\begin{DoxyItemize}
\item Reference\+: A15-\/\+A19.
\item State\+: Execute \begin{DoxyReturn}{Returns}
0 on sucess 

status G\+P\+IB error flags on fail 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{gpib_8h}{gpib.\+h} \hyperlink{gpib_8h_a10916ab21f8ba06e447e898790ef6a4b}{E\+R\+R\+O\+R\+\_\+\+M\+A\+SK} defines for a full list. 
\end{DoxySeeAlso}

\end{DoxyItemize}

Definition at line 266 of file amigo.\+c.



Referenced by Amigo\+\_\+\+Execute().

\index{amigo.\+c@{amigo.\+c}!amigo\+\_\+send\+\_\+status@{amigo\+\_\+send\+\_\+status}}
\index{amigo\+\_\+send\+\_\+status@{amigo\+\_\+send\+\_\+status}!amigo.\+c@{amigo.\+c}}
\subsubsection[{\texorpdfstring{amigo\+\_\+send\+\_\+status()}{amigo_send_status()}}]{\setlength{\rightskip}{0pt plus 5cm}int amigo\+\_\+send\+\_\+status (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{amigo_8c_a5469dfd99a532f1324999a77256d91a8}{}\label{amigo_8c_a5469dfd99a532f1324999a77256d91a8}


Send drive status in A\+M\+I\+G\+O\+State.\+status\mbox{[}\mbox{]}. 


\begin{DoxyItemize}
\item Reference\+: A15-\/\+A19.
\item State\+: Execute$>$ \begin{DoxyReturn}{Returns}
0 

status G\+P\+IB error flags on fail 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{gpib_8h}{gpib.\+h} \hyperlink{gpib_8h_a10916ab21f8ba06e447e898790ef6a4b}{E\+R\+R\+O\+R\+\_\+\+M\+A\+SK} defines for a full list. 
\end{DoxySeeAlso}

\end{DoxyItemize}

Definition at line 303 of file amigo.\+c.



Referenced by Amigo\+\_\+\+Execute().

\index{amigo.\+c@{amigo.\+c}!amigo\+\_\+todo@{amigo\+\_\+todo}}
\index{amigo\+\_\+todo@{amigo\+\_\+todo}!amigo.\+c@{amigo.\+c}}
\subsubsection[{\texorpdfstring{amigo\+\_\+todo(uint8\+\_\+t secondary)}{amigo_todo(uint8_t secondary)}}]{\setlength{\rightskip}{0pt plus 5cm}int amigo\+\_\+todo (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{secondary}
\end{DoxyParamCaption}
)}\hypertarget{amigo_8c_a437bef06e567b3f6728f2519b9065354}{}\label{amigo_8c_a437bef06e567b3f6728f2519b9065354}


Report any Unimplimented commands. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em secondary} & G\+P\+IB seconday command\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 
\end{DoxyReturn}


Definition at line 829 of file amigo.\+c.



Referenced by Amigo\+\_\+\+Execute().

\index{amigo.\+c@{amigo.\+c}!amigo\+\_\+todo\+\_\+op@{amigo\+\_\+todo\+\_\+op}}
\index{amigo\+\_\+todo\+\_\+op@{amigo\+\_\+todo\+\_\+op}!amigo.\+c@{amigo.\+c}}
\subsubsection[{\texorpdfstring{amigo\+\_\+todo\+\_\+op(uint8\+\_\+t secondary, uint8\+\_\+t opcode, int len)}{amigo_todo_op(uint8_t secondary, uint8_t opcode, int len)}}]{\setlength{\rightskip}{0pt plus 5cm}int amigo\+\_\+todo\+\_\+op (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{secondary, }
\item[{uint8\+\_\+t}]{opcode, }
\item[{int}]{len}
\end{DoxyParamCaption}
)}\hypertarget{amigo_8c_a6c99539773ae8be3bd4d3bd7493c16d6}{}\label{amigo_8c_a6c99539773ae8be3bd4d3bd7493c16d6}


Report any Unimplimented commands with Op Codes. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em secondary} & G\+P\+IB secondary command \\
\hline
\mbox{\tt in}  & {\em opcode} & G\+P\+IB data byte OP Code \\
\hline
\mbox{\tt in}  & {\em len} & Length of G\+O\+IB data returned \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 
\end{DoxyReturn}


Definition at line 804 of file amigo.\+c.



Referenced by Amigo\+\_\+\+Command().

\index{amigo.\+c@{amigo.\+c}!amigo\+\_\+verify@{amigo\+\_\+verify}}
\index{amigo\+\_\+verify@{amigo\+\_\+verify}!amigo.\+c@{amigo.\+c}}
\subsubsection[{\texorpdfstring{amigo\+\_\+verify(uint16\+\_\+t sectors)}{amigo_verify(uint16_t sectors)}}]{\setlength{\rightskip}{0pt plus 5cm}int amigo\+\_\+verify (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{sectors}
\end{DoxyParamCaption}
)}\hypertarget{amigo_8c_ab08912bf94dc6e8fbe87990ff41f46f0}{}\label{amigo_8c_ab08912bf94dc6e8fbe87990ff41f46f0}


Verify Disk Sectors at current position. 


\begin{DoxyItemize}
\item Refernce\+: A36 \begin{DoxyReturn}{Returns}
0 ok 

1 Error, Sets dsj and Amigo\+\_\+errors 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 450 of file amigo.\+c.



Referenced by Amigo\+\_\+\+Command().



\subsection{Variable Documentation}
\index{amigo.\+c@{amigo.\+c}!listening@{listening}}
\index{listening@{listening}!amigo.\+c@{amigo.\+c}}
\subsubsection[{\texorpdfstring{listening}{listening}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t listening}\hypertarget{amigo_8c_a906eb6f6a81521d91f73f9ab2e03b02e}{}\label{amigo_8c_a906eb6f6a81521d91f73f9ab2e03b02e}


gpib listen address 



Definition at line 92 of file gpib.\+c.



Referenced by Amigo\+\_\+\+Command(), A\+M\+I\+G\+O\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(), Amigo\+\_\+\+Execute(), amigo\+\_\+todo(), amigo\+\_\+todo\+\_\+op(), G\+P\+I\+B(), G\+P\+I\+B\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(), G\+P\+I\+B\+\_\+\+L\+I\+S\+T\+E\+N(), G\+P\+I\+B\+\_\+\+S\+E\+C\+O\+N\+D\+A\+R\+Y\+\_\+\+A\+D\+D\+R\+E\+S\+S(), G\+P\+I\+B\+\_\+\+T\+A\+L\+K(), gpib\+\_\+task(), and P\+R\+I\+N\+T\+E\+R\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S().

\index{amigo.\+c@{amigo.\+c}!talking@{talking}}
\index{talking@{talking}!amigo.\+c@{amigo.\+c}}
\subsubsection[{\texorpdfstring{talking}{talking}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t talking}\hypertarget{amigo_8c_acef501d1e292f230efac5ed0cddf90e8}{}\label{amigo_8c_acef501d1e292f230efac5ed0cddf90e8}


gpib talk address 

\begin{DoxyVerb}/// SS80 References: ("SS80" is the short form used in the project)
///  "Subset 80 from Fixed and flexible disc drives"
///   Printed November, 1985
///   HP Part# 5958-4129
///
/// CS80 References: ("CS80" is the short form used in the project)
///   "CS/80 Instruction Set Programming Manual"
///   Printed: APR 1983
///   HP Part# 5955-3442
///
/// Amigo References: ("Amigo" is the short form used in the project)
///   "Appendix A of 9895A Flexible Disc Memory Service Manual"
///   HP Part# 09895-90030
/// \end{DoxyVerb}
 \begin{DoxyVerb}///  Reference: Amigo Command Set Reference used in this document
///  Short Form         Title
///  SS80       "Subset 80 from Fixed and flexible disc drives" 5958-4129
///  HP9123         9123 disc drive manual addendum 5957-6584
///  A          Appendix A "HP 9895A Disc Memory Commends Set"
///             See Receive Status A16
///  L    Buffered Read             0x05    2       A33     Y
///  L    Request Physical Address  0x14    2       A21     Y 0x68
///             See Send Address A20
/// 
///  0x6B Command Op Codes          OP      bytes
///  L    Buffered Read Verify      0x05    2       A37     Y
///  L    ID Triggered Read         0x06    2       A41     Y
/// 
///  0x6C Command Op Codes          OP      bytes
///  L    Unbuffered Read Verify    0x05    2       A38     Y
///  L    Request Physical Address  0x14    2       A21     Y 0x68
///  L    Format Request            0x18    2       A50     N
///  L    Door Lock                 0x19    2       A30     N
///  L    Door Unlock               0x1A    2       A31     N
/// 
///  0x6F Command Op Codes          OP      bytes
///  L    Download Controller       ---     1..256  A26     N
/// 
///  0x70 Command Op Codes          OP      bytes
///  L    HP-300 Clear              ---     1       A23     N
///  T    DSJ                       ---     1       A11     N
/// 
///  0x77 Command Op Codes          OP      bytes
///  T/L  HP-IB CRC                 ---     ---     A30     N
/// 
///  0x7E Command Op Codes          OP      bytes
///  L    Write Loopback Record     ---     1..256  A25     N
///  T    Read Loopback Record      ---     1..256  A14     N
/// 
///  0x7F Command Op Codes          OP      bytes
///  T    Read Self Test Results    ---     2       A13     N
///  L    Initiat Self Test         ---     2       A24     N
/// \end{DoxyVerb}
 \begin{DoxyVerb}/// Secondary_Commands and OP Code processing
///
/// 0x60 Command Op Codes           OP      bytes
/// L    Receive Data               ---     ---
///         Execute of most receive data requests
///         All Disk Write
/// T    Send Data                  ---     ---
///         Execute of most send data requests
///         All Disk Read
///
/// 0x68 Command Op Codes           OP      bytes   Ref     Execute Phase
/// L    Cold Load Read             0x00    2       A40     Y
/// L    Seek                       0x02    6       A27     N
/// L    Request Status buffered        0x03    2       A15     Y 0x68
/// L    Unbuffered Read            0x05    2       A35     Y
/// L    Verify                     0x07    4       A36     N
/// L    Unbuffered Write Request   0x08    2       A45     Y
/// L    Initialize                 0x0B    2       A46     Y
/// L    Initialize DBIT                0x2B    2       A46     Y
/// L    Request Logical Address    0x14    2       A20     Y 0x68
/// L   End                         0x15    2       A29     N
/// T    Send Status or Address         ----    4       A20     N
///         Execute of all Address and Status Requests 
///         (Y 0x68)
///
/// 0x69 Command Op Codes           OP      bytes
/// L    Buffered Write Request     0x08    2       A43     Y
///
/// 0x6A Command Op Codes           OP      bytes
/// L    Request Status Unbuffered   0x03    2      A15     Y 0x68
///         See Receive Status A16
/// L    Buffered Read              0x05    2       A33     Y
/// L    Request Physical Address   0x14    2       A21     Y 0x68
///         See Send Address A20
///
/// 0x6B Command Op Codes           OP      bytes
/// L    Buffered Read Verify       0x05    2       A37     Y
/// L    ID Triggered Read          0x06    2       A41     Y
///
/// 0x6C Command Op Codes           OP      bytes
/// L    Unbuffered Read Verify     0x05    2       A38     Y
/// L    Request Physical Address   0x14    2       A21     Y 0x68
/// L    Format Request                 0x18    2       A50     N
/// L    Door Lock                  0x19    2       A30     N
/// L    Door Unlock                0x1A    2       A31     N
///
/// 0x6F Command Op Codes           OP      bytes
/// L    Download Controller        ---     1..256  A26     N
///
/// 0x70 Command Op Codes           OP      bytes
/// L    HP-300 Clear               ---     1       A23     N
/// T    DSJ                        ---     1       A11     N
///
/// 0x77 Command Op Codes           OP      bytes
/// T/L  HP-IB CRC                  ---     ---     A30     N
///
/// 0x7E Command Op Codes           OP      bytes
/// L    Write Loopback Record      ---     1..256  A25     N
/// T    Read Loopback Record       ---     1..256  A14     N
///
/// 0x7F Command Op Codes           OP      bytes
/// T    Read Self Test Results         ---     2       A13     N
/// L    Initiat Self Test          ---     2       A24     N
/// \end{DoxyVerb}
 

Definition at line 87 of file gpib.\+c.



Referenced by Amigo\+\_\+\+Command(), A\+M\+I\+G\+O\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(), Amigo\+\_\+\+Execute(), amigo\+\_\+todo(), amigo\+\_\+todo\+\_\+op(), G\+P\+I\+B(), G\+P\+I\+B\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(), G\+P\+I\+B\+\_\+\+L\+I\+S\+T\+E\+N(), G\+P\+I\+B\+\_\+\+S\+E\+C\+O\+N\+D\+A\+R\+Y\+\_\+\+A\+D\+D\+R\+E\+S\+S(), G\+P\+I\+B\+\_\+\+T\+A\+L\+K(), and P\+R\+I\+N\+T\+E\+R\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S().


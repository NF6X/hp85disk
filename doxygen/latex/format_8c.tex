\hypertarget{format_8c}{}\section{gpib/format.c File Reference}
\label{format_8c}\index{gpib/format.\+c@{gpib/format.\+c}}


L\+IF Disk Format.  


{\ttfamily \#include \char`\"{}user\+\_\+config.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}defines.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}gpib.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}gpib\+\_\+hal.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}gpib\+\_\+task.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}amigo.\+h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{format_8c_a0b2de8fedb3b37b23e5ef53efb2853f7}{S\+S80\+\_\+\+V2B} (uint8\+\_\+t $\ast$B, int index, int size, uint32\+\_\+t val)
\item 
\hyperlink{ff_8h_a49d0171ecbd362cda5680a0d360db44c}{F\+R\+E\+S\+U\+LT} \hyperlink{format_8c_a6897c56caeb4ebc5c5003c1f33a3b14c}{gpib\+\_\+format\+\_\+disk} (char $\ast$name, uint32\+\_\+t size)
\begin{DoxyCompactList}\small\item\em L\+D\+IF Format file. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{structVolumeLabelType}{Volume\+Label\+Type} \hyperlink{format_8c_a7cde3fe5600434f06d6c872090dc5390}{vl}
\begin{DoxyCompactList}\small\item\em Disk Layout  \href{https://groups.io/g/hpseries80/wiki/HP-85-Program-Control-Block-(BASIC-header),-Tape-directory-layout,-Disk-directory-layout}{\tt https\+://groups.\+io/g/hpseries80/wiki/\+H\+P-\/85-\/\+Program-\/\+Control-\/\+Block-\/(\+B\+A\+S\+I\+C-\/header),-\/\+Tape-\/directory-\/layout,-\/\+Disk-\/directory-\/layout}. \end{DoxyCompactList}\item 
\hyperlink{structDirEntryType}{Dir\+Entry\+Type} \hyperlink{format_8c_acdc9db327daa9bd83d5df64bf016a4da}{de}
\begin{DoxyCompactList}\small\item\em L\+IF D\+Irectory Entry. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
L\+IF Disk Format. 

\begin{DoxyParagraph}{Edit History}

\begin{DoxyItemize}
\item \mbox{[}1.\+0\mbox{]} \mbox{[}Mike Gore\mbox{]} Initial revision of file.
\end{DoxyItemize}
\end{DoxyParagraph}
\begin{DoxyParagraph}{Copyright \copyright{} 2014 Mike Gore, Inc. All rights reserved.}

\end{DoxyParagraph}


\subsection{Function Documentation}
\index{format.\+c@{format.\+c}!gpib\+\_\+format\+\_\+disk@{gpib\+\_\+format\+\_\+disk}}
\index{gpib\+\_\+format\+\_\+disk@{gpib\+\_\+format\+\_\+disk}!format.\+c@{format.\+c}}
\subsubsection[{\texorpdfstring{gpib\+\_\+format\+\_\+disk(char $\ast$name, uint32\+\_\+t size)}{gpib_format_disk(char *name, uint32_t size)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf F\+R\+E\+S\+U\+LT} gpib\+\_\+format\+\_\+disk (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{name, }
\item[{uint32\+\_\+t}]{size}
\end{DoxyParamCaption}
)}\hypertarget{format_8c_a6897c56caeb4ebc5c5003c1f33a3b14c}{}\label{format_8c_a6897c56caeb4ebc5c5003c1f33a3b14c}


L\+D\+IF Format file. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em name} & file name of L\+IF image to format.\\
\hline
\end{DoxyParams}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000002}{Todo}]currently coded for A\+M\+I\+GO -\/ Work in progress. \end{DoxyRefDesc}
\begin{DoxyReturn}{Returns}
Fat\+Fs F\+R\+E\+S\+U\+LT. 
\end{DoxyReturn}
\begin{DoxyReturn}{Returns}
return(rc); 
\end{DoxyReturn}


Definition at line 93 of file format.\+c.



Referenced by gpib\+\_\+tests().

\index{format.\+c@{format.\+c}!S\+S80\+\_\+\+V2B@{S\+S80\+\_\+\+V2B}}
\index{S\+S80\+\_\+\+V2B@{S\+S80\+\_\+\+V2B}!format.\+c@{format.\+c}}
\subsubsection[{\texorpdfstring{S\+S80\+\_\+\+V2\+B(uint8\+\_\+t $\ast$\+B, int index, int size, uint32\+\_\+t val)}{SS80_V2B(uint8_t *B, int index, int size, uint32_t val)}}]{\setlength{\rightskip}{0pt plus 5cm}void S\+S80\+\_\+\+V2B (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{B, }
\item[{int}]{index, }
\item[{int}]{size, }
\item[{uint32\+\_\+t}]{val}
\end{DoxyParamCaption}
)}\hypertarget{format_8c_a0b2de8fedb3b37b23e5ef53efb2853f7}{}\label{format_8c_a0b2de8fedb3b37b23e5ef53efb2853f7}
remove 1 bias 

Definition at line 23 of file format.\+c.



\subsection{Variable Documentation}
\index{format.\+c@{format.\+c}!de@{de}}
\index{de@{de}!format.\+c@{format.\+c}}
\subsubsection[{\texorpdfstring{de}{de}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Dir\+Entry\+Type} de}\hypertarget{format_8c_acdc9db327daa9bd83d5df64bf016a4da}{}\label{format_8c_acdc9db327daa9bd83d5df64bf016a4da}
{\bfseries Initial value\+:}
\begin{DoxyCode}
=
\{
    \{ \textcolor{charliteral}{'M'},\textcolor{charliteral}{'Y'},\textcolor{charliteral}{'F'},\textcolor{charliteral}{'I'},\textcolor{charliteral}{'L'},\textcolor{charliteral}{'E'},\textcolor{charliteral}{'1'},\textcolor{charliteral}{'2'},\textcolor{charliteral}{'3'},\textcolor{charliteral}{'4'}\},
    0x100,0,0x100,0,0x20,
    \{0x13,0x10,0x12,0x00,0x00,0x00\},
    1,0,0
\}
\end{DoxyCode}


L\+IF D\+Irectory Entry. 


\begin{DoxyItemize}
\item Reference\+: hpdisk (c) 2014 Anders Gustafsson \href{mailto:anders.gustafsson@pedago.fi}{\tt anders.\+gustafsson@pedago.\+fi}
\item L\+IF filesystem \href{http://www.hp9845.net/9845/projects/hpdir/#lif_filesystem}{\tt http\+://www.\+hp9845.\+net/9845/projects/hpdir/\#lif\+\_\+filesystem}
\item L\+IF data is B\+IG endian 
\end{DoxyItemize}

Definition at line 78 of file format.\+c.



Referenced by ls().

\index{format.\+c@{format.\+c}!vl@{vl}}
\index{vl@{vl}!format.\+c@{format.\+c}}
\subsubsection[{\texorpdfstring{vl}{vl}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Volume\+Label\+Type} vl}\hypertarget{format_8c_a7cde3fe5600434f06d6c872090dc5390}{}\label{format_8c_a7cde3fe5600434f06d6c872090dc5390}
{\bfseries Initial value\+:}
\begin{DoxyCode}
=
\{
    0x0080,
    \{ \textcolor{charliteral}{'L'},\textcolor{charliteral}{'A'},\textcolor{charliteral}{'B'},\textcolor{charliteral}{'E'},\textcolor{charliteral}{'L'},\textcolor{charliteral}{'1'}\},
    0,0x200,
    0x0080,
    0,
    0,0x0e00,       
    0
\}
\end{DoxyCode}


Disk Layout  \href{https://groups.io/g/hpseries80/wiki/HP-85-Program-Control-Block-(BASIC-header),-Tape-directory-layout,-Disk-directory-layout}{\tt https\+://groups.\+io/g/hpseries80/wiki/\+H\+P-\/85-\/\+Program-\/\+Control-\/\+Block-\/(\+B\+A\+S\+I\+C-\/header),-\/\+Tape-\/directory-\/layout,-\/\+Disk-\/directory-\/layout}. 

D\+I\+SK L\+A\+Y\+O\+UT The H\+P-\/85 disks used the L\+IF (Logical Interchange Format) disk layout. The first 2 sectors on the disk (cylinder 0, head 0, sector 0-\/1) contained the V\+O\+L\+U\+ME sectors. The important things in the V\+O\+L\+U\+ME S\+E\+C\+T\+O\+RS were thus\+:

B\+Y\+T\+ES D\+E\+S\+C\+R\+I\+P\+T\+I\+ON 

 0-\/1 L\+IF identifier, must be 0x80, 0x00 (0x8000) 2-\/7 6-\/character volume L\+A\+B\+EL 8-\/11 directory start block (always 0,0,0,2 = 0x00000002) 12-\/13 L\+IF identifer for System 3000 machines (always 0x10,0 = 0x1000) 14-\/15 always 0 16-\/19 \# of sectors in D\+I\+R\+E\+C\+T\+O\+RY (usually 0,0,0,something) 20-\/21 L\+IF version number (always 0,1 = 0x0001) 22-\/23 always 0 24-\/27 number of tracks per surface 28-\/31 number of surfaces 32-\/35 number of sectors per track 36-\/41 date and time that the volume was initialized (YY,MM,DD,HH,mm,SS) All date values are in B\+CD format. YY is (year-\/1900). HH is 0-\/23.\+L\+IF data structures used by stand alone formatting utility L\+IF Volume label structure
\begin{DoxyItemize}
\item Reference\+: hpdisk (c) 2014 Anders Gustafsson \href{mailto:anders.gustafsson@pedago.fi}{\tt anders.\+gustafsson@pedago.\+fi}
\item L\+IF filesystem \href{http://www.hp9845.net/9845/projects/hpdir/#lif_filesystem}{\tt http\+://www.\+hp9845.\+net/9845/projects/hpdir/\#lif\+\_\+filesystem}
\item L\+IF data is B\+IG endian 
\end{DoxyItemize}

Definition at line 63 of file format.\+c.


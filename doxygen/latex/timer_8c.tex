\hypertarget{timer_8c}{}\doxysection{lib/timer.c File Reference}
\label{timer_8c}\index{lib/timer.c@{lib/timer.c}}


timer functions  


{\ttfamily \#include \char`\"{}user\+\_\+config.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}mathio.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}time.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}timer.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{timer_8c_ac1e7e408ffc81a694842fc04762db79d}{set\+\_\+timers}} (void($\ast$handler)(void), int timer \+\_\+\+\_\+attribute\+\_\+\+\_\+((unused)))
\begin{DoxyCompactList}\small\item\em Install a user timer task. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{timer_8c_a71c3fe0e245c7b08e03a2fe0fbd88844}{kill\+\_\+timer}} (int timer)
\begin{DoxyCompactList}\small\item\em Delete \char`\"{}\+Kill\char`\"{} one user timer task. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void \mbox{\hyperlink{timer_8c_a62b37d3b3acfee789af6a9dbd47f7267}{delete\+\_\+all\+\_\+timers}} ()
\begin{DoxyCompactList}\small\item\em Clear A\+LL user timer tasks. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void \mbox{\hyperlink{timer_8c_ab92d687bae984bd62c3d741f2ba614ed}{subtract\+\_\+timespec}} (\mbox{\hyperlink{time_8h_a062a82a85c72b4a3020130efc37a00cf}{ts\+\_\+t}} $\ast$a, \mbox{\hyperlink{time_8h_a062a82a85c72b4a3020130efc37a00cf}{ts\+\_\+t}} $\ast$b)
\begin{DoxyCompactList}\small\item\em subtract a-\/= b timespec $\ast$ structures. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} char $\ast$ \mbox{\hyperlink{timer_8c_a41fb2edea84c2f17c7c6ad6ff87baeff}{ts\+\_\+to\+\_\+str}} (\mbox{\hyperlink{time_8h_a062a82a85c72b4a3020130efc37a00cf}{ts\+\_\+t}} $\ast$val)
\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void \mbox{\hyperlink{timer_8c_a6802af23bc1fe764b975683a0b37fc91}{display\+\_\+ts}} (\mbox{\hyperlink{time_8h_a062a82a85c72b4a3020130efc37a00cf}{ts\+\_\+t}} $\ast$val)
\begin{DoxyCompactList}\small\item\em timespec structure in seconds.\+nanoseconds. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void \mbox{\hyperlink{timer_8c_adf029ed50e104cc3c16bcb7cf7d58f8c}{clock\+\_\+elapsed\+\_\+begin}} ()
\begin{DoxyCompactList}\small\item\em Store current struct timespec in \+\_\+\+\_\+clock\+\_\+elapsed. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void \mbox{\hyperlink{timer_8c_a9f3dff4c1cc1701dc99d7e1d30ffcc06}{clock\+\_\+elapsed\+\_\+end}} (char $\ast$msg)
\begin{DoxyCompactList}\small\item\em Subtract and display time difference from clock\+\_\+elapesed\+\_\+begin(). \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void \mbox{\hyperlink{timer_8c_a7faad7f12590c5756441f44a069f60d5}{clock\+\_\+clear}} ()
\begin{DoxyCompactList}\small\item\em clear time and timezone to 0. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void \mbox{\hyperlink{timer_8c_a296c5d3efac4bc56fc12fe3626f7d4b6}{disable\+\_\+timers}} ()
\begin{DoxyCompactList}\small\item\em Disable all timer tasks. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void \mbox{\hyperlink{timer_8c_ac97e80c15c73721fbc9f5071f6681fac}{enable\+\_\+timers}} ()
\begin{DoxyCompactList}\small\item\em Enable timer tasks. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{timer_8c_a67a27354654cf2a2169137adc7274def}{execute\+\_\+timers}} ()
\begin{DoxyCompactList}\small\item\em Execute all user timers at S\+Y\+S\+T\+E\+M\+\_\+\+HZ rate. Called by system task. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{timer_8c_a182d70e09e9436c9c8a2e81b7597f206}{clock\+\_\+task}} (void)
\begin{DoxyCompactList}\small\item\em 1000HZ timer task \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void \mbox{\hyperlink{timer_8c_acb0c9c995c634465d7d1f534bd862f8e}{init\+\_\+timers}} ()
\begin{DoxyCompactList}\small\item\em Setup all timers tasksi and enable interrupts. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{timer_8c_acf815c0e34417f73bbabc7a2f565f759}{clock\+\_\+getres}} (\mbox{\hyperlink{time_8h_afeece078c6706f33383bf11bbf584518}{clockid\+\_\+t}} clk\+\_\+id \+\_\+\+\_\+attribute\+\_\+\+\_\+((unused)), struct \mbox{\hyperlink{structtimespec}{timespec}} $\ast$res)
\begin{DoxyCompactList}\small\item\em Read clock time resolution into struct timepec $\ast$ts -\/ P\+O\+S\+IX function. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{timer_8c_ab98bf5c6b3b1e1841f2c3e5c082d43b3}{clock\+\_\+settime}} (\mbox{\hyperlink{time_8h_afeece078c6706f33383bf11bbf584518}{clockid\+\_\+t}} clk\+\_\+id \+\_\+\+\_\+attribute\+\_\+\+\_\+((unused)), const struct \mbox{\hyperlink{structtimespec}{timespec}} $\ast$ts)
\begin{DoxyCompactList}\small\item\em Set system clock using seconds and nonoseconds -\/ P\+O\+S\+IX function. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{timer_8c_af6cb17d901fc12700b0f35b6ac9c6d66}{clock\+\_\+gettime}} (\mbox{\hyperlink{time_8h_afeece078c6706f33383bf11bbf584518}{clockid\+\_\+t}} clk\+\_\+id \+\_\+\+\_\+attribute\+\_\+\+\_\+((unused)), struct \mbox{\hyperlink{structtimespec}{timespec}} $\ast$ts)
\begin{DoxyCompactList}\small\item\em Generic \mbox{\hyperlink{timer_8c_af6cb17d901fc12700b0f35b6ac9c6d66}{clock\+\_\+gettime()}} function W\+I\+T\+H\+O\+UT high resolution. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
volatile \mbox{\hyperlink{time_8h_a062a82a85c72b4a3020130efc37a00cf}{ts\+\_\+t}} \mbox{\hyperlink{timer_8c_a335451dd774ecb4b696d501b4c1b6f30}{\+\_\+\+\_\+clock}}
\begin{DoxyCompactList}\small\item\em System Clock Time. \end{DoxyCompactList}\item 
\mbox{\hyperlink{time_8h_a63629b2492d6773f4d4948d6e60022a8}{tz\+\_\+t}} \mbox{\hyperlink{timer_8c_a9ac29ed71adf6807175d24ab1fa622a7}{\+\_\+\+\_\+tzone}}
\begin{DoxyCompactList}\small\item\em System Time Zone. \end{DoxyCompactList}\item 
static int \mbox{\hyperlink{timer_8c_ae997c45cc4d164ce0b47a44b370651ec}{timers\+\_\+enabled}} = 0
\item 
static int \mbox{\hyperlink{timer_8c_a0ea4c1291946db41f55937b7cc3dc40c}{timers\+\_\+configured}} = 0
\item 
\mbox{\hyperlink{structTIMERS}{T\+I\+M\+E\+RS}} \mbox{\hyperlink{timer_8c_ad680b46025f0dae867f27a80344736a1}{timer\+\_\+irq}} \mbox{[}\mbox{\hyperlink{timer_8h_a492a379b00d0ec04be9cd0994e0b42ae}{M\+A\+X\+\_\+\+T\+I\+M\+E\+R\+\_\+\+C\+NT}}\mbox{]}
\begin{DoxyCompactList}\small\item\em array or user timers \end{DoxyCompactList}\item 
static char \mbox{\hyperlink{timer_8c_a3b37602023ba3cdbbe1394f43abbef2c}{\+\_\+ts\+\_\+to\+\_\+str}} \mbox{[}32\mbox{]}
\begin{DoxyCompactList}\small\item\em timespec structure in seconds.\+nanoseconds in string. \end{DoxyCompactList}\item 
static \mbox{\hyperlink{time_8h_a062a82a85c72b4a3020130efc37a00cf}{ts\+\_\+t}} \mbox{\hyperlink{timer_8c_a11d81711e20909cf489fb56cbbb81558}{\+\_\+\+\_\+clock\+\_\+elapsed}}
\begin{DoxyCompactList}\small\item\em Used for elapsed time calculations. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
timer functions 

\begin{DoxyParagraph}{Copyright \copyright{} 2015 Mike Gore, G\+PL License}

\end{DoxyParagraph}
\begin{DoxyParagraph}{You are free to use this code under the terms of G\+PL}
please retain a copy of this notice in any code you use it in.
\end{DoxyParagraph}
This is free software\+: you can redistribute it and/or modify it under the terms of the G\+NU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.

This software is distributed in the hope that it will be useful, but W\+I\+T\+H\+O\+UT A\+NY W\+A\+R\+R\+A\+N\+TY; without even the implied warranty of M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY or F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE. See the G\+NU General Public License for more details.

You should have received a copy of the G\+NU General Public License along with this program. If not, see \href{http://www.gnu.org/licenses/}{\texttt{ http\+://www.\+gnu.\+org/licenses/}}. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{timer_8c_a7faad7f12590c5756441f44a069f60d5}\label{timer_8c_a7faad7f12590c5756441f44a069f60d5}} 
\index{timer.c@{timer.c}!clock\_clear@{clock\_clear}}
\index{clock\_clear@{clock\_clear}!timer.c@{timer.c}}
\doxysubsubsection{\texorpdfstring{clock\_clear()}{clock\_clear()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void clock\+\_\+clear (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



clear time and timezone to 0. 

\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{timer_8c_ab98bf5c6b3b1e1841f2c3e5c082d43b3}{clock\+\_\+settime()}}. 

\mbox{\hyperlink{time_8c_aba9a1e17f18817099c795d0559d747a8}{settimezone()}}.
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}


Definition at line 222 of file timer.\+c.



Referenced by init\+\_\+timers(), and main().

\mbox{\Hypertarget{timer_8c_adf029ed50e104cc3c16bcb7cf7d58f8c}\label{timer_8c_adf029ed50e104cc3c16bcb7cf7d58f8c}} 
\index{timer.c@{timer.c}!clock\_elapsed\_begin@{clock\_elapsed\_begin}}
\index{clock\_elapsed\_begin@{clock\_elapsed\_begin}!timer.c@{timer.c}}
\doxysubsubsection{\texorpdfstring{clock\_elapsed\_begin()}{clock\_elapsed\_begin()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void clock\+\_\+elapsed\+\_\+begin (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Store current struct timespec in \+\_\+\+\_\+clock\+\_\+elapsed. 

\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{timer_8c_af6cb17d901fc12700b0f35b6ac9c6d66}{clock\+\_\+gettime()}} \mbox{\hyperlink{posix_8h_a1c3d85ae80df5590fa314acffd8bf840}{P\+O\+S\+IX}} function.
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 184 of file timer.\+c.



Referenced by gpib\+\_\+timer\+\_\+elapsed\+\_\+begin().

\mbox{\Hypertarget{timer_8c_a9f3dff4c1cc1701dc99d7e1d30ffcc06}\label{timer_8c_a9f3dff4c1cc1701dc99d7e1d30ffcc06}} 
\index{timer.c@{timer.c}!clock\_elapsed\_end@{clock\_elapsed\_end}}
\index{clock\_elapsed\_end@{clock\_elapsed\_end}!timer.c@{timer.c}}
\doxysubsubsection{\texorpdfstring{clock\_elapsed\_end()}{clock\_elapsed\_end()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void clock\+\_\+elapsed\+\_\+end (\begin{DoxyParamCaption}\item[{char $\ast$}]{msg }\end{DoxyParamCaption})}



Subtract and display time difference from clock\+\_\+elapesed\+\_\+begin(). 


\begin{DoxyItemize}
\item Notes\+: Accuracy is a function of timer resolution, C\+PU overhead and background tasks.
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em msg} & User message to proceed Time display.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{timer_8c_af6cb17d901fc12700b0f35b6ac9c6d66}{clock\+\_\+gettime()}}. 

clock\+\_\+elapesed\+\_\+begin(). 
\end{DoxySeeAlso}


Definition at line 200 of file timer.\+c.



Referenced by gpib\+\_\+timer\+\_\+elapsed\+\_\+end().

\mbox{\Hypertarget{timer_8c_acf815c0e34417f73bbabc7a2f565f759}\label{timer_8c_acf815c0e34417f73bbabc7a2f565f759}} 
\index{timer.c@{timer.c}!clock\_getres@{clock\_getres}}
\index{clock\_getres@{clock\_getres}!timer.c@{timer.c}}
\doxysubsubsection{\texorpdfstring{clock\_getres()}{clock\_getres()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int clock\+\_\+getres (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{time_8h_afeece078c6706f33383bf11bbf584518}{clockid\+\_\+t}} clk\+\_\+id }]{\+\_\+\+\_\+attribute\+\_\+\+\_\+(unused),  }\item[{struct \mbox{\hyperlink{structtimespec}{timespec}} $\ast$}]{res }\end{DoxyParamCaption})}



Read clock time resolution into struct timepec $\ast$ts -\/ P\+O\+S\+IX function. 


\begin{DoxyItemize}
\item Note\+: We ignore clk\+\_\+id 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em clk\+\_\+id} & unused hardware clock index. \\
\hline
\mbox{\texttt{ out}}  & {\em res} & timespec resolution result.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success. 

-\/1 on error. 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 335 of file timer.\+c.



Referenced by main().

\mbox{\Hypertarget{timer_8c_af6cb17d901fc12700b0f35b6ac9c6d66}\label{timer_8c_af6cb17d901fc12700b0f35b6ac9c6d66}} 
\index{timer.c@{timer.c}!clock\_gettime@{clock\_gettime}}
\index{clock\_gettime@{clock\_gettime}!timer.c@{timer.c}}
\doxysubsubsection{\texorpdfstring{clock\_gettime()}{clock\_gettime()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int clock\+\_\+gettime (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{time_8h_afeece078c6706f33383bf11bbf584518}{clockid\+\_\+t}} clk\+\_\+id }]{\+\_\+\+\_\+attribute\+\_\+\+\_\+(unused),  }\item[{struct \mbox{\hyperlink{structtimespec}{timespec}} $\ast$}]{ts }\end{DoxyParamCaption})}



Generic \mbox{\hyperlink{timer_8c_af6cb17d901fc12700b0f35b6ac9c6d66}{clock\+\_\+gettime()}} function W\+I\+T\+H\+O\+UT high resolution. 

Read clock time into struct timepec $\ast$ts -\/ P\+O\+S\+IX function.


\begin{DoxyItemize}
\item Note\+: We ignore clk\+\_\+id, and include low level counter offsets when available.
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em clk\+\_\+id} & unused hardware clock index. \\
\hline
\mbox{\texttt{ out}}  & {\em ts} & timespec result.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success. 

-\/1 on error. 
\end{DoxyReturn}


Definition at line 386 of file timer.\+c.



Referenced by clock\+\_\+elapsed\+\_\+begin(), clock\+\_\+elapsed\+\_\+end(), display\+\_\+clock(), gettimeofday(), printer\+\_\+open(), and time().

\mbox{\Hypertarget{timer_8c_ab98bf5c6b3b1e1841f2c3e5c082d43b3}\label{timer_8c_ab98bf5c6b3b1e1841f2c3e5c082d43b3}} 
\index{timer.c@{timer.c}!clock\_settime@{clock\_settime}}
\index{clock\_settime@{clock\_settime}!timer.c@{timer.c}}
\doxysubsubsection{\texorpdfstring{clock\_settime()}{clock\_settime()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int clock\+\_\+settime (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{time_8h_afeece078c6706f33383bf11bbf584518}{clockid\+\_\+t}} clk\+\_\+id }]{\+\_\+\+\_\+attribute\+\_\+\+\_\+(unused),  }\item[{const struct \mbox{\hyperlink{structtimespec}{timespec}} $\ast$}]{ts }\end{DoxyParamCaption})}



Set system clock using seconds and nonoseconds -\/ P\+O\+S\+IX function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em clk\+\_\+id} & Hardware timer index used when there are more then one.
\begin{DoxyItemize}
\item Note\+: We ignore clk\+\_\+id for now. 
\end{DoxyItemize}\\
\hline
\mbox{\texttt{ in}}  & {\em ts} & struct timespec input.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0. 
\end{DoxyReturn}


Definition at line 353 of file timer.\+c.



Referenced by clock\+\_\+clear(), clock\+\_\+set(), initialize\+\_\+clock(), setdate\+\_\+r(), and settimeofday().

\mbox{\Hypertarget{timer_8c_a182d70e09e9436c9c8a2e81b7597f206}\label{timer_8c_a182d70e09e9436c9c8a2e81b7597f206}} 
\index{timer.c@{timer.c}!clock\_task@{clock\_task}}
\index{clock\_task@{clock\_task}!timer.c@{timer.c}}
\doxysubsubsection{\texorpdfstring{clock\_task()}{clock\_task()}}
{\footnotesize\ttfamily void clock\+\_\+task (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



1000HZ timer task 

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 281 of file timer.\+c.



Referenced by init\+\_\+timers().

\mbox{\Hypertarget{timer_8c_a62b37d3b3acfee789af6a9dbd47f7267}\label{timer_8c_a62b37d3b3acfee789af6a9dbd47f7267}} 
\index{timer.c@{timer.c}!delete\_all\_timers@{delete\_all\_timers}}
\index{delete\_all\_timers@{delete\_all\_timers}!timer.c@{timer.c}}
\doxysubsubsection{\texorpdfstring{delete\_all\_timers()}{delete\_all\_timers()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void delete\+\_\+all\+\_\+timers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Clear A\+LL user timer tasks. 

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 116 of file timer.\+c.



Referenced by init\+\_\+timers().

\mbox{\Hypertarget{timer_8c_a296c5d3efac4bc56fc12fe3626f7d4b6}\label{timer_8c_a296c5d3efac4bc56fc12fe3626f7d4b6}} 
\index{timer.c@{timer.c}!disable\_timers@{disable\_timers}}
\index{disable\_timers@{disable\_timers}!timer.c@{timer.c}}
\doxysubsubsection{\texorpdfstring{disable\_timers()}{disable\_timers()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void disable\+\_\+timers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Disable all timer tasks. 

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 237 of file timer.\+c.

\mbox{\Hypertarget{timer_8c_a6802af23bc1fe764b975683a0b37fc91}\label{timer_8c_a6802af23bc1fe764b975683a0b37fc91}} 
\index{timer.c@{timer.c}!display\_ts@{display\_ts}}
\index{display\_ts@{display\_ts}!timer.c@{timer.c}}
\doxysubsubsection{\texorpdfstring{display\_ts()}{display\_ts()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void display\+\_\+ts (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{time_8h_a062a82a85c72b4a3020130efc37a00cf}{ts\+\_\+t}} $\ast$}]{val }\end{DoxyParamCaption})}



timespec structure in seconds.\+nanoseconds. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em val} & timespec struct we want to display.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}


Definition at line 167 of file timer.\+c.

\mbox{\Hypertarget{timer_8c_ac97e80c15c73721fbc9f5071f6681fac}\label{timer_8c_ac97e80c15c73721fbc9f5071f6681fac}} 
\index{timer.c@{timer.c}!enable\_timers@{enable\_timers}}
\index{enable\_timers@{enable\_timers}!timer.c@{timer.c}}
\doxysubsubsection{\texorpdfstring{enable\_timers()}{enable\_timers()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void enable\+\_\+timers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Enable timer tasks. 

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 251 of file timer.\+c.



Referenced by init\+\_\+timers().

\mbox{\Hypertarget{timer_8c_a67a27354654cf2a2169137adc7274def}\label{timer_8c_a67a27354654cf2a2169137adc7274def}} 
\index{timer.c@{timer.c}!execute\_timers@{execute\_timers}}
\index{execute\_timers@{execute\_timers}!timer.c@{timer.c}}
\doxysubsubsection{\texorpdfstring{execute\_timers()}{execute\_timers()}}
{\footnotesize\ttfamily void execute\+\_\+timers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Execute all user timers at S\+Y\+S\+T\+E\+M\+\_\+\+HZ rate. Called by system task. 

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 265 of file timer.\+c.

\mbox{\Hypertarget{timer_8c_acb0c9c995c634465d7d1f534bd862f8e}\label{timer_8c_acb0c9c995c634465d7d1f534bd862f8e}} 
\index{timer.c@{timer.c}!init\_timers@{init\_timers}}
\index{init\_timers@{init\_timers}!timer.c@{timer.c}}
\doxysubsubsection{\texorpdfstring{init\_timers()}{init\_timers()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void init\+\_\+timers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Setup all timers tasksi and enable interrupts. 

\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{timer_8c_a182d70e09e9436c9c8a2e81b7597f206}{clock\+\_\+task()}} 

\+: \mbox{\hyperlink{timer__hal_8c}{timer\+\_\+hal.\+c}} for hardware dependent interface 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}
See \mbox{\hyperlink{time_8c}{time.\+c}}

Definition at line 299 of file timer.\+c.



Referenced by main().

\mbox{\Hypertarget{timer_8c_a71c3fe0e245c7b08e03a2fe0fbd88844}\label{timer_8c_a71c3fe0e245c7b08e03a2fe0fbd88844}} 
\index{timer.c@{timer.c}!kill\_timer@{kill\_timer}}
\index{kill\_timer@{kill\_timer}!timer.c@{timer.c}}
\doxysubsubsection{\texorpdfstring{kill\_timer()}{kill\_timer()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int kill\+\_\+timer (\begin{DoxyParamCaption}\item[{int}]{timer }\end{DoxyParamCaption})}



Delete \char`\"{}\+Kill\char`\"{} one user timer task. 


\begin{DoxyItemize}
\item \char`\"{}kill\char`\"{} is a common Linux term for ending a process.
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em timer} & user timer task index.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
timer on success. 

-\/1 on error. 
\end{DoxyReturn}


Definition at line 99 of file timer.\+c.

\mbox{\Hypertarget{timer_8c_ac1e7e408ffc81a694842fc04762db79d}\label{timer_8c_ac1e7e408ffc81a694842fc04762db79d}} 
\index{timer.c@{timer.c}!set\_timers@{set\_timers}}
\index{set\_timers@{set\_timers}!timer.c@{timer.c}}
\doxysubsubsection{\texorpdfstring{set\_timers()}{set\_timers()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int set\+\_\+timers (\begin{DoxyParamCaption}\item[{void($\ast$)(void)}]{handler,  }\item[{int timer }]{\+\_\+\+\_\+attribute\+\_\+\+\_\+(unused) }\end{DoxyParamCaption})}



Install a user timer task. 


\begin{DoxyItemize}
\item timer argument is unsused, reserved for timer source.
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em handler)} & function pointer to user task. \\
\hline
\mbox{\texttt{ in}}  & {\em timer} & reserved for systems with additional low level hardware timers.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
timer on success. 

-\/1 on error. 
\end{DoxyReturn}


Definition at line 59 of file timer.\+c.



Referenced by gpib\+\_\+timer\+\_\+init(), i2c\+\_\+init(), init\+\_\+timers(), and mmc\+\_\+install\+\_\+timer().

\mbox{\Hypertarget{timer_8c_ab92d687bae984bd62c3d741f2ba614ed}\label{timer_8c_ab92d687bae984bd62c3d741f2ba614ed}} 
\index{timer.c@{timer.c}!subtract\_timespec@{subtract\_timespec}}
\index{subtract\_timespec@{subtract\_timespec}!timer.c@{timer.c}}
\doxysubsubsection{\texorpdfstring{subtract\_timespec()}{subtract\_timespec()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void subtract\+\_\+timespec (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{time_8h_a062a82a85c72b4a3020130efc37a00cf}{ts\+\_\+t}} $\ast$}]{a,  }\item[{\mbox{\hyperlink{time_8h_a062a82a85c72b4a3020130efc37a00cf}{ts\+\_\+t}} $\ast$}]{b }\end{DoxyParamCaption})}



subtract a-\/= b timespec $\ast$ structures. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em a} & timespec struct. \\
\hline
\mbox{\texttt{ in}}  & {\em b} & timespec struct.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}


Definition at line 134 of file timer.\+c.



Referenced by clock\+\_\+elapsed\+\_\+end().

\mbox{\Hypertarget{timer_8c_a41fb2edea84c2f17c7c6ad6ff87baeff}\label{timer_8c_a41fb2edea84c2f17c7c6ad6ff87baeff}} 
\index{timer.c@{timer.c}!ts\_to\_str@{ts\_to\_str}}
\index{ts\_to\_str@{ts\_to\_str}!timer.c@{timer.c}}
\doxysubsubsection{\texorpdfstring{ts\_to\_str()}{ts\_to\_str()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} char$\ast$ ts\+\_\+to\+\_\+str (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{time_8h_a062a82a85c72b4a3020130efc37a00cf}{ts\+\_\+t}} $\ast$}]{val }\end{DoxyParamCaption})}



Definition at line 154 of file timer.\+c.



Referenced by clock\+\_\+elapsed\+\_\+end(), and display\+\_\+ts().



\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{timer_8c_a335451dd774ecb4b696d501b4c1b6f30}\label{timer_8c_a335451dd774ecb4b696d501b4c1b6f30}} 
\index{timer.c@{timer.c}!\_\_clock@{\_\_clock}}
\index{\_\_clock@{\_\_clock}!timer.c@{timer.c}}
\doxysubsubsection{\texorpdfstring{\_\_clock}{\_\_clock}}
{\footnotesize\ttfamily volatile \mbox{\hyperlink{time_8h_a062a82a85c72b4a3020130efc37a00cf}{ts\+\_\+t}} \+\_\+\+\_\+clock}



System Clock Time. 



Definition at line 38 of file timer.\+c.



Referenced by clock\+\_\+gettime(), clock\+\_\+settime(), and clock\+\_\+task().

\mbox{\Hypertarget{timer_8c_a11d81711e20909cf489fb56cbbb81558}\label{timer_8c_a11d81711e20909cf489fb56cbbb81558}} 
\index{timer.c@{timer.c}!\_\_clock\_elapsed@{\_\_clock\_elapsed}}
\index{\_\_clock\_elapsed@{\_\_clock\_elapsed}!timer.c@{timer.c}}
\doxysubsubsection{\texorpdfstring{\_\_clock\_elapsed}{\_\_clock\_elapsed}}
{\footnotesize\ttfamily \mbox{\hyperlink{time_8h_a062a82a85c72b4a3020130efc37a00cf}{ts\+\_\+t}} \+\_\+\+\_\+clock\+\_\+elapsed\hspace{0.3cm}{\ttfamily [static]}}



Used for elapsed time calculations. 

\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{timer_8c_adf029ed50e104cc3c16bcb7cf7d58f8c}{clock\+\_\+elapsed\+\_\+begin()}}. 

\mbox{\hyperlink{timer_8c_a9f3dff4c1cc1701dc99d7e1d30ffcc06}{clock\+\_\+elapsed\+\_\+end()}}. 
\end{DoxySeeAlso}


Definition at line 176 of file timer.\+c.



Referenced by clock\+\_\+elapsed\+\_\+begin(), and clock\+\_\+elapsed\+\_\+end().

\mbox{\Hypertarget{timer_8c_a9ac29ed71adf6807175d24ab1fa622a7}\label{timer_8c_a9ac29ed71adf6807175d24ab1fa622a7}} 
\index{timer.c@{timer.c}!\_\_tzone@{\_\_tzone}}
\index{\_\_tzone@{\_\_tzone}!timer.c@{timer.c}}
\doxysubsubsection{\texorpdfstring{\_\_tzone}{\_\_tzone}}
{\footnotesize\ttfamily \mbox{\hyperlink{time_8h_a63629b2492d6773f4d4948d6e60022a8}{tz\+\_\+t}} \+\_\+\+\_\+tzone}



System Time Zone. 



Definition at line 41 of file timer.\+c.



Referenced by clock\+\_\+clear().

\mbox{\Hypertarget{timer_8c_a3b37602023ba3cdbbe1394f43abbef2c}\label{timer_8c_a3b37602023ba3cdbbe1394f43abbef2c}} 
\index{timer.c@{timer.c}!\_ts\_to\_str@{\_ts\_to\_str}}
\index{\_ts\_to\_str@{\_ts\_to\_str}!timer.c@{timer.c}}
\doxysubsubsection{\texorpdfstring{\_ts\_to\_str}{\_ts\_to\_str}}
{\footnotesize\ttfamily char \+\_\+ts\+\_\+to\+\_\+str\mbox{[}32\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}



timespec structure in seconds.\+nanoseconds in string. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em } & timespec struct we wish to display. \\
\hline
\mbox{\texttt{ in}}  & {\em } & output string.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}


Definition at line 152 of file timer.\+c.



Referenced by ts\+\_\+to\+\_\+str().

\mbox{\Hypertarget{timer_8c_ad680b46025f0dae867f27a80344736a1}\label{timer_8c_ad680b46025f0dae867f27a80344736a1}} 
\index{timer.c@{timer.c}!timer\_irq@{timer\_irq}}
\index{timer\_irq@{timer\_irq}!timer.c@{timer.c}}
\doxysubsubsection{\texorpdfstring{timer\_irq}{timer\_irq}}
{\footnotesize\ttfamily \mbox{\hyperlink{structTIMERS}{T\+I\+M\+E\+RS}} timer\+\_\+irq\mbox{[}\mbox{\hyperlink{timer_8h_a492a379b00d0ec04be9cd0994e0b42ae}{M\+A\+X\+\_\+\+T\+I\+M\+E\+R\+\_\+\+C\+NT}}\mbox{]}}



array or user timers 



Definition at line 47 of file timer.\+c.



Referenced by delete\+\_\+all\+\_\+timers(), execute\+\_\+timers(), kill\+\_\+timer(), and set\+\_\+timers().

\mbox{\Hypertarget{timer_8c_a0ea4c1291946db41f55937b7cc3dc40c}\label{timer_8c_a0ea4c1291946db41f55937b7cc3dc40c}} 
\index{timer.c@{timer.c}!timers\_configured@{timers\_configured}}
\index{timers\_configured@{timers\_configured}!timer.c@{timer.c}}
\doxysubsubsection{\texorpdfstring{timers\_configured}{timers\_configured}}
{\footnotesize\ttfamily int timers\+\_\+configured = 0\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 44 of file timer.\+c.



Referenced by disable\+\_\+timers(), enable\+\_\+timers(), and init\+\_\+timers().

\mbox{\Hypertarget{timer_8c_ae997c45cc4d164ce0b47a44b370651ec}\label{timer_8c_ae997c45cc4d164ce0b47a44b370651ec}} 
\index{timer.c@{timer.c}!timers\_enabled@{timers\_enabled}}
\index{timers\_enabled@{timers\_enabled}!timer.c@{timer.c}}
\doxysubsubsection{\texorpdfstring{timers\_enabled}{timers\_enabled}}
{\footnotesize\ttfamily int timers\+\_\+enabled = 0\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 43 of file timer.\+c.



Referenced by disable\+\_\+timers(), enable\+\_\+timers(), and init\+\_\+timers().


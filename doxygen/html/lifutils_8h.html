<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>HP85 GPIB Disk Emulator: gpib/lifutils.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HP85 GPIB Disk Emulator
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">HP85GPIBDiskEmulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d6b38c553053a83c6809a5b0d50557a4.html">gpib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">lifutils.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="user__config_8h_source.html">user_config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="defines_8h_source.html">defines.h</a>&quot;</code><br />
</div>
<p><a href="lifutils_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlifvol__t.html">lifvol_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disk Layout.  <a href="structlifvol__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlifdirent__t.html">lifdirent_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Directory layout.  <a href="structlifdirent__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlifdir__t.html">lifdir_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Master LIF data structure Contains image file name Volume Structure Current Directory Entry read/write flag.  <a href="structlifdir__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a9f32d2537f4daba6a314185cf52b7e56"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#a9f32d2537f4daba6a314185cf52b7e56">LIF_SECTOR_SIZE</a>&#160;&#160;&#160;256</td></tr>
<tr class="memdesc:a9f32d2537f4daba6a314185cf52b7e56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Depends on how much free ram we have.  <a href="#a9f32d2537f4daba6a314185cf52b7e56">More...</a><br /></td></tr>
<tr class="separator:a9f32d2537f4daba6a314185cf52b7e56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e7f4ebd8f31cd7f9dcb0e9758ef8f44"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#a7e7f4ebd8f31cd7f9dcb0e9758ef8f44">LIF_CHUNKS</a>&#160;&#160;&#160;16</td></tr>
<tr class="memdesc:a7e7f4ebd8f31cd7f9dcb0e9758ef8f44"><td class="mdescLeft">&#160;</td><td class="mdescRight">used for formatting  <a href="#a7e7f4ebd8f31cd7f9dcb0e9758ef8f44">More...</a><br /></td></tr>
<tr class="separator:a7e7f4ebd8f31cd7f9dcb0e9758ef8f44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a625b7a543a55b48e28ea93fbb61595eb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#a625b7a543a55b48e28ea93fbb61595eb">LIF_CHUNK_SIZE</a>&#160;&#160;&#160;(<a class="el" href="lifutils_8h.html#a9f32d2537f4daba6a314185cf52b7e56">LIF_SECTOR_SIZE</a>*<a class="el" href="lifutils_8h.html#a7e7f4ebd8f31cd7f9dcb0e9758ef8f44">LIF_CHUNKS</a>)</td></tr>
<tr class="separator:a625b7a543a55b48e28ea93fbb61595eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99ad70dd3200a3ee46388bc2c36fe720"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#a99ad70dd3200a3ee46388bc2c36fe720">LIF_DIR_SIZE</a>&#160;&#160;&#160;32</td></tr>
<tr class="memdesc:a99ad70dd3200a3ee46388bc2c36fe720"><td class="mdescLeft">&#160;</td><td class="mdescRight">LIF directory entry size.  <a href="#a99ad70dd3200a3ee46388bc2c36fe720">More...</a><br /></td></tr>
<tr class="separator:a99ad70dd3200a3ee46388bc2c36fe720"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cfa79b094fc3a5db37b26761a639e6d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#a8cfa79b094fc3a5db37b26761a639e6d">LIF_IMAGE_NAME_SIZE</a>&#160;&#160;&#160;64</td></tr>
<tr class="memdesc:a8cfa79b094fc3a5db37b26761a639e6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">size of image file name size used by lif_format()  <a href="#a8cfa79b094fc3a5db37b26761a639e6d">More...</a><br /></td></tr>
<tr class="separator:a8cfa79b094fc3a5db37b26761a639e6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aebb3d0e746d3aa086e0baa48ad66b964"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structstat.html">stat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#aebb3d0e746d3aa086e0baa48ad66b964">stat_t</a></td></tr>
<tr class="separator:aebb3d0e746d3aa086e0baa48ad66b964"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:adcd52baa64a03567d69ce3579e3f66ea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#adcd52baa64a03567d69ce3579e3f66ea">lif_help</a> (void)</td></tr>
<tr class="memdesc:adcd52baa64a03567d69ce3579e3f66ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Help Menu for User invoked GPIB functions and tasks See: int <a class="el" href="gpib__tests_8h.html#aed0c6a0a794f33d5cf7691c96d3e4955" title="GPIB user tests User invoked GPIB functions and tasks. ">gpib_tests(char *str)</a>  <a href="#adcd52baa64a03567d69ce3579e3f66ea">More...</a><br /></td></tr>
<tr class="separator:adcd52baa64a03567d69ce3579e3f66ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32dc220253a6108ad1d2f6b06318d326"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#a32dc220253a6108ad1d2f6b06318d326">lif_tests</a> (char *str)</td></tr>
<tr class="memdesc:a32dc220253a6108ad1d2f6b06318d326"><td class="mdescLeft">&#160;</td><td class="mdescRight">LIFGuser tests.  <a href="#a32dc220253a6108ad1d2f6b06318d326">More...</a><br /></td></tr>
<tr class="separator:a32dc220253a6108ad1d2f6b06318d326"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e71af1d76d982ee586717537dd67417"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#a0e71af1d76d982ee586717537dd67417">lif_B2S</a> (uint8_t *B, uint8_t *name, int size)</td></tr>
<tr class="memdesc:a0e71af1d76d982ee586717537dd67417"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert LIF space padded string name into normal string.  <a href="#a0e71af1d76d982ee586717537dd67417">More...</a><br /></td></tr>
<tr class="separator:a0e71af1d76d982ee586717537dd67417"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3581f407fe6c5cbe6a5db361fe49d387"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#a3581f407fe6c5cbe6a5db361fe49d387">lif_S2B</a> (uint8_t *B, uint8_t *name, int size)</td></tr>
<tr class="memdesc:a3581f407fe6c5cbe6a5db361fe49d387"><td class="mdescLeft">&#160;</td><td class="mdescRight">string to LIF directory entry  <a href="#a3581f407fe6c5cbe6a5db361fe49d387">More...</a><br /></td></tr>
<tr class="separator:a3581f407fe6c5cbe6a5db361fe49d387"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4526efb5e3517ff7bb83e6ac08e4c6b6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#a4526efb5e3517ff7bb83e6ac08e4c6b6">lif_fixname</a> (uint8_t *B, char *name, int size)</td></tr>
<tr class="memdesc:a4526efb5e3517ff7bb83e6ac08e4c6b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a file name (unix/fat32) format into a valid LIF name First we do a basename on the string (remove any leading file paths) Next we remove any extensions LIF names may have only these characters: [A-Z][A-Z0-09_]+ LIF names are converted to upper case LIF names are padded at the end with spaces.  <a href="#a4526efb5e3517ff7bb83e6ac08e4c6b6">More...</a><br /></td></tr>
<tr class="separator:a4526efb5e3517ff7bb83e6ac08e4c6b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ead31a7c8161db8ee528ff0cb7d7325"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#a2ead31a7c8161db8ee528ff0cb7d7325">lif_PackVolume</a> (uint8_t *B, <a class="el" href="structlifvol__t.html">lifvol_t</a> *V)</td></tr>
<tr class="memdesc:a2ead31a7c8161db8ee528ff0cb7d7325"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pack <a class="el" href="structlifvol__t.html" title="Disk Layout. ">lifvol_t</a> data into bytes.  <a href="#a2ead31a7c8161db8ee528ff0cb7d7325">More...</a><br /></td></tr>
<tr class="separator:a2ead31a7c8161db8ee528ff0cb7d7325"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a199fe2e35d157581120008a78d26b4cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#a199fe2e35d157581120008a78d26b4cd">lif_UnPackVolume</a> (uint8_t *B, <a class="el" href="structlifvol__t.html">lifvol_t</a> *V)</td></tr>
<tr class="memdesc:a199fe2e35d157581120008a78d26b4cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">UnPack <a class="el" href="structlifvol__t.html" title="Disk Layout. ">lifvol_t</a> data from bytes.  <a href="#a199fe2e35d157581120008a78d26b4cd">More...</a><br /></td></tr>
<tr class="separator:a199fe2e35d157581120008a78d26b4cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85f2680ef77647d6f09ffbaf465879a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#a85f2680ef77647d6f09ffbaf465879a2">lif_PackDir</a> (uint8_t *B, <a class="el" href="structlifdir__t.html">lifdir_t</a> *<a class="el" href="structDIR.html">DIR</a>)</td></tr>
<tr class="memdesc:a85f2680ef77647d6f09ffbaf465879a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pack DireEntryType data into bytes.  <a href="#a85f2680ef77647d6f09ffbaf465879a2">More...</a><br /></td></tr>
<tr class="separator:a85f2680ef77647d6f09ffbaf465879a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5a6d92768c95407e731ddded99040f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#ab5a6d92768c95407e731ddded99040f6">lif_UnPackDir</a> (uint8_t *B, <a class="el" href="structlifdir__t.html">lifdir_t</a> *<a class="el" href="structDIR.html">DIR</a>)</td></tr>
<tr class="memdesc:ab5a6d92768c95407e731ddded99040f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">UnPack <a class="el" href="structlifdirent__t.html" title="Directory layout. ">lifdirent_t</a> data from bytes.  <a href="#ab5a6d92768c95407e731ddded99040f6">More...</a><br /></td></tr>
<tr class="separator:ab5a6d92768c95407e731ddded99040f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68235d8edc4ac1583e77c90d16a877c8"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#a68235d8edc4ac1583e77c90d16a877c8">lif_BIN2BCD</a> (uint8_t data)</td></tr>
<tr class="memdesc:a68235d8edc4ac1583e77c90d16a877c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert number &gt;= 0 and &lt;= 99 to BCD.  <a href="#a68235d8edc4ac1583e77c90d16a877c8">More...</a><br /></td></tr>
<tr class="separator:a68235d8edc4ac1583e77c90d16a877c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2e35296eec6eba5cb2d5c9964d0b738"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#af2e35296eec6eba5cb2d5c9964d0b738">lif_time2lif</a> (uint8_t *bcd, <a class="el" href="time_8h.html#a3346b04b0420b32ccf6b706551b70762">time_t</a> t)</td></tr>
<tr class="memdesc:af2e35296eec6eba5cb2d5c9964d0b738"><td class="mdescLeft">&#160;</td><td class="mdescRight">UNIX time to LIF time format.  <a href="#af2e35296eec6eba5cb2d5c9964d0b738">More...</a><br /></td></tr>
<tr class="separator:af2e35296eec6eba5cb2d5c9964d0b738"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1038b27c4593489c48a46e2f140b675a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#a1038b27c4593489c48a46e2f140b675a">lif_dir_clear</a> (<a class="el" href="structlifdir__t.html">lifdir_t</a> *<a class="el" href="structDIR.html">DIR</a>)</td></tr>
<tr class="memdesc:a1038b27c4593489c48a46e2f140b675a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear main <a class="el" href="structlifdir__t.html" title="Master LIF data structure Contains image file name Volume Structure Current Directory Entry read/writ...">lifdir_t</a> <a class="el" href="structDIR.html">DIR</a> structure.  <a href="#a1038b27c4593489c48a46e2f140b675a">More...</a><br /></td></tr>
<tr class="separator:a1038b27c4593489c48a46e2f140b675a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac24d806ba3d75f423b1e17e5528fc90e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#ac24d806ba3d75f423b1e17e5528fc90e">lif_dirent_clear</a> (<a class="el" href="structlifdir__t.html">lifdir_t</a> *<a class="el" href="structDIR.html">DIR</a>)</td></tr>
<tr class="memdesc:ac24d806ba3d75f423b1e17e5528fc90e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear <a class="el" href="structlifdirent__t.html" title="Directory layout. ">lifdirent_t</a> DE structure in <a class="el" href="structDIR.html">DIR</a>.  <a href="#ac24d806ba3d75f423b1e17e5528fc90e">More...</a><br /></td></tr>
<tr class="separator:ac24d806ba3d75f423b1e17e5528fc90e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49a3bb535736ef9c2948a391a03cef4e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#a49a3bb535736ef9c2948a391a03cef4e">lif_vol_clear</a> (<a class="el" href="structlifdir__t.html">lifdir_t</a> *<a class="el" href="structDIR.html">DIR</a>)</td></tr>
<tr class="memdesc:a49a3bb535736ef9c2948a391a03cef4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear <a class="el" href="structlifvol__t.html" title="Disk Layout. ">lifvol_t</a> V structure in <a class="el" href="structDIR.html">DIR</a>.  <a href="#a49a3bb535736ef9c2948a391a03cef4e">More...</a><br /></td></tr>
<tr class="separator:a49a3bb535736ef9c2948a391a03cef4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2691478126c4c013b2dff751b6627921"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#a2691478126c4c013b2dff751b6627921">lif_closedir</a> (<a class="el" href="structlifdir__t.html">lifdir_t</a> *<a class="el" href="structDIR.html">DIR</a>)</td></tr>
<tr class="memdesc:a2691478126c4c013b2dff751b6627921"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close LIF directory Modeled after Linux <a class="el" href="posix_8c.html#aaeac2b41e8c2c3a5f91c9bd511a8c0a6" title="POSIX closedir. ">closedir()</a>  <a href="#a2691478126c4c013b2dff751b6627921">More...</a><br /></td></tr>
<tr class="separator:a2691478126c4c013b2dff751b6627921"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe395b08bb0cfe54ee46529a0181c11e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="posix_8h.html#aed4dabeb9f7c518ded42f930a04abce8">FILE</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#afe395b08bb0cfe54ee46529a0181c11e">lif_open</a> (char *name, char *mode)</td></tr>
<tr class="memdesc:afe395b08bb0cfe54ee46529a0181c11e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a file that must exist.  <a href="#afe395b08bb0cfe54ee46529a0181c11e">More...</a><br /></td></tr>
<tr class="separator:afe395b08bb0cfe54ee46529a0181c11e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabcbc42b059eb4dadaab5c63778547f8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="defines_8h.html#aebb3d0e746d3aa086e0baa48ad66b964">stat_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#aabcbc42b059eb4dadaab5c63778547f8">lif_stat</a> (char *name)</td></tr>
<tr class="memdesc:aabcbc42b059eb4dadaab5c63778547f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stat a file.  <a href="#aabcbc42b059eb4dadaab5c63778547f8">More...</a><br /></td></tr>
<tr class="separator:aabcbc42b059eb4dadaab5c63778547f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd91a3610ac5b104097ac0686a56cefd"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#afd91a3610ac5b104097ac0686a56cefd">lif_read</a> (char *name, void *buf, long offset, int bytes)</td></tr>
<tr class="memdesc:afd91a3610ac5b104097ac0686a56cefd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data from a LIF image File is closed after read WHY? We want time minimize file open to to avoid corruption on the SDCARD.  <a href="#afd91a3610ac5b104097ac0686a56cefd">More...</a><br /></td></tr>
<tr class="separator:afd91a3610ac5b104097ac0686a56cefd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6be20c8f3213656e828aae93b303d776"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#a6be20c8f3213656e828aae93b303d776">lif_write</a> (char *name, void *buf, long offset, int bytes)</td></tr>
<tr class="memdesc:a6be20c8f3213656e828aae93b303d776"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write data to an LIF image File is closed, positioned to the end of file, after write Why? We want time minimize file open to to avoid corruption on the SDCARD.  <a href="#a6be20c8f3213656e828aae93b303d776">More...</a><br /></td></tr>
<tr class="separator:a6be20c8f3213656e828aae93b303d776"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b37a1c50e14b4e64e8110f13b74dfeb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structlifdir__t.html">lifdir_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#a6b37a1c50e14b4e64e8110f13b74dfeb">lif_opendir</a> (char *name)</td></tr>
<tr class="separator:a6b37a1c50e14b4e64e8110f13b74dfeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a470203a61f36e84f411fa42e965b731a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structlifdirent__t.html">lifdirent_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#a470203a61f36e84f411fa42e965b731a">lif_readdir</a> (<a class="el" href="structlifdir__t.html">lifdir_t</a> *<a class="el" href="structDIR.html">DIR</a>)</td></tr>
<tr class="memdesc:a470203a61f36e84f411fa42e965b731a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open LIF directory for reading Modeled after Linux <a class="el" href="posix_8c.html#a1508fedaef509d2976b43300306d1400">readdir()</a>  <a href="#a470203a61f36e84f411fa42e965b731a">More...</a><br /></td></tr>
<tr class="separator:a470203a61f36e84f411fa42e965b731a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bde42f25a87ea3db74cf7b379022ddb"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#a5bde42f25a87ea3db74cf7b379022ddb">lif_writedir</a> (<a class="el" href="structlifdir__t.html">lifdir_t</a> *<a class="el" href="structDIR.html">DIR</a>)</td></tr>
<tr class="memdesc:a5bde42f25a87ea3db74cf7b379022ddb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a director entry Modeled after Linux <a class="el" href="posix_8c.html#a1508fedaef509d2976b43300306d1400">readdir()</a>  <a href="#a5bde42f25a87ea3db74cf7b379022ddb">More...</a><br /></td></tr>
<tr class="separator:a5bde42f25a87ea3db74cf7b379022ddb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c10caf1bb5c6d712e11c6a25cf9e1e7"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#a5c10caf1bb5c6d712e11c6a25cf9e1e7">lif_filelength</a> (<a class="el" href="structlifdirent__t.html">lifdirent_t</a> *DE)</td></tr>
<tr class="memdesc:a5c10caf1bb5c6d712e11c6a25cf9e1e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">get LIF file size from directory entry  <a href="#a5c10caf1bb5c6d712e11c6a25cf9e1e7">More...</a><br /></td></tr>
<tr class="separator:a5c10caf1bb5c6d712e11c6a25cf9e1e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f6f0773f5f6e94bc1bb6c63d32e243f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structlifdir__t.html">lifdir_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#a5f6f0773f5f6e94bc1bb6c63d32e243f">lif_find_free</a> (char *name, long size)</td></tr>
<tr class="memdesc:a5f6f0773f5f6e94bc1bb6c63d32e243f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find offset to first free sector that is big enough Modeled after Linux <a class="el" href="posix_8c.html#a1508fedaef509d2976b43300306d1400">readdir()</a>  <a href="#a5f6f0773f5f6e94bc1bb6c63d32e243f">More...</a><br /></td></tr>
<tr class="separator:a5f6f0773f5f6e94bc1bb6c63d32e243f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca0a37c5d186a795d821d7c05c87dcc5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#aca0a37c5d186a795d821d7c05c87dcc5">lif_dir</a> (char *lifimagename)</td></tr>
<tr class="memdesc:aca0a37c5d186a795d821d7c05c87dcc5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display a LIF image file directory.  <a href="#aca0a37c5d186a795d821d7c05c87dcc5">More...</a><br /></td></tr>
<tr class="separator:aca0a37c5d186a795d821d7c05c87dcc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae077333ae15ec21e05b9da7f9b77e63a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#ae077333ae15ec21e05b9da7f9b77e63a">lif_write_pad</a> (<a class="el" href="structlifdir__t.html">lifdir_t</a> *<a class="el" href="structDIR.html">DIR</a>, long offset)</td></tr>
<tr class="memdesc:ae077333ae15ec21e05b9da7f9b77e63a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pad the current sector to the end When <a class="el" href="structDIR.html">DIR</a> is null we do not write, just compute the write size.  <a href="#ae077333ae15ec21e05b9da7f9b77e63a">More...</a><br /></td></tr>
<tr class="separator:ae077333ae15ec21e05b9da7f9b77e63a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9beff3d539e7a3c08e3e92cfdecc3fcb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#a9beff3d539e7a3c08e3e92cfdecc3fcb">lif_write_string</a> (<a class="el" href="structlifdir__t.html">lifdir_t</a> *<a class="el" href="structDIR.html">DIR</a>, long offset, void *str)</td></tr>
<tr class="memdesc:a9beff3d539e7a3c08e3e92cfdecc3fcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">HP85 ASCII LIF records have a 3 byte header ef [ff]* = end of data in this sector (no size) , pad with ff's optionally if there is room df size = string cf size = split accross sector end "6f size" at start of next sector but the 6f size bytes are not included in cf size! (yuck!) 6f size = split continue (always starts at sector boundry) df 00 00 ef [ff]* = EOF (df size = 0) ef send of sector and optional padding size = 16 bits LSB MSB.  <a href="#a9beff3d539e7a3c08e3e92cfdecc3fcb">More...</a><br /></td></tr>
<tr class="separator:a9beff3d539e7a3c08e3e92cfdecc3fcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31f61566ccec3e137c93b259d508ea11"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#a31f61566ccec3e137c93b259d508ea11">lif_ascii2lif</a> (char *name, <a class="el" href="structlifdir__t.html">lifdir_t</a> *<a class="el" href="structDIR.html">DIR</a>)</td></tr>
<tr class="memdesc:a31f61566ccec3e137c93b259d508ea11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a user ASCII file into HP85 0xE010 LIF format We must know the convered file size BEFORE writting So we must call this function TWICE 1) find out how big the converted file is (<a class="el" href="structDIR.html">DIR</a> is NULL) 2) Specify where to put it (<a class="el" href="structDIR.html">DIR</a> is set)  <a href="#a31f61566ccec3e137c93b259d508ea11">More...</a><br /></td></tr>
<tr class="separator:a31f61566ccec3e137c93b259d508ea11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc02f6c04090b6b17f348804f7c45368"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#acc02f6c04090b6b17f348804f7c45368">lif_add_file</a> (char *lifimagename, char *lifname, char *userfile)</td></tr>
<tr class="memdesc:acc02f6c04090b6b17f348804f7c45368"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a user file to the LIF image The basename of the lifname, without extensions, is used as the LIF file name.  <a href="#acc02f6c04090b6b17f348804f7c45368">More...</a><br /></td></tr>
<tr class="separator:acc02f6c04090b6b17f348804f7c45368"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c7d1152746b689e81e293e23eb8339e"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#a5c7d1152746b689e81e293e23eb8339e">lif_create_image</a> (char *lifimagename, char *liflabel, long dirsecs, long sectors)</td></tr>
<tr class="memdesc:a5c7d1152746b689e81e293e23eb8339e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create/Format a LIF disk image This can take a while to run, about 1 min for 10,000,000 bytes.  <a href="#a5c7d1152746b689e81e293e23eb8339e">More...</a><br /></td></tr>
<tr class="separator:a5c7d1152746b689e81e293e23eb8339e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:af219299ebad47daa6631415a8b41345a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lifutils_8h.html#af219299ebad47daa6631415a8b41345a">debuglevel</a></td></tr>
<tr class="memdesc:af219299ebad47daa6631415a8b41345a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Debug flag - used to log GPIB and emulator messages.  <a href="#af219299ebad47daa6631415a8b41345a">More...</a><br /></td></tr>
<tr class="separator:af219299ebad47daa6631415a8b41345a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a625b7a543a55b48e28ea93fbb61595eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LIF_CHUNK_SIZE&#160;&#160;&#160;(<a class="el" href="lifutils_8h.html#a9f32d2537f4daba6a314185cf52b7e56">LIF_SECTOR_SIZE</a>*<a class="el" href="lifutils_8h.html#a7e7f4ebd8f31cd7f9dcb0e9758ef8f44">LIF_CHUNKS</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lifutils_8h_source.html#l00031">31</a> of file <a class="el" href="lifutils_8h_source.html">lifutils.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7e7f4ebd8f31cd7f9dcb0e9758ef8f44"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LIF_CHUNKS&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>used for formatting </p>
<p>When formatting a disk define how many sectors we can write at once </p>

<p>Definition at line <a class="el" href="lifutils_8h_source.html#l00030">30</a> of file <a class="el" href="lifutils_8h_source.html">lifutils.h</a>.</p>

</div>
</div>
<a class="anchor" id="a99ad70dd3200a3ee46388bc2c36fe720"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LIF_DIR_SIZE&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>LIF directory entry size. </p>

<p>Definition at line <a class="el" href="lifutils_8h_source.html#l00034">34</a> of file <a class="el" href="lifutils_8h_source.html">lifutils.h</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00962">lif_create_image()</a>, <a class="el" href="lifutils_8c_source.html#l00496">lif_readdir()</a>, and <a class="el" href="lifutils_8c_source.html#l00534">lif_writedir()</a>.</p>

</div>
</div>
<a class="anchor" id="a8cfa79b094fc3a5db37b26761a639e6d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LIF_IMAGE_NAME_SIZE&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>size of image file name size used by lif_format() </p>

<p>Definition at line <a class="el" href="lifutils_8h_source.html#l00036">36</a> of file <a class="el" href="lifutils_8h_source.html">lifutils.h</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00462">lif_opendir()</a>.</p>

</div>
</div>
<a class="anchor" id="a9f32d2537f4daba6a314185cf52b7e56"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LIF_SECTOR_SIZE&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Depends on how much free ram we have. </p>

<p>Definition at line <a class="el" href="lifutils_8h_source.html#l00026">26</a> of file <a class="el" href="lifutils_8h_source.html">lifutils.h</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00870">lif_add_file()</a>, <a class="el" href="lifutils_8c_source.html#l00783">lif_ascii2lif()</a>, <a class="el" href="lifutils_8c_source.html#l00962">lif_create_image()</a>, <a class="el" href="lifutils_8c_source.html#l00567">lif_filelength()</a>, <a class="el" href="lifutils_8c_source.html#l00580">lif_find_free()</a>, <a class="el" href="lifutils_8c_source.html#l00462">lif_opendir()</a>, <a class="el" href="lifutils_8c_source.html#l00496">lif_readdir()</a>, <a class="el" href="lifutils_8c_source.html#l00673">lif_write_pad()</a>, and <a class="el" href="lifutils_8c_source.html#l00534">lif_writedir()</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="aebb3d0e746d3aa086e0baa48ad66b964"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structstat.html">stat</a> <a class="el" href="defines_8h.html#aebb3d0e746d3aa086e0baa48ad66b964">stat_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lifutils_8h_source.html#l00023">23</a> of file <a class="el" href="lifutils_8h_source.html">lifutils.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="acc02f6c04090b6b17f348804f7c45368"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long lif_add_file </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>lifimagename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>lifname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>userfile</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a user file to the LIF image The basename of the lifname, without extensions, is used as the LIF file name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lifimagename</td><td>LIF image name </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lifname</td><td>LIF file name </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">userfile</td><td>userfile name </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>size of data written into to LIF image, or -1 on error </dd></dl>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00870">870</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00037">lif_tests()</a>.</p>

</div>
</div>
<a class="anchor" id="a31f61566ccec3e137c93b259d508ea11"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long lif_ascii2lif </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlifdir__t.html">lifdir_t</a> *&#160;</td>
          <td class="paramname"><em>DIR</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert a user ASCII file into HP85 0xE010 LIF format We must know the convered file size BEFORE writting So we must call this function TWICE 1) find out how big the converted file is (<a class="el" href="structDIR.html">DIR</a> is NULL) 2) Specify where to put it (<a class="el" href="structDIR.html">DIR</a> is set) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">userfile</td><td>User ASCII file source </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*DIR</td><td>Where to write file if set (not NULL) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>size of LIF image in bytes, or -1 on error </dd></dl>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00783">783</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00870">lif_add_file()</a>.</p>

</div>
</div>
<a class="anchor" id="a0e71af1d76d982ee586717537dd67417"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lif_B2S </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert LIF space padded string name into normal string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*B</td><td>LIF name space padded </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">*name</td><td>string result  void </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00114">114</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00257">lif_UnPackDir()</a>, and <a class="el" href="lifutils_8c_source.html#l00221">lif_UnPackVolume()</a>.</p>

</div>
</div>
<a class="anchor" id="a68235d8edc4ac1583e77c90d16a877c8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t lif_BIN2BCD </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert number &gt;= 0 and &lt;= 99 to BCD. </p>
<ul>
<li>BCD format has each hex nibble has a digit 0 .. 9</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>number to convert. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BCD value </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>we assume the number is in range. </dd></dl>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00276">276</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00288">lif_time2lif()</a>.</p>

</div>
</div>
<a class="anchor" id="a2691478126c4c013b2dff751b6627921"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lif_closedir </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlifdir__t.html">lifdir_t</a> *&#160;</td>
          <td class="paramname"><em>DIR</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close LIF directory Modeled after Linux <a class="el" href="posix_8c.html#aaeac2b41e8c2c3a5f91c9bd511a8c0a6" title="POSIX closedir. ">closedir()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*DIR</td><td>pointer to LIF Volume/Directoy structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on sucesss, -1 on error </dd></dl>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00329">329</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00612">lif_dir()</a>, and <a class="el" href="lifutils_8c_source.html#l00580">lif_find_free()</a>.</p>

</div>
</div>
<a class="anchor" id="a5c7d1152746b689e81e293e23eb8339e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long lif_create_image </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>lifimagename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>liflabel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>dirsecs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>sectors</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create/Format a LIF disk image This can take a while to run, about 1 min for 10,000,000 bytes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lifimagename</td><td>LIF disk image name </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">liflabel</td><td>LIF Volume Label name </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dirsecs</td><td>Number of LIF directory sectors </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sectors</td><td>total disk image size in sectors </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bytes writting to disk image </dd></dl>
<p>Current Date</p>
<p>Open LIF disk image for writting</p>
<p>Initial file position</p>
<p>File type of 0xffff is last directory entry</p>
<p>FIXME this is the default that the HPdrive project uses, not sure of this</p>
<p>Zero out remining disk image </p>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00962">962</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="drives_8c_source.html#l01366">format_drives()</a>, and <a class="el" href="lifutils_8c_source.html#l00037">lif_tests()</a>.</p>

</div>
</div>
<a class="anchor" id="aca0a37c5d186a795d821d7c05c87dcc5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lif_dir </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>lifimagename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Display a LIF image file directory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lifimagename</td><td>LIF disk image name </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 on error or number of files found </dd></dl>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00612">612</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00037">lif_tests()</a>.</p>

</div>
</div>
<a class="anchor" id="a1038b27c4593489c48a46e2f140b675a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lif_dir_clear </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlifdir__t.html">lifdir_t</a> *&#160;</td>
          <td class="paramname"><em>DIR</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear main <a class="el" href="structlifdir__t.html" title="Master LIF data structure Contains image file name Volume Structure Current Directory Entry read/writ...">lifdir_t</a> <a class="el" href="structDIR.html">DIR</a> structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*DIR</td><td>pointer to <a class="el" href="structDIR.html">DIR</a> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00303">303</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00462">lif_opendir()</a>.</p>

</div>
</div>
<a class="anchor" id="ac24d806ba3d75f423b1e17e5528fc90e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lif_dirent_clear </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlifdir__t.html">lifdir_t</a> *&#160;</td>
          <td class="paramname"><em>DIR</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear <a class="el" href="structlifdirent__t.html" title="Directory layout. ">lifdirent_t</a> DE structure in <a class="el" href="structDIR.html">DIR</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*DIR</td><td>pointer to <a class="el" href="structDIR.html">DIR</a> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00312">312</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00962">lif_create_image()</a>.</p>

</div>
</div>
<a class="anchor" id="a5c10caf1bb5c6d712e11c6a25cf9e1e7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long lif_filelength </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlifdirent__t.html">lifdirent_t</a> *&#160;</td>
          <td class="paramname"><em>DE</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get LIF file size from directory entry </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>LIF disk image name </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">DE</td><td>LIF directory entry  void </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00567">567</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00612">lif_dir()</a>, and <a class="el" href="lifutils_8c_source.html#l00580">lif_find_free()</a>.</p>

</div>
</div>
<a class="anchor" id="a5f6f0773f5f6e94bc1bb6c63d32e243f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structlifdir__t.html">lifdir_t</a>* lif_find_free </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find offset to first free sector that is big enough Modeled after Linux <a class="el" href="posix_8c.html#a1508fedaef509d2976b43300306d1400">readdir()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*DIR</td><td>to LIF Volume/Diractoy structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Directory pointer </dd></dl>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00580">580</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00870">lif_add_file()</a>.</p>

</div>
</div>
<a class="anchor" id="a4526efb5e3517ff7bb83e6ac08e4c6b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lif_fixname </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert a file name (unix/fat32) format into a valid LIF name First we do a basename on the string (remove any leading file paths) Next we remove any extensions LIF names may have only these characters: [A-Z][A-Z0-09_]+ LIF names are converted to upper case LIF names are padded at the end with spaces. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">*B</td><td>output LIF string </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*name</td><td>input string </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>maximum size of output string </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>length of result </dd></dl>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00148">148</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00870">lif_add_file()</a>, and <a class="el" href="lifutils_8c_source.html#l00962">lif_create_image()</a>.</p>

</div>
</div>
<a class="anchor" id="adcd52baa64a03567d69ce3579e3f66ea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lif_help </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Help Menu for User invoked GPIB functions and tasks See: int <a class="el" href="gpib__tests_8h.html#aed0c6a0a794f33d5cf7691c96d3e4955" title="GPIB user tests User invoked GPIB functions and tasks. ">gpib_tests(char *str)</a> </p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00026">26</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="main_8c_source.html#l00037">help()</a>.</p>

</div>
</div>
<a class="anchor" id="afe395b08bb0cfe54ee46529a0181c11e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="posix_8h.html#aed4dabeb9f7c518ded42f930a04abce8">FILE</a>* lif_open </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a file that must exist. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*name</td><td>file name of LIF image </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*mode</td><td>open mode - see fopen </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>FILE * pointer </dd></dl>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00339">339</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00783">lif_ascii2lif()</a>, <a class="el" href="lifutils_8c_source.html#l00377">lif_read()</a>, and <a class="el" href="lifutils_8c_source.html#l00415">lif_write()</a>.</p>

</div>
</div>
<a class="anchor" id="a6b37a1c50e14b4e64e8110f13b74dfeb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structlifdir__t.html">lifdir_t</a>* lif_opendir </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00462">462</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00612">lif_dir()</a>, and <a class="el" href="lifutils_8c_source.html#l00580">lif_find_free()</a>.</p>

</div>
</div>
<a class="anchor" id="a85f2680ef77647d6f09ffbaf465879a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lif_PackDir </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlifdir__t.html">lifdir_t</a> *&#160;</td>
          <td class="paramname"><em>DIR</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pack DireEntryType data into bytes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">B</td><td>byte vector to pack data into </td></tr>
    <tr><td class="paramdir"></td><td class="paramname"></td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00241">241</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00962">lif_create_image()</a>, and <a class="el" href="lifutils_8c_source.html#l00534">lif_writedir()</a>.</p>

</div>
</div>
<a class="anchor" id="a2ead31a7c8161db8ee528ff0cb7d7325"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lif_PackVolume </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlifvol__t.html">lifvol_t</a> *&#160;</td>
          <td class="paramname"><em>V</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pack <a class="el" href="structlifvol__t.html" title="Disk Layout. ">lifvol_t</a> data into bytes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">B</td><td>byte vector to pack data into </td></tr>
    <tr><td class="paramdir"></td><td class="paramname"></td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00201">201</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00962">lif_create_image()</a>.</p>

</div>
</div>
<a class="anchor" id="afd91a3610ac5b104097ac0686a56cefd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long lif_read </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read data from a LIF image File is closed after read WHY? We want time minimize file open to to avoid corruption on the SDCARD. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*name</td><td>file name of LIF image </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*buf</td><td>read buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>read offset </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bytes</td><td>number of bytes to read </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of bytes read - OR - -1 on error </dd></dl>
<p>Initial file position </p>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00377">377</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00462">lif_opendir()</a>, and <a class="el" href="lifutils_8c_source.html#l00496">lif_readdir()</a>.</p>

</div>
</div>
<a class="anchor" id="a470203a61f36e84f411fa42e965b731a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structlifdirent__t.html">lifdirent_t</a>* lif_readdir </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlifdir__t.html">lifdir_t</a> *&#160;</td>
          <td class="paramname"><em>DIR</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open LIF directory for reading Modeled after Linux <a class="el" href="posix_8c.html#a1508fedaef509d2976b43300306d1400">readdir()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*DIR</td><td>to LIF Volume/Diractoy structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="structlifdirent__t.html" title="Directory layout. ">lifdirent_t</a> filled with directory structure, or NULL on error of end of Directory </dd></dl>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00496">496</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00612">lif_dir()</a>, and <a class="el" href="lifutils_8c_source.html#l00580">lif_find_free()</a>.</p>

</div>
</div>
<a class="anchor" id="a3581f407fe6c5cbe6a5db361fe49d387"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lif_S2B </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>string to LIF directory entry </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">*B</td><td>LIF result </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*name</td><td>string  void </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00128">128</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00241">lif_PackDir()</a>, and <a class="el" href="lifutils_8c_source.html#l00201">lif_PackVolume()</a>.</p>

</div>
</div>
<a class="anchor" id="aabcbc42b059eb4dadaab5c63778547f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="defines_8h.html#aebb3d0e746d3aa086e0baa48ad66b964">stat_t</a>* lif_stat </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stat a file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*name</td><td>file name of LIF image </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>struct stat * </dd></dl>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00353">353</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00462">lif_opendir()</a>.</p>

</div>
</div>
<a class="anchor" id="a32dc220253a6108ad1d2f6b06318d326"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lif_tests </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>LIFGuser tests. </p>
<dl class="section return"><dt>Returns</dt><dd>1 matched token, 0 if not </dd></dl>
<p>format LIF image </p>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00037">37</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="main_8c_source.html#l00182">task()</a>.</p>

</div>
</div>
<a class="anchor" id="af2e35296eec6eba5cb2d5c9964d0b738"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lif_time2lif </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>bcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="time_8h.html#a3346b04b0420b32ccf6b706551b70762">time_t</a>&#160;</td>
          <td class="paramname"><em>t</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>UNIX time to LIF time format. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">bcd</td><td>packed 6 byte BCD LIF time YY,MM,DD,HH,MM,SS </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">t</td><td>UNIX time_t time value </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="time_8c.html#a32b1cbd925752f0cd61d202bbe204a69" title="Return second from epoch - POSIX function. ">time()</a> in <a class="el" href="time_8c.html" title="Common Linux/POSIX time functions. ">time.c</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00288">288</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00962">lif_create_image()</a>.</p>

</div>
</div>
<a class="anchor" id="ab5a6d92768c95407e731ddded99040f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lif_UnPackDir </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlifdir__t.html">lifdir_t</a> *&#160;</td>
          <td class="paramname"><em>DIR</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>UnPack <a class="el" href="structlifdirent__t.html" title="Directory layout. ">lifdirent_t</a> data from bytes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">B</td><td>byte vector to extract data from </td></tr>
    <tr><td class="paramdir"></td><td class="paramname"></td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00257">257</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00496">lif_readdir()</a>.</p>

</div>
</div>
<a class="anchor" id="a199fe2e35d157581120008a78d26b4cd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lif_UnPackVolume </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlifvol__t.html">lifvol_t</a> *&#160;</td>
          <td class="paramname"><em>V</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>UnPack <a class="el" href="structlifvol__t.html" title="Disk Layout. ">lifvol_t</a> data from bytes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">B</td><td>byte vector to pack data into </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">V</td><td><a class="el" href="structlifvol__t.html" title="Disk Layout. ">lifvol_t</a> structure pointer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>null </dd></dl>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00221">221</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00462">lif_opendir()</a>.</p>

</div>
</div>
<a class="anchor" id="a49a3bb535736ef9c2948a391a03cef4e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lif_vol_clear </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlifdir__t.html">lifdir_t</a> *&#160;</td>
          <td class="paramname"><em>DIR</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear <a class="el" href="structlifvol__t.html" title="Disk Layout. ">lifvol_t</a> V structure in <a class="el" href="structDIR.html">DIR</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*DIR</td><td>pointer to <a class="el" href="structDIR.html">DIR</a> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00320">320</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00962">lif_create_image()</a>.</p>

</div>
</div>
<a class="anchor" id="a6be20c8f3213656e828aae93b303d776"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lif_write </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write data to an LIF image File is closed, positioned to the end of file, after write Why? We want time minimize file open to to avoid corruption on the SDCARD. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*name</td><td>file name of LIF image </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*buf</td><td>write buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>write offset </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bytes</td><td>number of bytes to write </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 on error or number of bytes written </dd></dl>
<p>Initial file position </p>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00415">415</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00673">lif_write_pad()</a>, and <a class="el" href="lifutils_8c_source.html#l00534">lif_writedir()</a>.</p>

</div>
</div>
<a class="anchor" id="ae077333ae15ec21e05b9da7f9b77e63a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lif_write_pad </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlifdir__t.html">lifdir_t</a> *&#160;</td>
          <td class="paramname"><em>DIR</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pad the current sector to the end When <a class="el" href="structDIR.html">DIR</a> is null we do not write, just compute the write size. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname"><a class="el" href="structDIR.html">DIR</a></td><td>LIF image file sructure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>offset to write to </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pad size in bytes , -1 on error </dd></dl>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00673">673</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00783">lif_ascii2lif()</a>, and <a class="el" href="lifutils_8c_source.html#l00673">lif_write_pad()</a>.</p>

</div>
</div>
<a class="anchor" id="a9beff3d539e7a3c08e3e92cfdecc3fcb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lif_write_string </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlifdir__t.html">lifdir_t</a> *&#160;</td>
          <td class="paramname"><em>DIR</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>str</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>HP85 ASCII LIF records have a 3 byte header ef [ff]* = end of data in this sector (no size) , pad with ff's optionally if there is room df size = string cf size = split accross sector end "6f size" at start of next sector but the 6f size bytes are not included in cf size! (yuck!) 6f size = split continue (always starts at sector boundry) df 00 00 ef [ff]* = EOF (df size = 0) ef send of sector and optional padding size = 16 bits LSB MSB. </p>
<p>Example: 000080e0 : 4b 7c 22 0d cf 29 00 31 34 20 44 49 53 50 20 22 : K|"..).14 DISP " 000080f0 : 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 5f : _ 00008100 : 6f 10 00 5f 5f 5f 5f 5f 5f 5f 5f 5f 5f 5f 5f 5f : o.._____________ 00008110 : 5f 22 0d df 2b 00 31 35 20 44 49 53 50 20 22 20 : _"..+.15 DISP "</p>
<p>cf 29 00 (19 is to sector end) (new sector start with 6F 10 00 (10 is remainder) So 29 = 19 and 10 (yuck!)Write a string with header to a lif file When <a class="el" href="structDIR.html">DIR</a> is null we do not write, just compute the write size </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname"><a class="el" href="structDIR.html">DIR</a></td><td>LIF image file sructure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>offset to write to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">str</td><td>string to write </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>wtite size in bytes, -1 on error </dd></dl>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00723">723</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00783">lif_ascii2lif()</a>, and <a class="el" href="lifutils_8c_source.html#l00673">lif_write_pad()</a>.</p>

</div>
</div>
<a class="anchor" id="a5bde42f25a87ea3db74cf7b379022ddb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long lif_writedir </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlifdir__t.html">lifdir_t</a> *&#160;</td>
          <td class="paramname"><em>DIR</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a director entry Modeled after Linux <a class="el" href="posix_8c.html#a1508fedaef509d2976b43300306d1400">readdir()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*DIR</td><td>to LIF Volume/Diractoy structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of bytes written </dd></dl>

<p>Definition at line <a class="el" href="lifutils_8c_source.html#l00534">534</a> of file <a class="el" href="lifutils_8c_source.html">lifutils.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00870">lif_add_file()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="af219299ebad47daa6631415a8b41345a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int debuglevel</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Debug flag - used to log GPIB and emulator messages. </p>

<p>Definition at line <a class="el" href="gpib__task_8c_source.html#l00032">32</a> of file <a class="el" href="gpib__task_8c_source.html">gpib_task.c</a>.</p>

<p>Referenced by <a class="el" href="gpib__task_8c_source.html#l00613">GPIB()</a>, <a class="el" href="gpib__task_8c_source.html#l00268">gpib_error_test()</a>, <a class="el" href="gpib__task_8c_source.html#l00039">gpib_file_init()</a>, <a class="el" href="gpib__task_8c_source.html#l00732">GPIB_LISTEN()</a>, <a class="el" href="gpib__task_8c_source.html#l00886">GPIB_SECONDARY_ADDRESS()</a>, <a class="el" href="gpib__task_8c_source.html#l00806">GPIB_TALK()</a>, <a class="el" href="gpib__task_8c_source.html#l00445">gpib_task()</a>, <a class="el" href="gpib__task_8c_source.html#l00938">listen_cleanup()</a>, and <a class="el" href="gpib__task_8c_source.html#l00580">Send_Identify()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jun 18 2017 15:10:31 for HP85 GPIB Disk Emulator by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>HP85 GPIB Disk Emulator: gpib/amigo.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">HP85 GPIB Disk Emulator
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">HP85GPIBDiskEmulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d6b38c553053a83c6809a5b0d50557a4.html">gpib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">amigo.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>AMIGO disk emulator for HP85 disk emulator project for AVR8.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="hardware_8h_source.html">hardware/hardware.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="defines_8h_source.html">defines.h</a>&quot;</code><br/>
</div>
<p><a href="amigo_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a2853286c50783f39131810ec2b0e9610"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#a2853286c50783f39131810ec2b0e9610">UNL</a>&#160;&#160;&#160;0x3F</td></tr>
<tr class="separator:a2853286c50783f39131810ec2b0e9610"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa370bdc64b3b5d37eeb63a4c499f3ef3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#aa370bdc64b3b5d37eeb63a4c499f3ef3">UNT</a>&#160;&#160;&#160;0x5F</td></tr>
<tr class="separator:aa370bdc64b3b5d37eeb63a4c499f3ef3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af75952fda4dcd61b5fd81ecc2f764413"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#af75952fda4dcd61b5fd81ecc2f764413">LLO</a>&#160;&#160;&#160;0x11</td></tr>
<tr class="separator:af75952fda4dcd61b5fd81ecc2f764413"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a865c763cb20dd8d8d1bbe2df29f6a50d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#a865c763cb20dd8d8d1bbe2df29f6a50d">DCL</a>&#160;&#160;&#160;0x14</td></tr>
<tr class="separator:a865c763cb20dd8d8d1bbe2df29f6a50d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9720ef12852cf4e0293b5a0a8b19bdc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#aa9720ef12852cf4e0293b5a0a8b19bdc">PPU</a>&#160;&#160;&#160;0x15</td></tr>
<tr class="separator:aa9720ef12852cf4e0293b5a0a8b19bdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b23fe370a3a09cc47acd1e837a5b125"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#a4b23fe370a3a09cc47acd1e837a5b125">SPE</a>&#160;&#160;&#160;0x18</td></tr>
<tr class="separator:a4b23fe370a3a09cc47acd1e837a5b125"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fee30674709bf7cf2601f2e499372cf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#a3fee30674709bf7cf2601f2e499372cf">SPD</a>&#160;&#160;&#160;0x19</td></tr>
<tr class="separator:a3fee30674709bf7cf2601f2e499372cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a5ce0eaf1fcd7131fba9ec08df9bc1e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#a4a5ce0eaf1fcd7131fba9ec08df9bc1e">GTL</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="separator:a4a5ce0eaf1fcd7131fba9ec08df9bc1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26ebbac1e849f9c61421e7279c597f2b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#a26ebbac1e849f9c61421e7279c597f2b">SDC</a>&#160;&#160;&#160;0x04</td></tr>
<tr class="separator:a26ebbac1e849f9c61421e7279c597f2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa53c4577418b64bd81732884048fae00"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#aa53c4577418b64bd81732884048fae00">PPC</a>&#160;&#160;&#160;0x05</td></tr>
<tr class="separator:aa53c4577418b64bd81732884048fae00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a982a66f513611f7f83ebfa4b4ecf1df9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#a982a66f513611f7f83ebfa4b4ecf1df9">GET</a>&#160;&#160;&#160;0x08</td></tr>
<tr class="separator:a982a66f513611f7f83ebfa4b4ecf1df9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62d9d5d853e9cf2072dd811ce956ec56"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#a62d9d5d853e9cf2072dd811ce956ec56">TCT</a>&#160;&#160;&#160;0x09</td></tr>
<tr class="separator:a62d9d5d853e9cf2072dd811ce956ec56"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab63435382919a7106a374b021861a2e1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#ab63435382919a7106a374b021861a2e1">amigo_init</a> (void)</td></tr>
<tr class="memdesc:ab63435382919a7106a374b021861a2e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize Amigo state machine, Disk Position, Error status.  <a href="#ab63435382919a7106a374b021861a2e1">More...</a><br/></td></tr>
<tr class="separator:ab63435382919a7106a374b021861a2e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cbb86a2e44ef4a770a370dcb65d3fbf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#a8cbb86a2e44ef4a770a370dcb65d3fbf">amigo_request_logical_address</a> (void)</td></tr>
<tr class="memdesc:a8cbb86a2e44ef4a770a370dcb65d3fbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set current address in amigo_logical_address[].  <a href="#a8cbb86a2e44ef4a770a370dcb65d3fbf">More...</a><br/></td></tr>
<tr class="separator:a8cbb86a2e44ef4a770a370dcb65d3fbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb2f0c0517c5c10c38f8e15b8b281a8c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#afb2f0c0517c5c10c38f8e15b8b281a8c">amigo_request_status</a> (void)</td></tr>
<tr class="memdesc:afb2f0c0517c5c10c38f8e15b8b281a8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set drive status in amigo_status[].  <a href="#afb2f0c0517c5c10c38f8e15b8b281a8c">More...</a><br/></td></tr>
<tr class="separator:afb2f0c0517c5c10c38f8e15b8b281a8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c6a930fa7cc03f1e926ae99dbe1881c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#a7c6a930fa7cc03f1e926ae99dbe1881c">amigo_send_logical_address</a> (void)</td></tr>
<tr class="memdesc:a7c6a930fa7cc03f1e926ae99dbe1881c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send current address in amigo_logical_address[].  <a href="#a7c6a930fa7cc03f1e926ae99dbe1881c">More...</a><br/></td></tr>
<tr class="separator:a7c6a930fa7cc03f1e926ae99dbe1881c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4df946daf08c99b2d3b85318c9e9df8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#af4df946daf08c99b2d3b85318c9e9df8">amigo_send_status</a> (void)</td></tr>
<tr class="memdesc:af4df946daf08c99b2d3b85318c9e9df8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send drive status in amigo_status[].  <a href="#af4df946daf08c99b2d3b85318c9e9df8">More...</a><br/></td></tr>
<tr class="separator:af4df946daf08c99b2d3b85318c9e9df8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6c9b56f7f0179eecd6d57c2844bc56c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#ae6c9b56f7f0179eecd6d57c2844bc56c">amigo_increment</a> (char *msg)</td></tr>
<tr class="memdesc:ae6c9b56f7f0179eecd6d57c2844bc56c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increment sector if it will not overflow.  <a href="#ae6c9b56f7f0179eecd6d57c2844bc56c">More...</a><br/></td></tr>
<tr class="separator:ae6c9b56f7f0179eecd6d57c2844bc56c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a737360bbcfd3fa3cf9d504757f202e48"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#a737360bbcfd3fa3cf9d504757f202e48">amigo_seek</a> (<a class="el" href="structDiskType.html">DiskType</a> *p)</td></tr>
<tr class="memdesc:a737360bbcfd3fa3cf9d504757f202e48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Seek to the position held in the disk structure.  <a href="#a737360bbcfd3fa3cf9d504757f202e48">More...</a><br/></td></tr>
<tr class="separator:a737360bbcfd3fa3cf9d504757f202e48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab08912bf94dc6e8fbe87990ff41f46f0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#ab08912bf94dc6e8fbe87990ff41f46f0">amigo_verify</a> (uint16_t sectors)</td></tr>
<tr class="memdesc:ab08912bf94dc6e8fbe87990ff41f46f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify Disk Sectors at current position.  <a href="#ab08912bf94dc6e8fbe87990ff41f46f0">More...</a><br/></td></tr>
<tr class="separator:ab08912bf94dc6e8fbe87990ff41f46f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85a3d11b8dd534100df603e4c3514c92"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#a85a3d11b8dd534100df603e4c3514c92">amigo_format</a> (uint8_t override, uint8_t interleave, uint8_t db)</td></tr>
<tr class="memdesc:a85a3d11b8dd534100df603e4c3514c92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Format Disk.  <a href="#a85a3d11b8dd534100df603e4c3514c92">More...</a><br/></td></tr>
<tr class="separator:a85a3d11b8dd534100df603e4c3514c92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4934ae332e168979dbb865a9948de88b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#a4934ae332e168979dbb865a9948de88b">amigo_buffered_read</a> (void)</td></tr>
<tr class="memdesc:a4934ae332e168979dbb865a9948de88b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do a buffered read of the current sector.  <a href="#a4934ae332e168979dbb865a9948de88b">More...</a><br/></td></tr>
<tr class="separator:a4934ae332e168979dbb865a9948de88b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9c3505761b1afba4f47a6b593527583"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#ae9c3505761b1afba4f47a6b593527583">amigo_buffered_write</a> (void)</td></tr>
<tr class="memdesc:ae9c3505761b1afba4f47a6b593527583"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do a buffered write of the current sector.  <a href="#ae9c3505761b1afba4f47a6b593527583">More...</a><br/></td></tr>
<tr class="separator:ae9c3505761b1afba4f47a6b593527583"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5cfdd8675fce8b93259c76782501394"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#af5cfdd8675fce8b93259c76782501394">amigo_cmd_dsj</a> (void)</td></tr>
<tr class="memdesc:af5cfdd8675fce8b93259c76782501394"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send DSJ.  <a href="#af5cfdd8675fce8b93259c76782501394">More...</a><br/></td></tr>
<tr class="separator:af5cfdd8675fce8b93259c76782501394"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1893674c480c08927066d7e10029d01c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#a1893674c480c08927066d7e10029d01c">amigo_cmd_wakeup</a> (void)</td></tr>
<tr class="memdesc:a1893674c480c08927066d7e10029d01c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wakeup (undocumented), just enable PPR response.  <a href="#a1893674c480c08927066d7e10029d01c">More...</a><br/></td></tr>
<tr class="separator:a1893674c480c08927066d7e10029d01c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae61925e6fb971862b8b0390c67bc164c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#ae61925e6fb971862b8b0390c67bc164c">amigo_cmd_clear</a> (void)</td></tr>
<tr class="memdesc:ae61925e6fb971862b8b0390c67bc164c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Response to selected device clear or all clear.  <a href="#ae61925e6fb971862b8b0390c67bc164c">More...</a><br/></td></tr>
<tr class="separator:ae61925e6fb971862b8b0390c67bc164c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c99539773ae8be3bd4d3bd7493c16d6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#a6c99539773ae8be3bd4d3bd7493c16d6">amigo_todo_op</a> (uint8_t <a class="el" href="gpib_8h.html#a25538708e408bbc21b380cb6f709f5d8">secondary</a>, uint8_t opcode, int len)</td></tr>
<tr class="memdesc:a6c99539773ae8be3bd4d3bd7493c16d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Report any Unimplimented commands with Op Codes.  <a href="#a6c99539773ae8be3bd4d3bd7493c16d6">More...</a><br/></td></tr>
<tr class="separator:a6c99539773ae8be3bd4d3bd7493c16d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a437bef06e567b3f6728f2519b9065354"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#a437bef06e567b3f6728f2519b9065354">amigo_todo</a> (uint8_t <a class="el" href="gpib_8h.html#a25538708e408bbc21b380cb6f709f5d8">secondary</a>)</td></tr>
<tr class="memdesc:a437bef06e567b3f6728f2519b9065354"><td class="mdescLeft">&#160;</td><td class="mdescRight">Report any Unimplimented commands.  <a href="#a437bef06e567b3f6728f2519b9065354">More...</a><br/></td></tr>
<tr class="separator:a437bef06e567b3f6728f2519b9065354"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fc6f1413199d33d2b32e675dd45e181"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#a2fc6f1413199d33d2b32e675dd45e181">Amigo_Command</a> (int <a class="el" href="gpib_8h.html#a25538708e408bbc21b380cb6f709f5d8">secondary</a>)</td></tr>
<tr class="memdesc:a2fc6f1413199d33d2b32e675dd45e181"><td class="mdescLeft">&#160;</td><td class="mdescRight">Amigo Command and OP Code Processing functions.  <a href="#a2fc6f1413199d33d2b32e675dd45e181">More...</a><br/></td></tr>
<tr class="separator:a2fc6f1413199d33d2b32e675dd45e181"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7271e45e6b3bb6edef42da4ad5bb25a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#ad7271e45e6b3bb6edef42da4ad5bb25a">Amigo_Execute</a> (int <a class="el" href="gpib_8h.html#a25538708e408bbc21b380cb6f709f5d8">secondary</a>)</td></tr>
<tr class="memdesc:ad7271e45e6b3bb6edef42da4ad5bb25a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Amigo Execute command processing.  <a href="#ad7271e45e6b3bb6edef42da4ad5bb25a">More...</a><br/></td></tr>
<tr class="separator:ad7271e45e6b3bb6edef42da4ad5bb25a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77b7d46bd469c79c73696a9ae2a3543d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#a77b7d46bd469c79c73696a9ae2a3543d">AMIGO_COMMANDS</a> (uint8_t ch)</td></tr>
<tr class="memdesc:a77b7d46bd469c79c73696a9ae2a3543d"><td class="mdescLeft">&#160;</td><td class="mdescRight">AMIGO Command state processing.  <a href="#a77b7d46bd469c79c73696a9ae2a3543d">More...</a><br/></td></tr>
<tr class="separator:a77b7d46bd469c79c73696a9ae2a3543d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a7cde3fe5600434f06d6c872090dc5390"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structVolumeLabelType.html">VolumeLabelType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#a7cde3fe5600434f06d6c872090dc5390">vl</a></td></tr>
<tr class="memdesc:a7cde3fe5600434f06d6c872090dc5390"><td class="mdescLeft">&#160;</td><td class="mdescRight">LIF data structures used by stand alone formatting utility.  <a href="#a7cde3fe5600434f06d6c872090dc5390">More...</a><br/></td></tr>
<tr class="separator:a7cde3fe5600434f06d6c872090dc5390"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdc9db327daa9bd83d5df64bf016a4da"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structDirEntryType.html">DirEntryType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#acdc9db327daa9bd83d5df64bf016a4da">de</a></td></tr>
<tr class="memdesc:acdc9db327daa9bd83d5df64bf016a4da"><td class="mdescLeft">&#160;</td><td class="mdescRight">LIF DIrectory Entry.  <a href="#acdc9db327daa9bd83d5df64bf016a4da">More...</a><br/></td></tr>
<tr class="separator:acdc9db327daa9bd83d5df64bf016a4da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa06fad89376ae2fd6a76e740b065e2a5"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#aa06fad89376ae2fd6a76e740b065e2a5">amigo_state</a></td></tr>
<tr class="memdesc:aa06fad89376ae2fd6a76e740b065e2a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">AMIGO emulator state machine index.  <a href="#aa06fad89376ae2fd6a76e740b065e2a5">More...</a><br/></td></tr>
<tr class="separator:aa06fad89376ae2fd6a76e740b065e2a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8689fc8752751657671c10ed9744b6a0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="amigo_8h.html#a8689fc8752751657671c10ed9744b6a0">Amigo_Errors</a></td></tr>
<tr class="separator:a8689fc8752751657671c10ed9744b6a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>AMIGO disk emulator for HP85 disk emulator project for AVR8. </p>
<dl class="section user"><dt>Edit History - [1.0] [Mike Gore] Initial revision of file.</dt><dd></dd></dl>
<dl class="section user"><dt>Copyright &copy; 2014 Mike Gore, Inc. All rights reserved.</dt><dd></dd></dl>
<dl class="section user"><dt>Based on work by Anders Gustafsson.</dt><dd></dd></dl>
<dl class="section user"><dt>Copyright &copy; 2014 Anders Gustafsson All rights reserved..</dt><dd></dd></dl>

<p>Definition in file <a class="el" href="amigo_8h_source.html">amigo.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a865c763cb20dd8d8d1bbe2df29f6a50d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DCL&#160;&#160;&#160;0x14</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="amigo_8h_source.html#l00026">26</a> of file <a class="el" href="amigo_8h_source.html">amigo.h</a>.</p>

<p>Referenced by <a class="el" href="gpib__task_8c_source.html#l00663">GPIB()</a>.</p>

</div>
</div>
<a class="anchor" id="a982a66f513611f7f83ebfa4b4ecf1df9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GET&#160;&#160;&#160;0x08</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="amigo_8h_source.html#l00033">33</a> of file <a class="el" href="amigo_8h_source.html">amigo.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4a5ce0eaf1fcd7131fba9ec08df9bc1e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GTL&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="amigo_8h_source.html#l00030">30</a> of file <a class="el" href="amigo_8h_source.html">amigo.h</a>.</p>

</div>
</div>
<a class="anchor" id="af75952fda4dcd61b5fd81ecc2f764413"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LLO&#160;&#160;&#160;0x11</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="amigo_8h_source.html#l00025">25</a> of file <a class="el" href="amigo_8h_source.html">amigo.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa53c4577418b64bd81732884048fae00"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PPC&#160;&#160;&#160;0x05</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="amigo_8h_source.html#l00032">32</a> of file <a class="el" href="amigo_8h_source.html">amigo.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa9720ef12852cf4e0293b5a0a8b19bdc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PPU&#160;&#160;&#160;0x15</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="amigo_8h_source.html#l00027">27</a> of file <a class="el" href="amigo_8h_source.html">amigo.h</a>.</p>

</div>
</div>
<a class="anchor" id="a26ebbac1e849f9c61421e7279c597f2b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SDC&#160;&#160;&#160;0x04</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="amigo_8h_source.html#l00031">31</a> of file <a class="el" href="amigo_8h_source.html">amigo.h</a>.</p>

<p>Referenced by <a class="el" href="gpib__task_8c_source.html#l00663">GPIB()</a>.</p>

</div>
</div>
<a class="anchor" id="a3fee30674709bf7cf2601f2e499372cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPD&#160;&#160;&#160;0x19</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="amigo_8h_source.html#l00029">29</a> of file <a class="el" href="amigo_8h_source.html">amigo.h</a>.</p>

<p>Referenced by <a class="el" href="gpib__task_8c_source.html#l00663">GPIB()</a>.</p>

</div>
</div>
<a class="anchor" id="a4b23fe370a3a09cc47acd1e837a5b125"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPE&#160;&#160;&#160;0x18</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="amigo_8h_source.html#l00028">28</a> of file <a class="el" href="amigo_8h_source.html">amigo.h</a>.</p>

<p>Referenced by <a class="el" href="gpib__task_8c_source.html#l00663">GPIB()</a>, and <a class="el" href="spi_8c_source.html#l00181">SPI0_Init()</a>.</p>

</div>
</div>
<a class="anchor" id="a62d9d5d853e9cf2072dd811ce956ec56"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TCT&#160;&#160;&#160;0x09</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="amigo_8h_source.html#l00034">34</a> of file <a class="el" href="amigo_8h_source.html">amigo.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2853286c50783f39131810ec2b0e9610"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UNL&#160;&#160;&#160;0x3F</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="amigo_8h_source.html#l00023">23</a> of file <a class="el" href="amigo_8h_source.html">amigo.h</a>.</p>

<p>Referenced by <a class="el" href="gpib__task_8c_source.html#l00280">GPIB_COMMANDS()</a>, and <a class="el" href="gpib__task_8c_source.html#l00768">GPIB_LISTEN()</a>.</p>

</div>
</div>
<a class="anchor" id="aa370bdc64b3b5d37eeb63a4c499f3ef3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UNT&#160;&#160;&#160;0x5F</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="amigo_8h_source.html#l00024">24</a> of file <a class="el" href="amigo_8h_source.html">amigo.h</a>.</p>

<p>Referenced by <a class="el" href="amigo_8c_source.html#l01278">AMIGO_COMMANDS()</a>, <a class="el" href="amigo_8c_source.html#l01166">Amigo_Execute()</a>, <a class="el" href="amigo_8c_source.html#l00816">amigo_todo()</a>, <a class="el" href="amigo_8c_source.html#l00791">amigo_todo_op()</a>, <a class="el" href="gpib__task_8c_source.html#l00280">GPIB_COMMANDS()</a>, <a class="el" href="gpib__task_8c_source.html#l00768">GPIB_LISTEN()</a>, <a class="el" href="gpib_8c_source.html#l00713">gpib_read_byte()</a>, <a class="el" href="gpib__task_8c_source.html#l00838">GPIB_TALK()</a>, and <a class="el" href="gpib__task_8c_source.html#l00359">gpib_task()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a4934ae332e168979dbb865a9948de88b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amigo_buffered_read </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do a buffered read of the current sector. </p>
<ul>
<li>Reference: A33. <dl class="section return"><dt>Returns</dt><dd>0 ok </dd>
<dd>
GPIB Errors status,Sets dsj and Amigo_errors </dd></dl>
</li>
</ul>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000005">Todo:</a></b></dt><dd>Do we fail on overflow ? currently djs is set - do we want to report that now ? </dd></dl>

<p>Definition at line <a class="el" href="amigo_8c_source.html#l00550">550</a> of file <a class="el" href="amigo_8c_source.html">amigo.c</a>.</p>

<p>Referenced by <a class="el" href="amigo_8c_source.html#l01166">Amigo_Execute()</a>.</p>

</div>
</div>
<a class="anchor" id="ae9c3505761b1afba4f47a6b593527583"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amigo_buffered_write </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do a buffered write of the current sector. </p>
<ul>
<li>Reference: A43. <dl class="section return"><dt>Returns</dt><dd>0 ok </dd>
<dd>
GPIB Errors status,Sets dsj and Amigo_errors </dd></dl>
</li>
</ul>

<p>Definition at line <a class="el" href="amigo_8c_source.html#l00616">616</a> of file <a class="el" href="amigo_8c_source.html">amigo.c</a>.</p>

<p>Referenced by <a class="el" href="amigo_8c_source.html#l01166">Amigo_Execute()</a>.</p>

</div>
</div>
<a class="anchor" id="ae61925e6fb971862b8b0390c67bc164c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amigo_cmd_clear </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Response to selected device clear or all clear. </p>
<ul>
<li>Reference: A23.</li>
<li>Select sector 0. <dl class="section return"><dt>Returns</dt><dd>0 </dd></dl>
</li>
</ul>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000008">Todo:</a></b></dt><dd>FIXME</dd></dl>
<p>Clear the DSJ byte that might be 2 after powerup</p>

<p>Definition at line <a class="el" href="amigo_8c_source.html#l00763">763</a> of file <a class="el" href="amigo_8c_source.html">amigo.c</a>.</p>

<p>Referenced by <a class="el" href="gpib__task_8c_source.html#l00663">GPIB()</a>.</p>

</div>
</div>
<a class="anchor" id="af5cfdd8675fce8b93259c76782501394"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amigo_cmd_dsj </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send DSJ. </p>
<ul>
<li>Reference: A11. <dl class="section return"><dt>Returns</dt><dd>0 ok </dd>
<dd>
GPIB send Errors status</dd></dl>
</li>
<li>Sets dsj and Amigo_errors </li>
</ul>

<p>Definition at line <a class="el" href="amigo_8c_source.html#l00683">683</a> of file <a class="el" href="amigo_8c_source.html">amigo.c</a>.</p>

<p>Referenced by <a class="el" href="amigo_8c_source.html#l01278">AMIGO_COMMANDS()</a>.</p>

</div>
</div>
<a class="anchor" id="a1893674c480c08927066d7e10029d01c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amigo_cmd_wakeup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wakeup (undocumented), just enable PPR response. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000006">Todo:</a></b></dt><dd><ul>
<li>not finished</li>
<li>Sets dsj and Amigo_errors</li>
</ul>
</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>GPIB Errors status - or 0 OK </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000007">Todo:</a></b></dt><dd>FIXME </dd></dl>

<p>Definition at line <a class="el" href="amigo_8c_source.html#l00725">725</a> of file <a class="el" href="amigo_8c_source.html">amigo.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2fc6f1413199d33d2b32e675dd45e181"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Amigo_Command </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>secondary</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Amigo Command and OP Code Processing functions. </p>
<ul>
<li>We disbale PPR as soon as a valide command is decoded.</li>
<li>ONLY process Secondary Commands in listen mode with op codes and optional data<ul>
<li>Ignore Talking.</li>
<li>Ignore Seconday Addresses.</li>
<li>Ignore Execute state "0x60" here.</li>
<li>Must have OP Codes, or Data, and EOI.</li>
</ul>
</li>
<li>Read all of the Data/Opcodes/Parameters at once - while ATN is false.</li>
<li>Last byte read should be EOI or an error.</li>
<li>Unknown OP Code processing rules.<ul>
<li>Skip the remaining codes, Wait for Report Phase.</li>
</ul>
</li>
<li>We enable PPR on exit.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">secondary</td><td>command</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on sucess </dd>
<dd>
or GPIB error flags on fail </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="gpib_8h.html" title="GPIB emulator for HP85 disk emulator project for AVR8. ">gpib.h</a> <a class="el" href="gpib_8h.html#a10916ab21f8ba06e447e898790ef6a4b">ERROR_MASK</a> defines for a full list) </dd></dl>
<p>Reference: A14</p>
<p>Reference: A25</p>
<p>Note: the function will "unread" any commands and return All Data MUST have EOI</p>
<p>Reference: A40</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000009">Todo:</a></b></dt><dd>FIXME </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000010">Todo:</a></b></dt><dd>FIXME </dd></dl>
<p>Reference: A27</p>
<p>Seek 1 byte cylinder</p>
<p>Reference: A27</p>
<p>Seek 2 byte cylinder</p>
<p>Reference: A15</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000011">Todo:</a></b></dt><dd>is this the unit $ ? </dd></dl>
<p>Reference: A35</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000012">Todo:</a></b></dt><dd>unit ??? </dd></dl>
<p>Reference: A48 .. A50</p>
<p>Reference: A23 </p>

<p>Definition at line <a class="el" href="amigo_8c_source.html#l00856">856</a> of file <a class="el" href="amigo_8c_source.html">amigo.c</a>.</p>

<p>Referenced by <a class="el" href="amigo_8c_source.html#l01278">AMIGO_COMMANDS()</a>.</p>

</div>
</div>
<a class="anchor" id="a77b7d46bd469c79c73696a9ae2a3543d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int AMIGO_COMMANDS </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>AMIGO Command state processing. </p>
<ul>
<li>Perform Command, Execute or Reporting Phase functions.<ul>
<li><a class="el" href="amigo_8c.html#a2fc6f1413199d33d2b32e675dd45e181" title="Amigo Command and OP Code Processing functions. ">Amigo_Command()</a>.</li>
<li><a class="el" href="amigo_8c.html#ad7271e45e6b3bb6edef42da4ad5bb25a" title="Amigo Execute command processing. ">Amigo_Execute()</a>.</li>
<li><a class="el" href="amigo_8c.html#a3ab896c5b3810e84072107a6bcf896c9" title="Send DSJ. ">amigo_cmd_dsj()</a>.</li>
</ul>
</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>command.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on sucess </dd>
<dd>
or GPIB error flags on fail </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="gpib_8h.html" title="GPIB emulator for HP85 disk emulator project for AVR8. ">gpib.h</a> <a class="el" href="gpib_8h.html#a10916ab21f8ba06e447e898790ef6a4b">ERROR_MASK</a> defines for a full list. </dd></dl>

<p>Definition at line <a class="el" href="amigo_8c_source.html#l01278">1278</a> of file <a class="el" href="amigo_8c_source.html">amigo.c</a>.</p>

<p>Referenced by <a class="el" href="gpib__task_8c_source.html#l00280">GPIB_COMMANDS()</a>.</p>

</div>
</div>
<a class="anchor" id="ad7271e45e6b3bb6edef42da4ad5bb25a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Amigo_Execute </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>secondary</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Amigo Execute command processing. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">secondary</td><td>command</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on sucess </dd>
<dd>
or GPIB error flags on fail </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="gpib_8h.html" title="GPIB emulator for HP85 disk emulator project for AVR8. ">gpib.h</a> <a class="el" href="gpib_8h.html#a10916ab21f8ba06e447e898790ef6a4b">ERROR_MASK</a> defines for a full list) </dd></dl>

<p>Definition at line <a class="el" href="amigo_8c_source.html#l01166">1166</a> of file <a class="el" href="amigo_8c_source.html">amigo.c</a>.</p>

<p>Referenced by <a class="el" href="amigo_8c_source.html#l01278">AMIGO_COMMANDS()</a>.</p>

</div>
</div>
<a class="anchor" id="a85a3d11b8dd534100df603e4c3514c92"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amigo_format </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>override</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>interleave</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>db</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Format Disk. </p>
<ul>
<li>Refernce: A50.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">override</td><td>not used </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">interleave</td><td>not used </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">db</td><td>byte to fill sector buffer with)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 ok </dd>
<dd>
1 on Error,Sets dsj and Amigo_errors </dd></dl>

<p>Definition at line <a class="el" href="amigo_8c_source.html#l00494">494</a> of file <a class="el" href="amigo_8c_source.html">amigo.c</a>.</p>

<p>Referenced by <a class="el" href="amigo_8c_source.html#l00856">Amigo_Command()</a>.</p>

</div>
</div>
<a class="anchor" id="ae6c9b56f7f0179eecd6d57c2844bc56c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amigo_increment </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Increment sector if it will not overflow. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>user message on overflow.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 ok. </dd>
<dd>
1 error. </dd></dl>

<p>Definition at line <a class="el" href="amigo_8c_source.html#l00383">383</a> of file <a class="el" href="amigo_8c_source.html">amigo.c</a>.</p>

<p>Referenced by <a class="el" href="amigo_8c_source.html#l00550">amigo_buffered_read()</a>, <a class="el" href="amigo_8c_source.html#l00616">amigo_buffered_write()</a>, <a class="el" href="amigo_8c_source.html#l00494">amigo_format()</a>, and <a class="el" href="amigo_8c_source.html#l00437">amigo_verify()</a>.</p>

</div>
</div>
<a class="anchor" id="ab63435382919a7106a374b021861a2e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void amigo_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize Amigo state machine, Disk Position, Error status. </p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000003">Todo:</a></b></dt><dd>verify that we always want PPR disabled EnablePPR(AMIGO_PPR); </dd></dl>

<p>Definition at line <a class="el" href="amigo_8c_source.html#l00157">157</a> of file <a class="el" href="amigo_8c_source.html">amigo.c</a>.</p>

<p>Referenced by <a class="el" href="gpib__task_8c_source.html#l00256">gpib_init_devices()</a>.</p>

</div>
</div>
<a class="anchor" id="a8cbb86a2e44ef4a770a370dcb65d3fbf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amigo_request_logical_address </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set current address in amigo_logical_address[]. </p>
<ul>
<li>Reference: A15-A19</li>
<li>State: Command <dl class="section return"><dt>Returns</dt><dd>0 </dd></dl>
</li>
</ul>

<p>Definition at line <a class="el" href="amigo_8c_source.html#l00185">185</a> of file <a class="el" href="amigo_8c_source.html">amigo.c</a>.</p>

<p>Referenced by <a class="el" href="amigo_8c_source.html#l00856">Amigo_Command()</a>.</p>

</div>
</div>
<a class="anchor" id="afb2f0c0517c5c10c38f8e15b8b281a8c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amigo_request_status </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set drive status in amigo_status[]. </p>
<ul>
<li>Reference: A15-A19.</li>
<li>State: Command. <dl class="section return"><dt>Returns</dt><dd>0 </dd></dl>
</li>
</ul>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000004">Todo:</a></b></dt><dd>dsj </dd></dl>

<p>Definition at line <a class="el" href="amigo_8c_source.html#l00202">202</a> of file <a class="el" href="amigo_8c_source.html">amigo.c</a>.</p>

<p>Referenced by <a class="el" href="amigo_8c_source.html#l00856">Amigo_Command()</a>.</p>

</div>
</div>
<a class="anchor" id="a737360bbcfd3fa3cf9d504757f202e48"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amigo_seek </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDiskType.html">DiskType</a> *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Seek to the position held in the disk structure. </p>
<ul>
<li>Reference: A27.</li>
<li>We should not commit bad head/sector/cylinder values until tested!..</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p</td><td><a class="el" href="structDiskType.html" title="AMIGO Disk structure - position and error status. ">DiskType</a> (Current Disk Position) pointer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 ok </dd>
<dd>
1 error </dd></dl>

<p>Definition at line <a class="el" href="amigo_8c_source.html#l00409">409</a> of file <a class="el" href="amigo_8c_source.html">amigo.c</a>.</p>

<p>Referenced by <a class="el" href="amigo_8c_source.html#l00856">Amigo_Command()</a>.</p>

</div>
</div>
<a class="anchor" id="a7c6a930fa7cc03f1e926ae99dbe1881c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amigo_send_logical_address </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send current address in amigo_logical_address[]. </p>
<ul>
<li>Reference: A15-A19.</li>
<li>State: Execute <dl class="section return"><dt>Returns</dt><dd>0 on sucess </dd>
<dd>
status GPIB error flags on fail </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="gpib_8h.html" title="GPIB emulator for HP85 disk emulator project for AVR8. ">gpib.h</a> <a class="el" href="gpib_8h.html#a10916ab21f8ba06e447e898790ef6a4b">ERROR_MASK</a> defines for a full list. </dd></dl>
</li>
</ul>

<p>Definition at line <a class="el" href="amigo_8c_source.html#l00253">253</a> of file <a class="el" href="amigo_8c_source.html">amigo.c</a>.</p>

<p>Referenced by <a class="el" href="amigo_8c_source.html#l01166">Amigo_Execute()</a>.</p>

</div>
</div>
<a class="anchor" id="af4df946daf08c99b2d3b85318c9e9df8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amigo_send_status </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send drive status in amigo_status[]. </p>
<ul>
<li>Reference: A15-A19.</li>
<li>State: Execute&gt; <dl class="section return"><dt>Returns</dt><dd>0 </dd>
<dd>
status GPIB error flags on fail </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="gpib_8h.html" title="GPIB emulator for HP85 disk emulator project for AVR8. ">gpib.h</a> <a class="el" href="gpib_8h.html#a10916ab21f8ba06e447e898790ef6a4b">ERROR_MASK</a> defines for a full list. </dd></dl>
</li>
</ul>

<p>Definition at line <a class="el" href="amigo_8c_source.html#l00290">290</a> of file <a class="el" href="amigo_8c_source.html">amigo.c</a>.</p>

<p>Referenced by <a class="el" href="amigo_8c_source.html#l01166">Amigo_Execute()</a>.</p>

</div>
</div>
<a class="anchor" id="a437bef06e567b3f6728f2519b9065354"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amigo_todo </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>secondary</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Report any Unimplimented commands. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">secondary</td><td>GPIB seconday command</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 </dd></dl>

<p>Definition at line <a class="el" href="amigo_8c_source.html#l00816">816</a> of file <a class="el" href="amigo_8c_source.html">amigo.c</a>.</p>

<p>Referenced by <a class="el" href="amigo_8c_source.html#l01166">Amigo_Execute()</a>.</p>

</div>
</div>
<a class="anchor" id="a6c99539773ae8be3bd4d3bd7493c16d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amigo_todo_op </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>secondary</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>opcode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Report any Unimplimented commands with Op Codes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">secondary</td><td>GPIB secondary command </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">opcode</td><td>GPIB data byte OP Code </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Length of GOIB data returned </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 </dd></dl>

<p>Definition at line <a class="el" href="amigo_8c_source.html#l00791">791</a> of file <a class="el" href="amigo_8c_source.html">amigo.c</a>.</p>

<p>Referenced by <a class="el" href="amigo_8c_source.html#l00856">Amigo_Command()</a>.</p>

</div>
</div>
<a class="anchor" id="ab08912bf94dc6e8fbe87990ff41f46f0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amigo_verify </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>sectors</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Verify Disk Sectors at current position. </p>
<ul>
<li>Refernce: A36 <dl class="section return"><dt>Returns</dt><dd>0 ok </dd>
<dd>
1 Error, Sets dsj and Amigo_errors </dd></dl>
</li>
</ul>

<p>Definition at line <a class="el" href="amigo_8c_source.html#l00437">437</a> of file <a class="el" href="amigo_8c_source.html">amigo.c</a>.</p>

<p>Referenced by <a class="el" href="amigo_8c_source.html#l00856">Amigo_Command()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a8689fc8752751657671c10ed9744b6a0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Amigo_Errors</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa06fad89376ae2fd6a76e740b065e2a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t amigo_state</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>AMIGO emulator state machine index. </p>

<p>Definition at line <a class="el" href="amigo_8c_source.html#l00101">101</a> of file <a class="el" href="amigo_8c_source.html">amigo.c</a>.</p>

<p>Referenced by <a class="el" href="amigo_8c_source.html#l00856">Amigo_Command()</a>, <a class="el" href="amigo_8c_source.html#l01166">Amigo_Execute()</a>, <a class="el" href="amigo_8c_source.html#l00157">amigo_init()</a>, <a class="el" href="amigo_8c_source.html#l00816">amigo_todo()</a>, and <a class="el" href="amigo_8c_source.html#l00791">amigo_todo_op()</a>.</p>

</div>
</div>
<a class="anchor" id="acdc9db327daa9bd83d5df64bf016a4da"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structDirEntryType.html">DirEntryType</a> de</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>LIF DIrectory Entry. </p>
<ul>
<li>Reference: hpdisk (c) 2014 Anders Gustafsson <a href="#" onclick="location.href='mai'+'lto:'+'and'+'er'+'s.g'+'us'+'taf'+'ss'+'on@'+'pe'+'dag'+'o.'+'fi'; return false;">ander<span style="display: none;">.nosp@m.</span>s.gu<span style="display: none;">.nosp@m.</span>stafs<span style="display: none;">.nosp@m.</span>son@<span style="display: none;">.nosp@m.</span>pedag<span style="display: none;">.nosp@m.</span>o.fi</a></li>
<li>LIF filesystem <a href="http://www.hp9845.net/9845/projects/hpdir/#lif_filesystem">http://www.hp9845.net/9845/projects/hpdir/#lif_filesystem</a></li>
<li>LIF data is BIG endian </li>
</ul>

<p>Definition at line <a class="el" href="amigo_8c_source.html#l00089">89</a> of file <a class="el" href="amigo_8c_source.html">amigo.c</a>.</p>

<p>Referenced by <a class="el" href="format_8c_source.html#l00020">gpib_format_disk()</a>.</p>

</div>
</div>
<a class="anchor" id="a7cde3fe5600434f06d6c872090dc5390"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structVolumeLabelType.html">VolumeLabelType</a> vl</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>LIF data structures used by stand alone formatting utility. </p>
<pre class="fragment">///  Reference: Amigo Command Set Reference used in this document
///  Short Form         Title
///  SS80       "Subset 80 from Fixed and flexible disc drives" 5958-4129
///  HP9123         9123 disc drive manual addendum 5957-6584
///  A          Appendix A "HP 9895A Disc Memory Commends Set"
///             See Receive Status A16
///  L    Buffered Read             0x05    2       A33     Y
///  L    Request Physical Address  0x14    2       A21     Y 0x68
///             See Send Address A20
/// 
///  0x6B Command Op Codes          OP      bytes
///  L    Buffered Read Verify      0x05    2       A37     Y
///  L    ID Triggered Read         0x06    2       A41     Y
/// 
///  0x6C Command Op Codes          OP      bytes
///  L    Unbuffered Read Verify    0x05    2       A38     Y
///  L    Request Physical Address  0x14    2       A21     Y 0x68
///  L    Format Request            0x18    2       A50     N
///  L    Door Lock                 0x19    2       A30     N
///  L    Door Unlock               0x1A    2       A31     N
/// 
///  0x6F Command Op Codes          OP      bytes
///  L    Download Controller       ---     1..256  A26     N
/// 
///  0x70 Command Op Codes          OP      bytes
///  L    HP-300 Clear              ---     1       A23     N
///  T    DSJ                       ---     1       A11     N
/// 
///  0x77 Command Op Codes          OP      bytes
///  T/L  HP-IB CRC                 ---     ---     A30     N
/// 
///  0x7E Command Op Codes          OP      bytes
///  L    Write Loopback Record     ---     1..256  A25     N
///  T    Read Loopback Record      ---     1..256  A14     N
/// 
///  0x7F Command Op Codes          OP      bytes
///  T    Read Self Test Results    ---     2       A13     N
///  L    Initiat Self Test         ---     2       A24     N
/// </pre><p>LIF Volume label structure</p>
<ul>
<li>Reference: hpdisk (c) 2014 Anders Gustafsson <a href="#" onclick="location.href='mai'+'lto:'+'and'+'er'+'s.g'+'us'+'taf'+'ss'+'on@'+'pe'+'dag'+'o.'+'fi'; return false;">ander<span style="display: none;">.nosp@m.</span>s.gu<span style="display: none;">.nosp@m.</span>stafs<span style="display: none;">.nosp@m.</span>son@<span style="display: none;">.nosp@m.</span>pedag<span style="display: none;">.nosp@m.</span>o.fi</a></li>
<li>LIF filesystem <a href="http://www.hp9845.net/9845/projects/hpdir/#lif_filesystem">http://www.hp9845.net/9845/projects/hpdir/#lif_filesystem</a></li>
<li>LIF data is BIG endian </li>
</ul>

<p>Definition at line <a class="el" href="amigo_8c_source.html#l00074">74</a> of file <a class="el" href="amigo_8c_source.html">amigo.c</a>.</p>

<p>Referenced by <a class="el" href="format_8c_source.html#l00020">gpib_format_disk()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 17 2015 20:05:31 for HP85 GPIB Disk Emulator by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>HP85 GPIB Disk Emulator: gpib/gpib.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HP85 GPIB Disk Emulator
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">HP85GPIBDiskEmulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d6b38c553053a83c6809a5b0d50557a4.html">gpib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">gpib.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>GPIB emulator for HP85 disk emulator project for AVR.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="user__config_8h_source.html">user_config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hal_8h_source.html">hal.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="gpib__hal_8h_source.html">gpib_hal.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="posix_8h_source.html">posix.h</a>&quot;</code><br />
</div>
<p><a href="gpib_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a32473ded8149304bd8d0be0abe6e3de8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a32473ded8149304bd8d0be0abe6e3de8">GPIB_BUS_SETTLE_DELAY</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a32473ded8149304bd8d0be0abe6e3de8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dcb5fc551174cd685f0802f86329f3b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a6dcb5fc551174cd685f0802f86329f3b">HTIMEOUT</a>&#160;&#160;&#160;(500000L / GPIB_TASK_TIC_US)</td></tr>
<tr class="memdesc:a6dcb5fc551174cd685f0802f86329f3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the default BUS timeout of 0.5 Seconds in Microseconds.  <a href="#a6dcb5fc551174cd685f0802f86329f3b">More...</a><br /></td></tr>
<tr class="separator:a6dcb5fc551174cd685f0802f86329f3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6e601afadf8d274d9d341323a5c6a3e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#ab6e601afadf8d274d9d341323a5c6a3e">EOI_FLAG</a>&#160;&#160;&#160;0x0100</td></tr>
<tr class="memdesc:ab6e601afadf8d274d9d341323a5c6a3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">bus flags  <a href="#ab6e601afadf8d274d9d341323a5c6a3e">More...</a><br /></td></tr>
<tr class="separator:ab6e601afadf8d274d9d341323a5c6a3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadec0e361e7d2ed6a82ef28bee7231f6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#aadec0e361e7d2ed6a82ef28bee7231f6">SRQ_FLAG</a>&#160;&#160;&#160;0x0200</td></tr>
<tr class="separator:aadec0e361e7d2ed6a82ef28bee7231f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbe287946c2beaa1f76fe5be364c07ad"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#abbe287946c2beaa1f76fe5be364c07ad">ATN_FLAG</a>&#160;&#160;&#160;0x0400</td></tr>
<tr class="separator:abbe287946c2beaa1f76fe5be364c07ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5ae85572f7432aaab806c29177eec8d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#ac5ae85572f7432aaab806c29177eec8d">REN_FLAG</a>&#160;&#160;&#160;0x0800</td></tr>
<tr class="separator:ac5ae85572f7432aaab806c29177eec8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0202c6cc39130a2c251235ef2336cd13"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a0202c6cc39130a2c251235ef2336cd13">IFC_FLAG</a>&#160;&#160;&#160;0x1000</td></tr>
<tr class="separator:a0202c6cc39130a2c251235ef2336cd13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a660f399a9ffcc5c666bcc726073338cb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a660f399a9ffcc5c666bcc726073338cb">PP_FLAG</a>&#160;&#160;&#160;0x2000</td></tr>
<tr class="memdesc:a660f399a9ffcc5c666bcc726073338cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">BUS state flags.  <a href="#a660f399a9ffcc5c666bcc726073338cb">More...</a><br /></td></tr>
<tr class="separator:a660f399a9ffcc5c666bcc726073338cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc15e280bc4f374b8813d358059a121e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#abc15e280bc4f374b8813d358059a121e">TIMEOUT_FLAG</a>&#160;&#160;&#160;0x4000</td></tr>
<tr class="separator:abc15e280bc4f374b8813d358059a121e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89e9767fc024095e7d73f7bd468b8118"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a89e9767fc024095e7d73f7bd468b8118">BUS_ERROR_FLAG</a>&#160;&#160;&#160;0x8000</td></tr>
<tr class="separator:a89e9767fc024095e7d73f7bd468b8118"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a607e563762523269fbdac027224c44fe"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a607e563762523269fbdac027224c44fe">DAV_FLAG</a>&#160;&#160;&#160;0x2000</td></tr>
<tr class="memdesc:a607e563762523269fbdac027224c44fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">handshake flasg used in tracing  <a href="#a607e563762523269fbdac027224c44fe">More...</a><br /></td></tr>
<tr class="separator:a607e563762523269fbdac027224c44fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1da25e2a8e12198ac9a381d09c566a8e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a1da25e2a8e12198ac9a381d09c566a8e">NRFD_FLAG</a>&#160;&#160;&#160;0x4000</td></tr>
<tr class="separator:a1da25e2a8e12198ac9a381d09c566a8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1653d0cd48b2a0c72d422ba4aff114f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#ad1653d0cd48b2a0c72d422ba4aff114f">NDAC_FLAG</a>&#160;&#160;&#160;0x8000</td></tr>
<tr class="separator:ad1653d0cd48b2a0c72d422ba4aff114f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10916ab21f8ba06e447e898790ef6a4b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a10916ab21f8ba06e447e898790ef6a4b">ERROR_MASK</a>&#160;&#160;&#160;(<a class="el" href="gpib_8h.html#a0202c6cc39130a2c251235ef2336cd13">IFC_FLAG</a> | <a class="el" href="gpib_8h.html#abc15e280bc4f374b8813d358059a121e">TIMEOUT_FLAG</a> | <a class="el" href="gpib_8h.html#a89e9767fc024095e7d73f7bd468b8118">BUS_ERROR_FLAG</a>)</td></tr>
<tr class="separator:a10916ab21f8ba06e447e898790ef6a4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0d5ed44566b2ed42807e78e534bc6cc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#ad0d5ed44566b2ed42807e78e534bc6cc">CONTROL_MASK</a>&#160;&#160;&#160;(<a class="el" href="gpib_8h.html#ab6e601afadf8d274d9d341323a5c6a3e">EOI_FLAG</a> | <a class="el" href="gpib_8h.html#aadec0e361e7d2ed6a82ef28bee7231f6">SRQ_FLAG</a> | <a class="el" href="gpib_8h.html#abbe287946c2beaa1f76fe5be364c07ad">ATN_FLAG</a> | <a class="el" href="gpib_8h.html#ac5ae85572f7432aaab806c29177eec8d">REN_FLAG</a>)</td></tr>
<tr class="separator:ad0d5ed44566b2ed42807e78e534bc6cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e6a597bbfd901b2259ad39de928d0c0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a9e6a597bbfd901b2259ad39de928d0c0">DATA_MASK</a>&#160;&#160;&#160;0x00ff</td></tr>
<tr class="separator:a9e6a597bbfd901b2259ad39de928d0c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aede8404e1d3398c2c235eaa17ea2cd5d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#aede8404e1d3398c2c235eaa17ea2cd5d">CMD_MASK</a>&#160;&#160;&#160;0x007f</td></tr>
<tr class="separator:aede8404e1d3398c2c235eaa17ea2cd5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb86657b890e53489f6178591bbd5b97"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#aeb86657b890e53489f6178591bbd5b97">STATUS_MASK</a>&#160;&#160;&#160;0xff00</td></tr>
<tr class="separator:aeb86657b890e53489f6178591bbd5b97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4811a3fa9574a7836b8aaa99f553800"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#ae4811a3fa9574a7836b8aaa99f553800">TRACE_ALL</a>&#160;&#160;&#160;1   /* trace all bus states durring a <a class="el" href="posix_8h.html#af104a2c05bef787e54c6925616e867df">read</a> */</td></tr>
<tr class="memdesc:ae4811a3fa9574a7836b8aaa99f553800"><td class="mdescLeft">&#160;</td><td class="mdescRight">arguments to gpib_read_byte  <a href="#ae4811a3fa9574a7836b8aaa99f553800">More...</a><br /></td></tr>
<tr class="separator:ae4811a3fa9574a7836b8aaa99f553800"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace2bb0d802a911ea5b057e58286641cc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#ace2bb0d802a911ea5b057e58286641cc">NO_TRACE</a>&#160;&#160;&#160;0   /* do not trace bus states durring a <a class="el" href="posix_8h.html#af104a2c05bef787e54c6925616e867df">read</a> */</td></tr>
<tr class="separator:ace2bb0d802a911ea5b057e58286641cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78f2361b60656c29cf6da26f240aaae2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a78f2361b60656c29cf6da26f240aaae2">GPIB_IOBUFF_LEN</a>&#160;&#160;&#160;512 /* Max length of RX/TX <a class="el" href="gpib__task_8h.html#ac63d4e431ab55dddfbf436d87135128e">GPIB</a> string */</td></tr>
<tr class="separator:a78f2361b60656c29cf6da26f240aaae2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:adf764cbdea00d65edcd07bb9953ad2b7"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="gpib_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a22947fdc26f7eb645d6a741ff2f3e3a0">TRACE_DISABLE</a>, 
<a class="el" href="gpib_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a498933b128852cbe066c04ea9ec8edbc">TRACE_READ</a>, 
<a class="el" href="gpib_8h.html#adf764cbdea00d65edcd07bb9953ad2b7ad31617c6a0d0b675927d4332c18f084d">TRACE_BUS</a>
 }<tr class="memdesc:adf764cbdea00d65edcd07bb9953ad2b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPIB read trace states.  <a href="gpib_8h.html#adf764cbdea00d65edcd07bb9953ad2b7">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:adf764cbdea00d65edcd07bb9953ad2b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99fb83031ce9923c84392b4e92f956b5"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br />
&#160;&#160;<a class="el" href="gpib_8h.html#a99fb83031ce9923c84392b4e92f956b5a65d47037f330761936e9ac5eeaaad10b">GPIB_RX_START</a> = 0, 
<a class="el" href="gpib_8h.html#a99fb83031ce9923c84392b4e92f956b5a56f8ad0d5c6639cbc40999880affca9b">GPIB_RX_WAIT_FOR_DAV_LOW</a>, 
<a class="el" href="gpib_8h.html#a99fb83031ce9923c84392b4e92f956b5a3695df589ea237c8fb2cde44c6772176">GPIB_RX_DAV_IS_LOW</a>, 
<a class="el" href="gpib_8h.html#a99fb83031ce9923c84392b4e92f956b5a0bb01cfa5273efc068636f1c80034a54">GPIB_RX_WAIT_FOR_NDAC_HI</a>, 
<br />
&#160;&#160;<a class="el" href="gpib_8h.html#a99fb83031ce9923c84392b4e92f956b5acc231e73315d8ef3d7fd3d65370d0a70">GPIB_RX_WAIT_FOR_DAV_HI</a>, 
<a class="el" href="gpib_8h.html#a99fb83031ce9923c84392b4e92f956b5a8ac376607eb364680eb9733b7bb4d314">GPIB_RX_DAV_IS_HI</a>, 
<a class="el" href="gpib_8h.html#a99fb83031ce9923c84392b4e92f956b5ac946d70a9af711b3bea083113800fdbb">GPIB_RX_FINISH</a>, 
<a class="el" href="gpib_8h.html#a99fb83031ce9923c84392b4e92f956b5abe08af52b6cc1279f948ec251ee06a64">GPIB_RX_ERROR</a>, 
<br />
&#160;&#160;<a class="el" href="gpib_8h.html#a99fb83031ce9923c84392b4e92f956b5abf4490aabbbb58218e31f981cff0e748">GPIB_RX_DONE</a>
<br />
 }</td></tr>
<tr class="separator:a99fb83031ce9923c84392b4e92f956b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc6126af1d45847bc59afa0aa3216b04"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br />
&#160;&#160;<a class="el" href="gpib_8h.html#abc6126af1d45847bc59afa0aa3216b04a0f38fa38044e4624b4e740bb69000e96">GPIB_TX_START</a> = 0, 
<a class="el" href="gpib_8h.html#abc6126af1d45847bc59afa0aa3216b04a3c6f448906221dc9684e4462bf6ab3a8">GPIB_TX_WAIT_READY</a>, 
<a class="el" href="gpib_8h.html#abc6126af1d45847bc59afa0aa3216b04a689ac8ea1c2348752de0be4efc53c85d">GPIB_TX_PUT_DATA</a>, 
<a class="el" href="gpib_8h.html#abc6126af1d45847bc59afa0aa3216b04a83f293bb96f34b5360464e2f910d3074">GPIB_TX_SET_DAV_LOW</a>, 
<br />
&#160;&#160;<a class="el" href="gpib_8h.html#abc6126af1d45847bc59afa0aa3216b04ad8eadaee87ac8dbb9737b417c4600d3b">GPIB_TX_WAIT_FOR_NRFD_LOW</a>, 
<a class="el" href="gpib_8h.html#abc6126af1d45847bc59afa0aa3216b04a233783ae46cb8dba39f16378a6b0d1a1">GPIB_TX_WAIT_FOR_NDAC_HI</a>, 
<a class="el" href="gpib_8h.html#abc6126af1d45847bc59afa0aa3216b04a2ae02c759462700c779c9e6e90383d91">GPIB_TX_SET_DAV_HI</a>, 
<a class="el" href="gpib_8h.html#abc6126af1d45847bc59afa0aa3216b04aafa56cb5893e904ffd2f840391ae1857">GPIB_TX_WAIT_FOR_DAV_HI</a>, 
<br />
&#160;&#160;<a class="el" href="gpib_8h.html#abc6126af1d45847bc59afa0aa3216b04abbe4788363f0c6bb1239ca2867a86c13">GPIB_TX_FINISH</a>, 
<a class="el" href="gpib_8h.html#abc6126af1d45847bc59afa0aa3216b04a42ffa1774dbaeec6c06c30a85c860203">GPIB_TX_ERROR</a>, 
<a class="el" href="gpib_8h.html#abc6126af1d45847bc59afa0aa3216b04abbb8a4da3ebe1792a9dc39e615d0226f">GPIB_TX_DONE</a>
<br />
 }</td></tr>
<tr class="separator:abc6126af1d45847bc59afa0aa3216b04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc29c2ff13d900c2f185ee95427fb06c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="gpib_8h.html#adc29c2ff13d900c2f185ee95427fb06ca260175d57a02d78a58dbcf8d2479d838">GPIB_PP_IDLE</a> = 0, 
<a class="el" href="gpib_8h.html#adc29c2ff13d900c2f185ee95427fb06ca9b409b733bb611072b0a7b0ca3299237">GPIB_PP_DETECTED</a>
 }</td></tr>
<tr class="separator:adc29c2ff13d900c2f185ee95427fb06c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6a3c1941e17626338b878123677ae797"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a6a3c1941e17626338b878123677ae797">gpib_timer_elapsed_begin</a> (void)</td></tr>
<tr class="memdesc:a6a3c1941e17626338b878123677ae797"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start measuring time - used with hpib_timer_elapsed_end()  <a href="#a6a3c1941e17626338b878123677ae797">More...</a><br /></td></tr>
<tr class="separator:a6a3c1941e17626338b878123677ae797"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe05115c27148ec7013e6f62dc94ae78"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#abe05115c27148ec7013e6f62dc94ae78">gpib_timer_reset</a> (void)</td></tr>
<tr class="memdesc:abe05115c27148ec7013e6f62dc94ae78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset elapsed and timeout timers Elapses and Timeout Timers.  <a href="#abe05115c27148ec7013e6f62dc94ae78">More...</a><br /></td></tr>
<tr class="separator:abe05115c27148ec7013e6f62dc94ae78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87ae4b4852f4a1987fc61fec20f53d42"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a87ae4b4852f4a1987fc61fec20f53d42">gpib_timer_elapsed_end</a> (char *msg)</td></tr>
<tr class="memdesc:a87ae4b4852f4a1987fc61fec20f53d42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display user message and time delta since <a class="el" href="gpib_8c.html#a6a3c1941e17626338b878123677ae797" title="Start measuring time - used with hpib_timer_elapsed_end() ">gpib_timer_elapsed_begin()</a> call.  <a href="#a87ae4b4852f4a1987fc61fec20f53d42">More...</a><br /></td></tr>
<tr class="separator:a87ae4b4852f4a1987fc61fec20f53d42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea1dbabf2f23125b36492a2a6c4aeefc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#aea1dbabf2f23125b36492a2a6c4aeefc">gpib_timer_task</a> (void)</td></tr>
<tr class="memdesc:aea1dbabf2f23125b36492a2a6c4aeefc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main GPIB timer task called by low level interrup hander.  <a href="#aea1dbabf2f23125b36492a2a6c4aeefc">More...</a><br /></td></tr>
<tr class="separator:aea1dbabf2f23125b36492a2a6c4aeefc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a687395337dd5c6604a775e3ffd3f006f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a687395337dd5c6604a775e3ffd3f006f">gpib_timeout_set</a> (uint32_t <a class="el" href="time_8h.html#a32b1cbd925752f0cd61d202bbe204a69">time</a>)</td></tr>
<tr class="memdesc:a687395337dd5c6604a775e3ffd3f006f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set GPIB timeout timer in units of GPIB_TASK_TIC_US.  <a href="#a687395337dd5c6604a775e3ffd3f006f">More...</a><br /></td></tr>
<tr class="separator:a687395337dd5c6604a775e3ffd3f006f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2096a86f435acacb3165a9bdb0af076b"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a2096a86f435acacb3165a9bdb0af076b">gpib_timeout_test</a> (void)</td></tr>
<tr class="memdesc:a2096a86f435acacb3165a9bdb0af076b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test GPIB timeout timer for timeout condition.  <a href="#a2096a86f435acacb3165a9bdb0af076b">More...</a><br /></td></tr>
<tr class="separator:a2096a86f435acacb3165a9bdb0af076b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5576f7a1bab2c1beaab0c03bc62bb349"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a5576f7a1bab2c1beaab0c03bc62bb349">gpib_bus_init</a> (int cold)</td></tr>
<tr class="memdesc:a5576f7a1bab2c1beaab0c03bc62bb349"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize GPIB Bus control lines for powerup or reset conditions.  <a href="#a5576f7a1bab2c1beaab0c03bc62bb349">More...</a><br /></td></tr>
<tr class="separator:a5576f7a1bab2c1beaab0c03bc62bb349"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32d2476eec2bbdf15e7db1b901c5a671"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a32d2476eec2bbdf15e7db1b901c5a671">gpib_state_init</a> (void)</td></tr>
<tr class="memdesc:a32d2476eec2bbdf15e7db1b901c5a671"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset GPIB states and related variables.  <a href="#a32d2476eec2bbdf15e7db1b901c5a671">More...</a><br /></td></tr>
<tr class="separator:a32d2476eec2bbdf15e7db1b901c5a671"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adac78c8b4bd167b97a37e9fe7e9e395d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#adac78c8b4bd167b97a37e9fe7e9e395d">gpib_enable_PPR</a> (int bit)</td></tr>
<tr class="separator:adac78c8b4bd167b97a37e9fe7e9e395d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7cace97c893474b3e6c672539a65041"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#ae7cace97c893474b3e6c672539a65041">gpib_disable_PPR</a> (int bit)</td></tr>
<tr class="memdesc:ae7cace97c893474b3e6c672539a65041"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable PPR (Parallel Poll Response) for a device.  <a href="#ae7cace97c893474b3e6c672539a65041">More...</a><br /></td></tr>
<tr class="separator:ae7cace97c893474b3e6c672539a65041"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb8803762af598f3a52cea7cde04eaae"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#adb8803762af598f3a52cea7cde04eaae">gpib_detect_PP</a> (void)</td></tr>
<tr class="memdesc:adb8803762af598f3a52cea7cde04eaae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to detect the Parallel Poll Reposnse state Used only for debugging - it is unlikely that we will catch this state.  <a href="#adb8803762af598f3a52cea7cde04eaae">More...</a><br /></td></tr>
<tr class="separator:adb8803762af598f3a52cea7cde04eaae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01eaf30370a0b43263d19ebaa2fa4a38"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a01eaf30370a0b43263d19ebaa2fa4a38">gpib_assert_ifc</a> (void)</td></tr>
<tr class="memdesc:a01eaf30370a0b43263d19ebaa2fa4a38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assert Interface clear for 250us.  <a href="#a01eaf30370a0b43263d19ebaa2fa4a38">More...</a><br /></td></tr>
<tr class="separator:a01eaf30370a0b43263d19ebaa2fa4a38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae826d722b789698ce9217758fe55fdcb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#ae826d722b789698ce9217758fe55fdcb">gpib_assert_ren</a> (unsigned char state)</td></tr>
<tr class="memdesc:ae826d722b789698ce9217758fe55fdcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assert REN to put instrument in remote mode.  <a href="#ae826d722b789698ce9217758fe55fdcb">More...</a><br /></td></tr>
<tr class="separator:ae826d722b789698ce9217758fe55fdcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fdb3d4996ff399dc2fbfcada417bb1a"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a2fdb3d4996ff399dc2fbfcada417bb1a">gpib_unread</a> (uint16_t ch)</td></tr>
<tr class="memdesc:a2fdb3d4996ff399dc2fbfcada417bb1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPIB ungets one character and all status states.  <a href="#a2fdb3d4996ff399dc2fbfcada417bb1a">More...</a><br /></td></tr>
<tr class="separator:a2fdb3d4996ff399dc2fbfcada417bb1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf877e1057ef73855045f2436ff99cdc"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#aaf877e1057ef73855045f2436ff99cdc">gpib_bus_read</a> (void)</td></tr>
<tr class="memdesc:aaf877e1057ef73855045f2436ff99cdc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read GPIB data BUS only.  <a href="#aaf877e1057ef73855045f2436ff99cdc">More...</a><br /></td></tr>
<tr class="separator:aaf877e1057ef73855045f2436ff99cdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab39377861a160a9128cc759523d26b53"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#ab39377861a160a9128cc759523d26b53">gpib_control_pin_read</a> (void)</td></tr>
<tr class="memdesc:ab39377861a160a9128cc759523d26b53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read GPIB control lines only.  <a href="#ab39377861a160a9128cc759523d26b53">More...</a><br /></td></tr>
<tr class="separator:ab39377861a160a9128cc759523d26b53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d4108418df33c00cda0e65ca34f2485"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a5d4108418df33c00cda0e65ca34f2485">gpib_handshake_pin_read</a> (void)</td></tr>
<tr class="memdesc:a5d4108418df33c00cda0e65ca34f2485"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read GPIB handshake lines only.  <a href="#a5d4108418df33c00cda0e65ca34f2485">More...</a><br /></td></tr>
<tr class="separator:a5d4108418df33c00cda0e65ca34f2485"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6522457933cb70949b8d7601311b1ae"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#ad6522457933cb70949b8d7601311b1ae">gpib_control_port_read</a> (void)</td></tr>
<tr class="memdesc:ad6522457933cb70949b8d7601311b1ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read GPIB control PORT lines only.  <a href="#ad6522457933cb70949b8d7601311b1ae">More...</a><br /></td></tr>
<tr class="separator:ad6522457933cb70949b8d7601311b1ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fee1eddf5fb5c0c18949a158e676dc3"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a7fee1eddf5fb5c0c18949a158e676dc3">gpib_handshake_port_read</a> (void)</td></tr>
<tr class="memdesc:a7fee1eddf5fb5c0c18949a158e676dc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read GPIB PORT handshake lines only.  <a href="#a7fee1eddf5fb5c0c18949a158e676dc3">More...</a><br /></td></tr>
<tr class="separator:a7fee1eddf5fb5c0c18949a158e676dc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3d50cc1d56705d107e2f8fb00692e68"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#ac3d50cc1d56705d107e2f8fb00692e68">gpib_write_byte</a> (uint16_t ch)</td></tr>
<tr class="memdesc:ac3d50cc1d56705d107e2f8fb00692e68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send 1 byte and control line states to GPIB BUS.  <a href="#ac3d50cc1d56705d107e2f8fb00692e68">More...</a><br /></td></tr>
<tr class="separator:ac3d50cc1d56705d107e2f8fb00692e68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81625ecfb43b4df7691a80c9e2ebb837"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a81625ecfb43b4df7691a80c9e2ebb837">gpib_read_byte</a> (int trace)</td></tr>
<tr class="memdesc:a81625ecfb43b4df7691a80c9e2ebb837"><td class="mdescLeft">&#160;</td><td class="mdescRight">read 1 byte and control line status from GPIB BUS  <a href="#a81625ecfb43b4df7691a80c9e2ebb837">More...</a><br /></td></tr>
<tr class="separator:a81625ecfb43b4df7691a80c9e2ebb837"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b960a0e4ba7396e5511f248eea7442c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a5b960a0e4ba7396e5511f248eea7442c">gpib_decode_header</a> (<a class="el" href="posix_8h.html#aed4dabeb9f7c518ded42f930a04abce8">FILE</a> *fo)</td></tr>
<tr class="memdesc:a5b960a0e4ba7396e5511f248eea7442c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Displays help for <a class="el" href="gpib_8c.html#a37b2271a4a82b5c953bf08cf0c571577" title="Calls gpib_decode_str() and dosplays the result. ">gpib_decode()</a> function.  <a href="#a5b960a0e4ba7396e5511f248eea7442c">More...</a><br /></td></tr>
<tr class="separator:a5b960a0e4ba7396e5511f248eea7442c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2e0e847432d7964a28c6faf9d3e1eee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#ae2e0e847432d7964a28c6faf9d3e1eee">gpib_trace_display</a> (uint16_t status, int trace_state)</td></tr>
<tr class="memdesc:ae2e0e847432d7964a28c6faf9d3e1eee"><td class="mdescLeft">&#160;</td><td class="mdescRight">decode/display all control flags and data on the GPIB BUS  <a href="#ae2e0e847432d7964a28c6faf9d3e1eee">More...</a><br /></td></tr>
<tr class="separator:ae2e0e847432d7964a28c6faf9d3e1eee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37b2271a4a82b5c953bf08cf0c571577"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a37b2271a4a82b5c953bf08cf0c571577">gpib_decode</a> (uint16_t ch)</td></tr>
<tr class="memdesc:a37b2271a4a82b5c953bf08cf0c571577"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls gpib_decode_str() and dosplays the result.  <a href="#a37b2271a4a82b5c953bf08cf0c571577">More...</a><br /></td></tr>
<tr class="separator:a37b2271a4a82b5c953bf08cf0c571577"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67f7cdca85091b3eb0eea0051a200fbe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a67f7cdca85091b3eb0eea0051a200fbe">gpib_read_str</a> (uint8_t *buf, int size, uint16_t *status)</td></tr>
<tr class="memdesc:a67f7cdca85091b3eb0eea0051a200fbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read string from GPIB BUS - controlled by status flags.  <a href="#a67f7cdca85091b3eb0eea0051a200fbe">More...</a><br /></td></tr>
<tr class="separator:a67f7cdca85091b3eb0eea0051a200fbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bdaac9496e7a0a3523481f2e8a2b9fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a1bdaac9496e7a0a3523481f2e8a2b9fe">gpib_write_str</a> (uint8_t *buf, int size, uint16_t *status)</td></tr>
<tr class="memdesc:a1bdaac9496e7a0a3523481f2e8a2b9fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send string to GPIB BUS - controlled by status flags.  <a href="#a1bdaac9496e7a0a3523481f2e8a2b9fe">More...</a><br /></td></tr>
<tr class="separator:a1bdaac9496e7a0a3523481f2e8a2b9fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a00023217d54aa8bb6473583593942869"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a00023217d54aa8bb6473583593942869">gpib_iobuff</a> [<a class="el" href="gpib_8h.html#a78f2361b60656c29cf6da26f240aaae2">GPIB_IOBUFF_LEN</a>]</td></tr>
<tr class="memdesc:a00023217d54aa8bb6473583593942869"><td class="mdescLeft">&#160;</td><td class="mdescRight">common IO buffer for <a class="el" href="gpib_8c.html#a67f7cdca85091b3eb0eea0051a200fbe" title="Read string from GPIB BUS - controlled by status flags. ">gpib_read_str()</a> and <a class="el" href="gpib_8c.html#a1bdaac9496e7a0a3523481f2e8a2b9fe" title="Send string to GPIB BUS - controlled by status flags. ">gpib_write_str()</a>  <a href="#a00023217d54aa8bb6473583593942869">More...</a><br /></td></tr>
<tr class="separator:a00023217d54aa8bb6473583593942869"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af219299ebad47daa6631415a8b41345a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#af219299ebad47daa6631415a8b41345a">debuglevel</a></td></tr>
<tr class="memdesc:af219299ebad47daa6631415a8b41345a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Debug flag - used to log GPIB and emulator messages.  <a href="#af219299ebad47daa6631415a8b41345a">More...</a><br /></td></tr>
<tr class="separator:af219299ebad47daa6631415a8b41345a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab80645c1c89c0842fa2e440cb2229c24"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#ab80645c1c89c0842fa2e440cb2229c24">talk31</a></td></tr>
<tr class="separator:ab80645c1c89c0842fa2e440cb2229c24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acef501d1e292f230efac5ed0cddf90e8"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#acef501d1e292f230efac5ed0cddf90e8">talking</a></td></tr>
<tr class="memdesc:acef501d1e292f230efac5ed0cddf90e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">gpib talk address  <a href="#acef501d1e292f230efac5ed0cddf90e8">More...</a><br /></td></tr>
<tr class="separator:acef501d1e292f230efac5ed0cddf90e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f34b1ce42fbf3391219cfedde825495"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a8f34b1ce42fbf3391219cfedde825495">talking_last</a></td></tr>
<tr class="memdesc:a8f34b1ce42fbf3391219cfedde825495"><td class="mdescLeft">&#160;</td><td class="mdescRight">gpib last talk address  <a href="#a8f34b1ce42fbf3391219cfedde825495">More...</a><br /></td></tr>
<tr class="separator:a8f34b1ce42fbf3391219cfedde825495"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a906eb6f6a81521d91f73f9ab2e03b02e"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a906eb6f6a81521d91f73f9ab2e03b02e">listening</a></td></tr>
<tr class="memdesc:a906eb6f6a81521d91f73f9ab2e03b02e"><td class="mdescLeft">&#160;</td><td class="mdescRight">gpib listen address  <a href="#a906eb6f6a81521d91f73f9ab2e03b02e">More...</a><br /></td></tr>
<tr class="separator:a906eb6f6a81521d91f73f9ab2e03b02e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a049cdc383eed2f97e4384a5728c00123"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a049cdc383eed2f97e4384a5728c00123">listening_last</a></td></tr>
<tr class="memdesc:a049cdc383eed2f97e4384a5728c00123"><td class="mdescLeft">&#160;</td><td class="mdescRight">gpib last listen address  <a href="#a049cdc383eed2f97e4384a5728c00123">More...</a><br /></td></tr>
<tr class="separator:a049cdc383eed2f97e4384a5728c00123"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0205f89c3878a7a6cb4ee1f75de35fb3"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a0205f89c3878a7a6cb4ee1f75de35fb3">spoll</a></td></tr>
<tr class="memdesc:a0205f89c3878a7a6cb4ee1f75de35fb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">gpib serial poll status  <a href="#a0205f89c3878a7a6cb4ee1f75de35fb3">More...</a><br /></td></tr>
<tr class="separator:a0205f89c3878a7a6cb4ee1f75de35fb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaad5615d233044464c3661481a6760cd"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#aaad5615d233044464c3661481a6760cd">current</a></td></tr>
<tr class="separator:aaad5615d233044464c3661481a6760cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8bc74192b6d8a3e352b03e724dac5b7"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#ab8bc74192b6d8a3e352b03e724dac5b7">lastcmd</a></td></tr>
<tr class="memdesc:ab8bc74192b6d8a3e352b03e724dac5b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">gpib current and last command  <a href="#ab8bc74192b6d8a3e352b03e724dac5b7">More...</a><br /></td></tr>
<tr class="separator:ab8bc74192b6d8a3e352b03e724dac5b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25538708e408bbc21b380cb6f709f5d8"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a25538708e408bbc21b380cb6f709f5d8">secondary</a></td></tr>
<tr class="memdesc:a25538708e408bbc21b380cb6f709f5d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">gpib secondary  <a href="#a25538708e408bbc21b380cb6f709f5d8">More...</a><br /></td></tr>
<tr class="separator:a25538708e408bbc21b380cb6f709f5d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2376f17d1e7367401184b2a3978bcd3a"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8h.html#a2376f17d1e7367401184b2a3978bcd3a">device</a></td></tr>
<tr class="separator:a2376f17d1e7367401184b2a3978bcd3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>GPIB emulator for HP85 disk emulator project for AVR. </p>
<dl class="section user"><dt>Edit History</dt><dd><ul>
<li>[1.0] [Mike Gore] Initial revision of file.</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Copyright &copy; 2014-2017 Mike Gore, All rights reserved. GPL</dt><dd></dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="http://github.com/magore/hp85disk">http://github.com/magore/hp85disk</a> </dd>
<dd>
<a href="http://github.com/magore/hp85disk/COPYRIGHT.md">http://github.com/magore/hp85disk/COPYRIGHT.md</a> for Copyright details</dd></dl>
<dl class="section user"><dt>Based on work by Anders Gustafsson.</dt><dd></dd></dl>
<dl class="section user"><dt>Copyright &copy; 2014 Anders Gustafsson All rights reserved..</dt><dd></dd></dl>

<p>Definition in file <a class="el" href="gpib_8h_source.html">gpib.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="abbe287946c2beaa1f76fe5be364c07ad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATN_FLAG&#160;&#160;&#160;0x0400</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gpib_8h_source.html#l00035">35</a> of file <a class="el" href="gpib_8h_source.html">gpib.h</a>.</p>

<p>Referenced by <a class="el" href="controller_8c_source.html#l00124">controller_ifc()</a>, <a class="el" href="controller_8c_source.html#l00066">controller_read_str()</a>, <a class="el" href="controller_8c_source.html#l00097">controller_read_trace()</a>, <a class="el" href="controller_8c_source.html#l00038">controller_send_str()</a>, <a class="el" href="gpib_8c_source.html#l00481">gpib_control_pin_read()</a>, <a class="el" href="gpib_8c_source.html#l00516">gpib_control_port_read()</a>, <a class="el" href="gpib_8c_source.html#l00821">gpib_read_byte()</a>, <a class="el" href="gpib_8c_source.html#l01628">gpib_read_str()</a>, <a class="el" href="gpib__task_8c_source.html#l00445">gpib_task()</a>, <a class="el" href="gpib_8c_source.html#l01457">gpib_trace_display()</a>, <a class="el" href="gpib_8c_source.html#l00589">gpib_write_byte()</a>, and <a class="el" href="gpib_8c_source.html#l01717">gpib_write_str()</a>.</p>

</div>
</div>
<a class="anchor" id="a89e9767fc024095e7d73f7bd468b8118"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUS_ERROR_FLAG&#160;&#160;&#160;0x8000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gpib_8h_source.html#l00042">42</a> of file <a class="el" href="gpib_8h_source.html">gpib.h</a>.</p>

<p>Referenced by <a class="el" href="gpib__task_8c_source.html#l00268">gpib_error_test()</a>, <a class="el" href="gpib_8c_source.html#l00821">gpib_read_byte()</a>, and <a class="el" href="gpib_8c_source.html#l01457">gpib_trace_display()</a>.</p>

</div>
</div>
<a class="anchor" id="aede8404e1d3398c2c235eaa17ea2cd5d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CMD_MASK&#160;&#160;&#160;0x007f</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gpib_8h_source.html#l00053">53</a> of file <a class="el" href="gpib_8h_source.html">gpib.h</a>.</p>

<p>Referenced by <a class="el" href="gpib_8c_source.html#l00821">gpib_read_byte()</a>, <a class="el" href="gpib_8c_source.html#l01628">gpib_read_str()</a>, <a class="el" href="gpib__task_8c_source.html#l00445">gpib_task()</a>, and <a class="el" href="gpib_8c_source.html#l01457">gpib_trace_display()</a>.</p>

</div>
</div>
<a class="anchor" id="ad0d5ed44566b2ed42807e78e534bc6cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONTROL_MASK&#160;&#160;&#160;(<a class="el" href="gpib_8h.html#ab6e601afadf8d274d9d341323a5c6a3e">EOI_FLAG</a> | <a class="el" href="gpib_8h.html#aadec0e361e7d2ed6a82ef28bee7231f6">SRQ_FLAG</a> | <a class="el" href="gpib_8h.html#abbe287946c2beaa1f76fe5be364c07ad">ATN_FLAG</a> | <a class="el" href="gpib_8h.html#ac5ae85572f7432aaab806c29177eec8d">REN_FLAG</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gpib_8h_source.html#l00050">50</a> of file <a class="el" href="gpib_8h_source.html">gpib.h</a>.</p>

</div>
</div>
<a class="anchor" id="a9e6a597bbfd901b2259ad39de928d0c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DATA_MASK&#160;&#160;&#160;0x00ff</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gpib_8h_source.html#l00052">52</a> of file <a class="el" href="gpib_8h_source.html">gpib.h</a>.</p>

<p>Referenced by <a class="el" href="gpib_8c_source.html#l01628">gpib_read_str()</a>.</p>

</div>
</div>
<a class="anchor" id="a607e563762523269fbdac027224c44fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DAV_FLAG&#160;&#160;&#160;0x2000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>handshake flasg used in tracing </p>

<p>Definition at line <a class="el" href="gpib_8h_source.html#l00045">45</a> of file <a class="el" href="gpib_8h_source.html">gpib.h</a>.</p>

<p>Referenced by <a class="el" href="gpib_8c_source.html#l00500">gpib_handshake_pin_read()</a>, <a class="el" href="gpib_8c_source.html#l00535">gpib_handshake_port_read()</a>, and <a class="el" href="gpib_8c_source.html#l01457">gpib_trace_display()</a>.</p>

</div>
</div>
<a class="anchor" id="ab6e601afadf8d274d9d341323a5c6a3e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EOI_FLAG&#160;&#160;&#160;0x0100</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>bus flags </p>

<p>Definition at line <a class="el" href="gpib_8h_source.html#l00033">33</a> of file <a class="el" href="gpib_8h_source.html">gpib.h</a>.</p>

<p>Referenced by <a class="el" href="controller_8c_source.html#l00066">controller_read_str()</a>, <a class="el" href="controller_8c_source.html#l00097">controller_read_trace()</a>, <a class="el" href="controller_8c_source.html#l00038">controller_send_str()</a>, <a class="el" href="gpib_8c_source.html#l00481">gpib_control_pin_read()</a>, <a class="el" href="gpib_8c_source.html#l00516">gpib_control_port_read()</a>, <a class="el" href="gpib_8c_source.html#l00821">gpib_read_byte()</a>, <a class="el" href="gpib_8c_source.html#l01628">gpib_read_str()</a>, <a class="el" href="gpib_8c_source.html#l01457">gpib_trace_display()</a>, <a class="el" href="gpib_8c_source.html#l00589">gpib_write_byte()</a>, <a class="el" href="gpib_8c_source.html#l01717">gpib_write_str()</a>, <a class="el" href="gpib__task_8c_source.html#l00575">Send_Identify()</a>, <a class="el" href="ss80_8c_source.html#l01038">SS80_Command_State()</a>, <a class="el" href="ss80_8c_source.html#l00920">SS80_describe()</a>, <a class="el" href="ss80_8c_source.html#l01894">SS80_error_return()</a>, <a class="el" href="ss80_8c_source.html#l00366">SS80_locate_and_read()</a>, <a class="el" href="ss80_8c_source.html#l00497">SS80_locate_and_write()</a>, <a class="el" href="ss80_8c_source.html#l01637">SS80_Report()</a>, <a class="el" href="ss80_8c_source.html#l00843">SS80_send_status()</a>, and <a class="el" href="ss80_8c_source.html#l01435">SS80_Transparent_State()</a>.</p>

</div>
</div>
<a class="anchor" id="a10916ab21f8ba06e447e898790ef6a4b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ERROR_MASK&#160;&#160;&#160;(<a class="el" href="gpib_8h.html#a0202c6cc39130a2c251235ef2336cd13">IFC_FLAG</a> | <a class="el" href="gpib_8h.html#abc15e280bc4f374b8813d358059a121e">TIMEOUT_FLAG</a> | <a class="el" href="gpib_8h.html#a89e9767fc024095e7d73f7bd468b8118">BUS_ERROR_FLAG</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gpib_8h_source.html#l00049">49</a> of file <a class="el" href="gpib_8h_source.html">gpib.h</a>.</p>

<p>Referenced by <a class="el" href="gpib__task_8c_source.html#l00268">gpib_error_test()</a>, <a class="el" href="gpib_8c_source.html#l00821">gpib_read_byte()</a>, <a class="el" href="gpib_8c_source.html#l01628">gpib_read_str()</a>, <a class="el" href="gpib_8c_source.html#l01717">gpib_write_str()</a>, <a class="el" href="gpib__task_8c_source.html#l00575">Send_Identify()</a>, <a class="el" href="ss80_8c_source.html#l01827">SS80_Amigo_Clear()</a>, <a class="el" href="ss80_8c_source.html#l01038">SS80_Command_State()</a>, <a class="el" href="ss80_8c_source.html#l00920">SS80_describe()</a>, <a class="el" href="ss80_8c_source.html#l01894">SS80_error_return()</a>, <a class="el" href="ss80_8c_source.html#l00366">SS80_locate_and_read()</a>, <a class="el" href="ss80_8c_source.html#l00497">SS80_locate_and_write()</a>, <a class="el" href="ss80_8c_source.html#l01637">SS80_Report()</a>, <a class="el" href="ss80_8c_source.html#l00843">SS80_send_status()</a>, and <a class="el" href="ss80_8c_source.html#l01435">SS80_Transparent_State()</a>.</p>

</div>
</div>
<a class="anchor" id="a32473ded8149304bd8d0be0abe6e3de8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GPIB_BUS_SETTLE_DELAY&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gpib_8h_source.html#l00027">27</a> of file <a class="el" href="gpib_8h_source.html">gpib.h</a>.</p>

</div>
</div>
<a class="anchor" id="a78f2361b60656c29cf6da26f240aaae2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GPIB_IOBUFF_LEN&#160;&#160;&#160;512 /* Max length of RX/TX <a class="el" href="gpib__task_8h.html#ac63d4e431ab55dddfbf436d87135128e">GPIB</a> string */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gpib_8h_source.html#l00101">101</a> of file <a class="el" href="gpib_8h_source.html">gpib.h</a>.</p>

<p>Referenced by <a class="el" href="ss80_8c_source.html#l01038">SS80_Command_State()</a>, and <a class="el" href="ss80_8c_source.html#l01435">SS80_Transparent_State()</a>.</p>

</div>
</div>
<a class="anchor" id="a6dcb5fc551174cd685f0802f86329f3b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HTIMEOUT&#160;&#160;&#160;(500000L / GPIB_TASK_TIC_US)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is the default BUS timeout of 0.5 Seconds in Microseconds. </p>

<p>Definition at line <a class="el" href="gpib_8h_source.html#l00029">29</a> of file <a class="el" href="gpib_8h_source.html">gpib.h</a>.</p>

<p>Referenced by <a class="el" href="gpib_8c_source.html#l00821">gpib_read_byte()</a>, and <a class="el" href="gpib_8c_source.html#l00589">gpib_write_byte()</a>.</p>

</div>
</div>
<a class="anchor" id="a0202c6cc39130a2c251235ef2336cd13"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IFC_FLAG&#160;&#160;&#160;0x1000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gpib_8h_source.html#l00037">37</a> of file <a class="el" href="gpib_8h_source.html">gpib.h</a>.</p>

<p>Referenced by <a class="el" href="gpib_8c_source.html#l00481">gpib_control_pin_read()</a>, <a class="el" href="gpib_8c_source.html#l00516">gpib_control_port_read()</a>, <a class="el" href="gpib__task_8c_source.html#l00268">gpib_error_test()</a>, <a class="el" href="gpib_8c_source.html#l00821">gpib_read_byte()</a>, <a class="el" href="gpib_8c_source.html#l01457">gpib_trace_display()</a>, <a class="el" href="gpib_8c_source.html#l00589">gpib_write_byte()</a>, <a class="el" href="ss80_8c_source.html#l00366">SS80_locate_and_read()</a>, and <a class="el" href="ss80_8c_source.html#l00497">SS80_locate_and_write()</a>.</p>

</div>
</div>
<a class="anchor" id="ad1653d0cd48b2a0c72d422ba4aff114f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NDAC_FLAG&#160;&#160;&#160;0x8000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gpib_8h_source.html#l00047">47</a> of file <a class="el" href="gpib_8h_source.html">gpib.h</a>.</p>

<p>Referenced by <a class="el" href="gpib_8c_source.html#l00500">gpib_handshake_pin_read()</a>, <a class="el" href="gpib_8c_source.html#l00535">gpib_handshake_port_read()</a>, and <a class="el" href="gpib_8c_source.html#l01457">gpib_trace_display()</a>.</p>

</div>
</div>
<a class="anchor" id="ace2bb0d802a911ea5b057e58286641cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NO_TRACE&#160;&#160;&#160;0   /* do not trace bus states durring a <a class="el" href="posix_8h.html#af104a2c05bef787e54c6925616e867df">read</a> */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gpib_8h_source.html#l00065">65</a> of file <a class="el" href="gpib_8h_source.html">gpib.h</a>.</p>

<p>Referenced by <a class="el" href="gpib_8c_source.html#l01628">gpib_read_str()</a>, and <a class="el" href="gpib__task_8c_source.html#l00445">gpib_task()</a>.</p>

</div>
</div>
<a class="anchor" id="a1da25e2a8e12198ac9a381d09c566a8e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NRFD_FLAG&#160;&#160;&#160;0x4000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gpib_8h_source.html#l00046">46</a> of file <a class="el" href="gpib_8h_source.html">gpib.h</a>.</p>

<p>Referenced by <a class="el" href="gpib_8c_source.html#l00500">gpib_handshake_pin_read()</a>, <a class="el" href="gpib_8c_source.html#l00535">gpib_handshake_port_read()</a>, and <a class="el" href="gpib_8c_source.html#l01457">gpib_trace_display()</a>.</p>

</div>
</div>
<a class="anchor" id="a660f399a9ffcc5c666bcc726073338cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PP_FLAG&#160;&#160;&#160;0x2000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>BUS state flags. </p>

<p>Definition at line <a class="el" href="gpib_8h_source.html#l00040">40</a> of file <a class="el" href="gpib_8h_source.html">gpib.h</a>.</p>

<p>Referenced by <a class="el" href="gpib_8c_source.html#l00821">gpib_read_byte()</a>, <a class="el" href="gpib_8c_source.html#l01457">gpib_trace_display()</a>, and <a class="el" href="gpib_8c_source.html#l00589">gpib_write_byte()</a>.</p>

</div>
</div>
<a class="anchor" id="ac5ae85572f7432aaab806c29177eec8d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REN_FLAG&#160;&#160;&#160;0x0800</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gpib_8h_source.html#l00036">36</a> of file <a class="el" href="gpib_8h_source.html">gpib.h</a>.</p>

<p>Referenced by <a class="el" href="gpib_8c_source.html#l00481">gpib_control_pin_read()</a>, <a class="el" href="gpib_8c_source.html#l00516">gpib_control_port_read()</a>, <a class="el" href="gpib_8c_source.html#l01457">gpib_trace_display()</a>, and <a class="el" href="printer_8c_source.html#l00186">printer_buffer()</a>.</p>

</div>
</div>
<a class="anchor" id="aadec0e361e7d2ed6a82ef28bee7231f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SRQ_FLAG&#160;&#160;&#160;0x0200</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gpib_8h_source.html#l00034">34</a> of file <a class="el" href="gpib_8h_source.html">gpib.h</a>.</p>

<p>Referenced by <a class="el" href="gpib_8c_source.html#l00481">gpib_control_pin_read()</a>, <a class="el" href="gpib_8c_source.html#l00516">gpib_control_port_read()</a>, and <a class="el" href="gpib_8c_source.html#l01457">gpib_trace_display()</a>.</p>

</div>
</div>
<a class="anchor" id="aeb86657b890e53489f6178591bbd5b97"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STATUS_MASK&#160;&#160;&#160;0xff00</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gpib_8h_source.html#l00054">54</a> of file <a class="el" href="gpib_8h_source.html">gpib.h</a>.</p>

<p>Referenced by <a class="el" href="gpib_8c_source.html#l01628">gpib_read_str()</a>, and <a class="el" href="gpib_8c_source.html#l01717">gpib_write_str()</a>.</p>

</div>
</div>
<a class="anchor" id="abc15e280bc4f374b8813d358059a121e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMEOUT_FLAG&#160;&#160;&#160;0x4000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gpib_8h_source.html#l00041">41</a> of file <a class="el" href="gpib_8h_source.html">gpib.h</a>.</p>

<p>Referenced by <a class="el" href="gpib__task_8c_source.html#l00268">gpib_error_test()</a>, <a class="el" href="gpib_8c_source.html#l00821">gpib_read_byte()</a>, <a class="el" href="gpib_8c_source.html#l01457">gpib_trace_display()</a>, and <a class="el" href="gpib_8c_source.html#l00589">gpib_write_byte()</a>.</p>

</div>
</div>
<a class="anchor" id="ae4811a3fa9574a7836b8aaa99f553800"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRACE_ALL&#160;&#160;&#160;1   /* trace all bus states durring a <a class="el" href="posix_8h.html#af104a2c05bef787e54c6925616e867df">read</a> */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>arguments to gpib_read_byte </p>

<p>Definition at line <a class="el" href="gpib_8h_source.html#l00064">64</a> of file <a class="el" href="gpib_8h_source.html">gpib.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>GPIB read trace states. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7a22947fdc26f7eb645d6a741ff2f3e3a0"></a>TRACE_DISABLE&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7a498933b128852cbe066c04ea9ec8edbc"></a>TRACE_READ&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7ad31617c6a0d0b675927d4332c18f084d"></a>TRACE_BUS&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="gpib_8h_source.html#l00057">57</a> of file <a class="el" href="gpib_8h_source.html">gpib.h</a>.</p>

</div>
</div>
<a class="anchor" id="a99fb83031ce9923c84392b4e92f956b5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a99fb83031ce9923c84392b4e92f956b5a65d47037f330761936e9ac5eeaaad10b"></a>GPIB_RX_START&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a99fb83031ce9923c84392b4e92f956b5a56f8ad0d5c6639cbc40999880affca9b"></a>GPIB_RX_WAIT_FOR_DAV_LOW&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a99fb83031ce9923c84392b4e92f956b5a3695df589ea237c8fb2cde44c6772176"></a>GPIB_RX_DAV_IS_LOW&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a99fb83031ce9923c84392b4e92f956b5a0bb01cfa5273efc068636f1c80034a54"></a>GPIB_RX_WAIT_FOR_NDAC_HI&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a99fb83031ce9923c84392b4e92f956b5acc231e73315d8ef3d7fd3d65370d0a70"></a>GPIB_RX_WAIT_FOR_DAV_HI&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a99fb83031ce9923c84392b4e92f956b5a8ac376607eb364680eb9733b7bb4d314"></a>GPIB_RX_DAV_IS_HI&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a99fb83031ce9923c84392b4e92f956b5ac946d70a9af711b3bea083113800fdbb"></a>GPIB_RX_FINISH&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a99fb83031ce9923c84392b4e92f956b5abe08af52b6cc1279f948ec251ee06a64"></a>GPIB_RX_ERROR&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a99fb83031ce9923c84392b4e92f956b5abf4490aabbbb58218e31f981cff0e748"></a>GPIB_RX_DONE&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="gpib_8h_source.html#l00067">67</a> of file <a class="el" href="gpib_8h_source.html">gpib.h</a>.</p>

</div>
</div>
<a class="anchor" id="abc6126af1d45847bc59afa0aa3216b04"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="abc6126af1d45847bc59afa0aa3216b04a0f38fa38044e4624b4e740bb69000e96"></a>GPIB_TX_START&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="abc6126af1d45847bc59afa0aa3216b04a3c6f448906221dc9684e4462bf6ab3a8"></a>GPIB_TX_WAIT_READY&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="abc6126af1d45847bc59afa0aa3216b04a689ac8ea1c2348752de0be4efc53c85d"></a>GPIB_TX_PUT_DATA&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="abc6126af1d45847bc59afa0aa3216b04a83f293bb96f34b5360464e2f910d3074"></a>GPIB_TX_SET_DAV_LOW&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="abc6126af1d45847bc59afa0aa3216b04ad8eadaee87ac8dbb9737b417c4600d3b"></a>GPIB_TX_WAIT_FOR_NRFD_LOW&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="abc6126af1d45847bc59afa0aa3216b04a233783ae46cb8dba39f16378a6b0d1a1"></a>GPIB_TX_WAIT_FOR_NDAC_HI&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="abc6126af1d45847bc59afa0aa3216b04a2ae02c759462700c779c9e6e90383d91"></a>GPIB_TX_SET_DAV_HI&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="abc6126af1d45847bc59afa0aa3216b04aafa56cb5893e904ffd2f840391ae1857"></a>GPIB_TX_WAIT_FOR_DAV_HI&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="abc6126af1d45847bc59afa0aa3216b04abbe4788363f0c6bb1239ca2867a86c13"></a>GPIB_TX_FINISH&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="abc6126af1d45847bc59afa0aa3216b04a42ffa1774dbaeec6c06c30a85c860203"></a>GPIB_TX_ERROR&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="abc6126af1d45847bc59afa0aa3216b04abbb8a4da3ebe1792a9dc39e615d0226f"></a>GPIB_TX_DONE&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="gpib_8h_source.html#l00080">80</a> of file <a class="el" href="gpib_8h_source.html">gpib.h</a>.</p>

</div>
</div>
<a class="anchor" id="adc29c2ff13d900c2f185ee95427fb06c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="adc29c2ff13d900c2f185ee95427fb06ca260175d57a02d78a58dbcf8d2479d838"></a>GPIB_PP_IDLE&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="adc29c2ff13d900c2f185ee95427fb06ca9b409b733bb611072b0a7b0ca3299237"></a>GPIB_PP_DETECTED&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="gpib_8h_source.html#l00095">95</a> of file <a class="el" href="gpib_8h_source.html">gpib.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a01eaf30370a0b43263d19ebaa2fa4a38"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_assert_ifc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Assert Interface clear for 250us. </p>
<ul>
<li>100us is the Minumum</li>
<li>Reference: SS80 section 3-15, pg 3-26 <dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
</li>
</ul>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00399">399</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="gpib__tests_8c_source.html#l00061">gpib_tests()</a>.</p>

</div>
</div>
<a class="anchor" id="ae826d722b789698ce9217758fe55fdcb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_assert_ren </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Assert REN to put instrument in remote mode. </p>
<ul>
<li>If state != 0 -&gt; assert REN</li>
<li>If state == 0 -&gt; deassert REN <dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
</li>
</ul>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00419">419</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5576f7a1bab2c1beaab0c03bc62bb349"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_bus_init </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cold</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize GPIB Bus control lines for powerup or reset conditions. </p>
<ul>
<li>Set cold = 1 at powerup</li>
<li>set cold = 0 in operation to reset bus state<ul>
<li>If cold = 0 NRFD/NDAC is set to 0 busy</li>
</ul>
</li>
<li>References:<ul>
<li>HP-IB Tutorial</li>
<li>HP-IB pg 8-11 <dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
</li>
</ul>
</li>
</ul>
<p>References: HP-IB Tutorial pg 12,13 HP-IB pg 8-11 </p>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00239">239</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="gpib__task_8c_source.html#l00330">gpib_init_devices()</a>, and <a class="el" href="main_8c_source.html#l00197">main()</a>.</p>

</div>
</div>
<a class="anchor" id="aaf877e1057ef73855045f2436ff99cdc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t gpib_bus_read </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read GPIB data BUS only. </p>
<dl class="section return"><dt>Returns</dt><dd>bus (lower 8 bits) </dd></dl>
<p>if a command byte (ATN low) then strip partity </p>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00466">466</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="gpib_8c_source.html#l00821">gpib_read_byte()</a>.</p>

</div>
</div>
<a class="anchor" id="ab39377861a160a9128cc759523d26b53"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t gpib_control_pin_read </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read GPIB control lines only. </p>
<dl class="section return"><dt>Returns</dt><dd>control lines (upper 8 bits) </dd></dl>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00481">481</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="gpib_8c_source.html#l00821">gpib_read_byte()</a>.</p>

</div>
</div>
<a class="anchor" id="ad6522457933cb70949b8d7601311b1ae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t gpib_control_port_read </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read GPIB control PORT lines only. </p>
<dl class="section return"><dt>Returns</dt><dd>control lines (upper 8 bits) </dd></dl>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00516">516</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

</div>
</div>
<a class="anchor" id="a37b2271a4a82b5c953bf08cf0c571577"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_decode </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calls gpib_decode_str() and dosplays the result. </p>
<p>Display: decode/display all control flags and data on GPIB BUS. </p><dl class="section see"><dt>See also</dt><dd>gpib_decode_str() </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l01588">1588</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="controller_8c_source.html#l00097">controller_read_trace()</a>, <a class="el" href="gpib_8c_source.html#l01628">gpib_read_str()</a>, <a class="el" href="gpib__task_8c_source.html#l00445">gpib_task()</a>, <a class="el" href="gpib__task_8c_source.html#l00192">gpib_trace_task()</a>, and <a class="el" href="gpib_8c_source.html#l01717">gpib_write_str()</a>.</p>

</div>
</div>
<a class="anchor" id="a5b960a0e4ba7396e5511f248eea7442c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_decode_header </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="posix_8h.html#aed4dabeb9f7c518ded42f930a04abce8">FILE</a> *&#160;</td>
          <td class="paramname"><em>fo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Displays help for <a class="el" href="gpib_8c.html#a37b2271a4a82b5c953bf08cf0c571577" title="Calls gpib_decode_str() and dosplays the result. ">gpib_decode()</a> function. </p>
<p>================================================================ </p><h1>READ/WRITE byte testing code - END </h1>
<p>You would call this once at the start of a trace for example. </p><dl class="section see"><dt>See also</dt><dd>: <a class="el" href="gpib_8h.html" title="GPIB emulator for HP85 disk emulator project for AVR. ">gpib.h</a> _FLAGS defines for a full list is control <a class="el" href="drives_8c.html#a9921ae02cadccc99dd6c3a9b68be050a" title="Config file line number. ">lines</a> we track </dd>
<dd>
: gpib_trace() </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fo</td><td>FILE pointer or "stdout" </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l01408">1408</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="gpib__task_8c_source.html#l00192">gpib_trace_task()</a>, and <a class="el" href="printer_8c_source.html#l00255">plot_echo()</a>.</p>

</div>
</div>
<a class="anchor" id="adb8803762af598f3a52cea7cde04eaae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t gpib_detect_PP </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attempt to detect the Parallel Poll Reposnse state Used only for debugging - it is unlikely that we will catch this state. </p>
<ul>
<li>PPR is short for "Parellel Poll Response"</li>
<li>PPR happens when the CIC (controller in charge) holds BOTH of ATN == 0 and EOI == 0</li>
<li>PPR Response happens using hardware The hardware pulls a bit low on the GPIB bus corresponding to the device. But only if any PPR mask bits are set in the hardware</li>
<li>Note: EOI is never used in command mode (ATN = 0) 1) Hardware will automatically hold DATA BUS lines low</li>
<li><a class="el" href="gpib__hal_8c.html#a639fcfaa605f43d589798545d9d1a975" title="Return PPR enable register. ">ppr_reg()</a> determines if we have PPR enabled.</li>
<li>References:<ul>
<li>SS80 pg 3-4, section 3-3 <dl class="section see"><dt>See also</dt><dd><a class="el" href="gpib_8c.html#adac78c8b4bd167b97a37e9fe7e9e395d">gpib_enable_PPR()</a> </dd>
<dd>
<a class="el" href="gpib_8c.html#ae7cace97c893474b3e6c672539a65041" title="Disable PPR (Parallel Poll Response) for a device. ">gpib_disable_PPR()</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>1 if we see a PPR, 0 if not </dd></dl>
</li>
</ul>
</li>
</ul>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00358">358</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="gpib_8c_source.html#l00821">gpib_read_byte()</a>, and <a class="el" href="gpib_8c_source.html#l00589">gpib_write_byte()</a>.</p>

</div>
</div>
<a class="anchor" id="ae7cace97c893474b3e6c672539a65041"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_disable_PPR </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable PPR (Parallel Poll Response) for a device. </p>
<ul>
<li>Reference: SS80 pg 3-4, section 3-3 <dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
</li>
</ul>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00326">326</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="gpib__task_8c_source.html#l00881">GPIB_SECONDARY_ADDRESS()</a>, <a class="el" href="ss80_8c_source.html#l01038">SS80_Command_State()</a>, <a class="el" href="ss80_8c_source.html#l01925">SS80_COMMANDS()</a>, <a class="el" href="ss80_8c_source.html#l00301">SS80_Execute_State()</a>, <a class="el" href="ss80_8c_source.html#l00270">SS80_init()</a>, and <a class="el" href="ss80_8c_source.html#l01435">SS80_Transparent_State()</a>.</p>

</div>
</div>
<a class="anchor" id="adac78c8b4bd167b97a37e9fe7e9e395d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_enable_PPR </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<ul>
<li>Reference: SS80 pg 3-4, section 3-3 <dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
</li>
</ul>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00306">306</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="ss80_8c_source.html#l01827">SS80_Amigo_Clear()</a>, <a class="el" href="ss80_8c_source.html#l01861">SS80_Cancel()</a>, <a class="el" href="ss80_8c_source.html#l01771">SS80_Channel_Independent_Clear()</a>, <a class="el" href="ss80_8c_source.html#l01038">SS80_Command_State()</a>, <a class="el" href="ss80_8c_source.html#l00301">SS80_Execute_State()</a>, <a class="el" href="ss80_8c_source.html#l01807">SS80_Selected_Device_Clear()</a>, <a class="el" href="ss80_8c_source.html#l01435">SS80_Transparent_State()</a>, and <a class="el" href="ss80_8c_source.html#l01789">SS80_Universal_Device_Clear()</a>.</p>

</div>
</div>
<a class="anchor" id="a5d4108418df33c00cda0e65ca34f2485"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t gpib_handshake_pin_read </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read GPIB handshake lines only. </p>
<dl class="section return"><dt>Returns</dt><dd>handshake lines (upper 8 bits) </dd></dl>
<p>for tracing we can reuse the error flag bit values for DAV,NRFD and NDAC FYI: This has no impact on the <a class="el" href="gpib_8c.html#a81625ecfb43b4df7691a80c9e2ebb837" title="read 1 byte and control line status from GPIB BUS ">gpib_read_byte()</a> functions and return values </p>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00500">500</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="gpib_8c_source.html#l00821">gpib_read_byte()</a>.</p>

</div>
</div>
<a class="anchor" id="a7fee1eddf5fb5c0c18949a158e676dc3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t gpib_handshake_port_read </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read GPIB PORT handshake lines only. </p>
<dl class="section return"><dt>Returns</dt><dd>handshake lines (upper 8 bits) </dd></dl>
<p>for tracing we can reuse the error flag bit values for DAV,NRFD and NDAC FYI: This has no impact on the <a class="el" href="gpib_8c.html#a81625ecfb43b4df7691a80c9e2ebb837" title="read 1 byte and control line status from GPIB BUS ">gpib_read_byte()</a> functions and return values </p>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00535">535</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

</div>
</div>
<a class="anchor" id="a81625ecfb43b4df7691a80c9e2ebb837"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t gpib_read_byte </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>trace</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>read 1 byte and control line status from GPIB BUS </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">trace</td><td>if non-zero do full bus handshake trace of read</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>References: HP-IB Tutorial pg 13, 14.</li>
<li>Notes: Their diagram is a bit misleading - they start in the BUS init phase. The init happens much earlier in other code - we NEVER want to do that here or bad things will happen - we could step on the sender NRFD test and false trigger it. We instead start with NRFD FLOAT, and NDAC LOW. See loop in send diagram it has NDAC == 0 and NRFD == 1 in the return to send (beginning) part of the loop.</li>
<li>The HP-IB reference has an error: Read ready actually starts when NRFD = 1 and NDAC = 0. If you look at the Write state diagram that can be confirmed.</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>Lower 8 bits: Data or Command.<ul>
<li>If ATN is LOW then we strip parity from the byte.</li>
</ul>
</li>
<li>Upper 8 bits: Status and Errors.<ul>
<li></li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="gpib_8h.html" title="GPIB emulator for HP85 disk emulator project for AVR. ">gpib.h</a> _FLAGS defines for a full list.<ul>
<li>An error implies the data byte can't be trusted</li>
<li>Control Line Flags.<ul>
<li><a class="el" href="gpib_8h.html#ab6e601afadf8d274d9d341323a5c6a3e" title="bus flags ">EOI_FLAG</a></li>
<li><a class="el" href="gpib_8h.html#aadec0e361e7d2ed6a82ef28bee7231f6">SRQ_FLAG</a></li>
<li><a class="el" href="gpib_8h.html#abbe287946c2beaa1f76fe5be364c07ad">ATN_FLAG</a></li>
<li><a class="el" href="gpib_8h.html#ac5ae85572f7432aaab806c29177eec8d">REN_FLAG</a></li>
<li><a class="el" href="gpib_8h.html#a660f399a9ffcc5c666bcc726073338cb" title="BUS state flags. ">PP_FLAG</a></li>
</ul>
</li>
<li>Error Flags:<ul>
<li><a class="el" href="gpib_8h.html#a0202c6cc39130a2c251235ef2336cd13">IFC_FLAG</a></li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>(data bus, control and error status) </dd></dl>
<p>Signal that we are ready to read</p>
<p>Wait for Data Ready acknowledge</p>
<p>gpib_bus_read strips command parity if ATN is low at read time</p>
<p>Wait for NDAC float HI</p>
<p>Wait for DAV HI</p>
<p>Ready for next byte</p>
<p>Note: see: HP-IB Tutorial pg 13</p><ul>
<li>Remember that NDAC and NRFD are now both LOW!</li>
<li>The spec says to KEEP BOTH LOW when NOT ready to read otherwise we may miss a transfer and cause a controller timeout!</li>
<li>GPIB TX state expects NRFD LOW on entry or it is an ERROR! </li>
</ul>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00821">821</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="controller_8c_source.html#l00097">controller_read_trace()</a>, <a class="el" href="gpib_8c_source.html#l00821">gpib_read_byte()</a>, <a class="el" href="gpib_8c_source.html#l01628">gpib_read_str()</a>, <a class="el" href="gpib__task_8c_source.html#l00445">gpib_task()</a>, and <a class="el" href="gpib__task_8c_source.html#l00192">gpib_trace_task()</a>.</p>

</div>
</div>
<a class="anchor" id="a67f7cdca85091b3eb0eea0051a200fbe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gpib_read_str </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read string from GPIB BUS - controlled by status flags. </p>
<ul>
<li>Status flags used when reading<ul>
<li>If EOI is set then EOI detection will end reading when EOI is detected.</li>
<li>If an early or unexpected EOI is detected a warning is displayed.</li>
<li>The state of ATN controls the type of data read.<ul>
<li>If ATN is set then parity is stripped.</li>
<li>Only data matching the ATN flag state set by user is read.<ul>
<li>If we see a mismatch we "unread" it and exit.</li>
<li>Unreading saves data AND status to be reread later on.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<dl class="section see"><dt>See also</dt><dd>: <a class="el" href="gpib_8c.html#a81625ecfb43b4df7691a80c9e2ebb837" title="read 1 byte and control line status from GPIB BUS ">gpib_read_byte()</a> </dd>
<dd>
: <a class="el" href="gpib_8c.html#a2fdb3d4996ff399dc2fbfcada417bb1a" title="GPIB ungets one character and all status states. ">gpib_unread()</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>Binary gpib string to read </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Size of string we want to read </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">status</td><td>controls sending modes and returns status</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bytes read </dd>
<dd>
status</dd></dl>
<ul>
<li>Errors TIMEOUT_FLAG or IFC_FLAG will cause early exit and set status.<ul>
<li>Lower 8 bits: Data or Command.<ul>
<li>If ATN is LOW then we strip parity from the byte.</li>
</ul>
</li>
<li>Upper 8 bits: Status and Errors.<ul>
<li><dl class="section see"><dt>See also</dt><dd><a class="el" href="gpib_8h.html" title="GPIB emulator for HP85 disk emulator project for AVR. ">gpib.h</a> _FLAGS defines for a full list.</dd></dl>
</li>
<li>An error implies the data byte can't be trusted</li>
<li>Control Line Flags.<ul>
<li>EOI_FLAG</li>
<li>SRQ_FLAG</li>
<li>ATN_FLAG</li>
<li>REN_FLAG</li>
<li>PP_FLAG</li>
</ul>
</li>
<li>Error Flags:<ul>
<li>IFC_FLAG </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>TODO decode this state - for now I just set the EOI_FLAG </dd></dl>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l01628">1628</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="controller_8c_source.html#l00066">controller_read_str()</a>, <a class="el" href="ss80_8c_source.html#l01827">SS80_Amigo_Clear()</a>, <a class="el" href="ss80_8c_source.html#l01038">SS80_Command_State()</a>, <a class="el" href="ss80_8c_source.html#l00497">SS80_locate_and_write()</a>, and <a class="el" href="ss80_8c_source.html#l01435">SS80_Transparent_State()</a>.</p>

</div>
</div>
<a class="anchor" id="a32d2476eec2bbdf15e7db1b901c5a671"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_state_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset GPIB states and related variables. </p>
<ul>
<li>Called at powerup and IFC or reset states.</li>
<li>Does not reset BUS <dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
</li>
</ul>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00281">281</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="gpib__task_8c_source.html#l00445">gpib_task()</a>, <a class="el" href="gpib__task_8c_source.html#l00192">gpib_trace_task()</a>, and <a class="el" href="main_8c_source.html#l00197">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a687395337dd5c6604a775e3ffd3f006f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_timeout_set </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set GPIB timeout timer in units of GPIB_TASK_TIC_US. </p>
<dl class="section see"><dt>See also</dt><dd>: <a class="el" href="gpib_8c.html#a3eb10b99d17dd69982b6bfc820fb29db" title="Test GPIB timeout timer for timeout condition. ">gpib_timeout_test()</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00211">211</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="gpib_8c_source.html#l00821">gpib_read_byte()</a>, and <a class="el" href="gpib_8c_source.html#l00589">gpib_write_byte()</a>.</p>

</div>
</div>
<a class="anchor" id="a2096a86f435acacb3165a9bdb0af076b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t gpib_timeout_test </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Test GPIB timeout timer for timeout condition. </p>
<dl class="section see"><dt>See also</dt><dd>: <a class="el" href="gpib_8c.html#a687395337dd5c6604a775e3ffd3f006f" title="Set GPIB timeout timer in units of GPIB_TASK_TIC_US. ">gpib_timeout_set()</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>1 if timeout, 0 if not </dd></dl>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00224">224</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="gpib_8c_source.html#l00821">gpib_read_byte()</a>, and <a class="el" href="gpib_8c_source.html#l00589">gpib_write_byte()</a>.</p>

</div>
</div>
<a class="anchor" id="a6a3c1941e17626338b878123677ae797"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_timer_elapsed_begin </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start measuring time - used with hpib_timer_elapsed_end() </p>
<p>See <a class="el" href="gpib__hal_8c.html" title="GPIB emulator hardwware layer for HP85 disk emulator project for AVR. ">gpib_hal.c</a> for CPU specific code Provide Elapsed timer and Timeout timer - both in Microseconds We use the lower level clock elapsed timer functions here </p><dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00137">137</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="gpib__tests_8c_source.html#l00061">gpib_tests()</a>, <a class="el" href="ss80_8c_source.html#l00366">SS80_locate_and_read()</a>, and <a class="el" href="ss80_8c_source.html#l00497">SS80_locate_and_write()</a>.</p>

</div>
</div>
<a class="anchor" id="a87ae4b4852f4a1987fc61fec20f53d42"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_timer_elapsed_end </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Display user message and time delta since <a class="el" href="gpib_8c.html#a6a3c1941e17626338b878123677ae797" title="Start measuring time - used with hpib_timer_elapsed_end() ">gpib_timer_elapsed_begin()</a> call. </p>
<p>Display a message </p><dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00168">168</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="gpib__tests_8c_source.html#l00061">gpib_tests()</a>, <a class="el" href="ss80_8c_source.html#l00366">SS80_locate_and_read()</a>, and <a class="el" href="ss80_8c_source.html#l00497">SS80_locate_and_write()</a>.</p>

</div>
</div>
<a class="anchor" id="abe05115c27148ec7013e6f62dc94ae78"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_timer_reset </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset elapsed and timeout timers Elapses and Timeout Timers. </p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00154">154</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="gpib__hal_8c_source.html#l00029">gpib_timer_init()</a>.</p>

</div>
</div>
<a class="anchor" id="aea1dbabf2f23125b36492a2a6c4aeefc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_timer_task </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main GPIB timer task called by low level interrup hander. </p>
<ul>
<li>Provides Down timers and Elapsed timers</li>
<li>Called every GPIB_TASK_TIC_US Micro Seconds <dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
</li>
</ul>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00194">194</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="gpib__hal_8c_source.html#l00029">gpib_timer_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ae2e0e847432d7964a28c6faf9d3e1eee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_trace_display </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>trace_state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>decode/display all control flags and data on the GPIB BUS </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">status</td><td>data bus value (lower 8 bits) control bus (upper 8 bits) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">trace_state</td><td>level of trace detail TRACE_DISABLE = normal bus and control status report from read state only TRACE_READ = trace bus and control reporting from read state only TRACE_BUS = trace control reporting from all non-read states, data bus values are omiited Note: trace states add DAV,NRFD,NDAC and ommit PPR status, BUS error and timeout given that <a class="el" href="gpib_8c.html#a81625ecfb43b4df7691a80c9e2ebb837" title="read 1 byte and control line status from GPIB BUS ">gpib_read_byte()</a> report these anyway<ul>
<li>Lower 8 bits: Data or Command.<ul>
<li>If ATN is LOW then we strip parity from the byte.</li>
</ul>
</li>
<li>Upper 8 bits: Status and Errors.<ul>
<li></li>
</ul>
</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="gpib_8h.html" title="GPIB emulator for HP85 disk emulator project for AVR. ">gpib.h</a> _FLAGS defines for a full list.<ul>
<li>An error implies the data byte can't be trusted</li>
<li>Control Line Flags.<ul>
<li><a class="el" href="gpib_8h.html#ab6e601afadf8d274d9d341323a5c6a3e" title="bus flags ">EOI_FLAG</a></li>
<li><a class="el" href="gpib_8h.html#aadec0e361e7d2ed6a82ef28bee7231f6">SRQ_FLAG</a></li>
<li><a class="el" href="gpib_8h.html#abbe287946c2beaa1f76fe5be364c07ad">ATN_FLAG</a></li>
<li><a class="el" href="gpib_8h.html#ac5ae85572f7432aaab806c29177eec8d">REN_FLAG</a></li>
<li><a class="el" href="gpib_8h.html#a660f399a9ffcc5c666bcc726073338cb" title="BUS state flags. ">PP_FLAG</a></li>
</ul>
</li>
<li>Error Flags:<ul>
<li><a class="el" href="gpib_8h.html#a0202c6cc39130a2c251235ef2336cd13">IFC_FLAG</a> </li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">str</td><td>string pointer to store the decoded result in.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>: <a class="el" href="gpib_8c.html#a81625ecfb43b4df7691a80c9e2ebb837" title="read 1 byte and control line status from GPIB BUS ">gpib_read_byte()</a> </dd>
<dd>
: gpib_write_byte(int ch) </dd>
<dd>
: <a class="el" href="gpib_8c.html#a5b960a0e4ba7396e5511f248eea7442c" title="Displays help for gpib_decode() function. ">gpib_decode_header()</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l01457">1457</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="gpib_8c_source.html#l01588">gpib_decode()</a>, and <a class="el" href="gpib_8c_source.html#l00821">gpib_read_byte()</a>.</p>

</div>
</div>
<a class="anchor" id="a2fdb3d4996ff399dc2fbfcada417bb1a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t gpib_unread </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>GPIB ungets one character and all status states. </p>
<p>Pushes a character back into the read buffer </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td><ul>
<li>Lower 8 bits: Data or Command.<ul>
<li>If ATN is LOW then we strip parity from the byte.</li>
</ul>
</li>
<li>Upper 8 bits: Status and Errors present.<ul>
<li></li>
</ul>
</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="gpib_8h.html" title="GPIB emulator for HP85 disk emulator project for AVR. ">gpib.h</a> _FLAGS defines for a full list. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ch </dd></dl>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00448">448</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="gpib__task_8c_source.html#l00360">GPIB_COMMANDS()</a>, and <a class="el" href="gpib_8c_source.html#l01628">gpib_read_str()</a>.</p>

</div>
</div>
<a class="anchor" id="ac3d50cc1d56705d107e2f8fb00692e68"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t gpib_write_byte </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send 1 byte and control line states to GPIB BUS. </p>
<p>================================================================ </p><h1>READ/WRITE byte testing code - START </h1>
<ul>
<li>We assume we are talking to an active controller already in read state<ul>
<li>Any error flags set on return imply the data was not likely sent</li>
<li>You can OR the control flags ATN_FLAG, EOI_FLAG with (ch) to send them these states.</li>
<li>Results can be displayed for debugging with the decode(ch) funnction</li>
<li>We always exit with NRFD and NDAC LOW</li>
</ul>
</li>
<li>References: HP-IB Tutorial pg13. HP-IB Tutorial pg 13 for the receive and send control line states Correction: The send routine MUST also wait for NDAC LOW before exit. (You can verify this by checking the receive part of the handshake diagram just before it returns to the start of the loop) Failing to wait will cause problems that may masqurade as timing issues.</li>
<li>(It caused problems with my HP85 before I added the code)</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">ch</td><td>( Data or Command ) and control flags<ul>
<li>Upper 8 bits: contril flags</li>
<li>Flags:<ul>
<li>EOI_FLAG</li>
<li>ATN_FLAG</li>
</ul>
</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>Lower 8 bits: Data or Command.<ul>
<li>If ATN is LOW then we strip parity from the byte.</li>
</ul>
</li>
<li>Upper 8 bits: Status and Errors.<ul>
<li></li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="gpib_8h.html" title="GPIB emulator for HP85 disk emulator project for AVR. ">gpib.h</a> _FLAGS defines for a full list.<ul>
<li>An error implies the data byte can't be trusted</li>
<li>Control Line Flags.<ul>
<li><a class="el" href="gpib_8h.html#ab6e601afadf8d274d9d341323a5c6a3e" title="bus flags ">EOI_FLAG</a></li>
<li><a class="el" href="gpib_8h.html#aadec0e361e7d2ed6a82ef28bee7231f6">SRQ_FLAG</a></li>
<li><a class="el" href="gpib_8h.html#abbe287946c2beaa1f76fe5be364c07ad">ATN_FLAG</a></li>
<li><a class="el" href="gpib_8h.html#ac5ae85572f7432aaab806c29177eec8d">REN_FLAG</a></li>
<li><a class="el" href="gpib_8h.html#a660f399a9ffcc5c666bcc726073338cb" title="BUS state flags. ">PP_FLAG</a></li>
</ul>
</li>
<li>Error Flags:<ul>
<li><a class="el" href="gpib_8h.html#a0202c6cc39130a2c251235ef2336cd13">IFC_FLAG</a> </li>
</ul>
</li>
</ul>
</dd></dl>
<p>See HP-IB Tutorial pg 13 for the receive and send control line states</p>
<p>first device is ready</p>
<p>ALL devices are ready</p>
<p>BUS</p>
<p>for DAV to float HI </p>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00589">589</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="controller_8c_source.html#l00124">controller_ifc()</a>, <a class="el" href="controller_8c_source.html#l00066">controller_read_str()</a>, <a class="el" href="controller_8c_source.html#l00097">controller_read_trace()</a>, <a class="el" href="controller_8c_source.html#l00038">controller_send_str()</a>, <a class="el" href="gpib_8c_source.html#l00821">gpib_read_byte()</a>, and <a class="el" href="gpib_8c_source.html#l01717">gpib_write_str()</a>.</p>

</div>
</div>
<a class="anchor" id="a1bdaac9496e7a0a3523481f2e8a2b9fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gpib_write_str </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send string to GPIB BUS - controlled by status flags. </p>
<ul>
<li>Status flags used when sending<ul>
<li>If EOI is set then EOI is sent at last character</li>
</ul>
</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>Binary gpib string to send </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Size of string </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">status</td><td>User status flags that control the sending process.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bytes sent<ul>
<li>will match size on success (no other tests needed).</li>
<li>Any size mismatch impiles error flags IFC_FLAG and TIMEOUT_FLAG.</li>
</ul>
</dd></dl>
<ul>
<li>Errors TIMEOUT_FLAG or IFC_FLAG will cause early exit and set status.<ul>
<li>Lower 8 bits: Data or Command.<ul>
<li>If ATN is LOW then we strip parity from the byte.</li>
</ul>
</li>
<li>Upper 8 bits: Status and Errors.<ul>
<li><dl class="section see"><dt>See also</dt><dd><a class="el" href="gpib_8h.html" title="GPIB emulator for HP85 disk emulator project for AVR. ">gpib.h</a> _FLAGS defines for a full list.</dd></dl>
</li>
<li>An error implies the data byte can't be trusted</li>
<li>Control Line Flags.<ul>
<li>EOI_FLAG</li>
<li>SRQ_FLAG</li>
<li>ATN_FLAG</li>
<li>REN_FLAG</li>
<li>PP_FLAG</li>
</ul>
</li>
<li>Error Flags:<ul>
<li>IFC_FLAG <dl class="section see"><dt>See also</dt><dd>: <a class="el" href="gpib_8c.html#ac3d50cc1d56705d107e2f8fb00692e68" title="Send 1 byte and control line states to GPIB BUS. ">gpib_write_byte()</a> </dd>
<dd>
: <a class="el" href="gpib_8h.html" title="GPIB emulator for HP85 disk emulator project for AVR. ">gpib.h</a> _FLAGS defines for a full list) </dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>Returns </dd></dl>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l01717">1717</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="controller_8c_source.html#l00038">controller_send_str()</a>, <a class="el" href="gpib__task_8c_source.html#l00575">Send_Identify()</a>, <a class="el" href="ss80_8c_source.html#l00920">SS80_describe()</a>, <a class="el" href="ss80_8c_source.html#l01894">SS80_error_return()</a>, <a class="el" href="ss80_8c_source.html#l00366">SS80_locate_and_read()</a>, <a class="el" href="ss80_8c_source.html#l01637">SS80_Report()</a>, and <a class="el" href="ss80_8c_source.html#l00843">SS80_send_status()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="aaad5615d233044464c3661481a6760cd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t current</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00099">99</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="timer_8c_source.html#l00200">clock_elapsed_end()</a>, <a class="el" href="gpib_8c_source.html#l00821">gpib_read_byte()</a>, and <a class="el" href="gpib_8c_source.html#l00281">gpib_state_init()</a>.</p>

</div>
</div>
<a class="anchor" id="af219299ebad47daa6631415a8b41345a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int debuglevel</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Debug flag - used to log GPIB and emulator messages. </p>

<p>Definition at line <a class="el" href="gpib__task_8c_source.html#l00034">34</a> of file <a class="el" href="gpib__task_8c_source.html">gpib_task.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2376f17d1e7367401184b2a3978bcd3a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t device</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a00023217d54aa8bb6473583593942869"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t gpib_iobuff[<a class="el" href="gpib_8h.html#a78f2361b60656c29cf6da26f240aaae2">GPIB_IOBUFF_LEN</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>common IO buffer for <a class="el" href="gpib_8c.html#a67f7cdca85091b3eb0eea0051a200fbe" title="Read string from GPIB BUS - controlled by status flags. ">gpib_read_str()</a> and <a class="el" href="gpib_8c.html#a1bdaac9496e7a0a3523481f2e8a2b9fe" title="Send string to GPIB BUS - controlled by status flags. ">gpib_write_str()</a> </p>
<ul>
<li>References: Documenation and related sources of information<ul>
<li>Web Resources:<ul>
<li><a href="http://www.hp9845.net">http://www.hp9845.net</a></li>
<li><a href="http://www.hpmuseum.net">http://www.hpmuseum.net</a></li>
<li><a href="http://www.hpmusuem.org">http://www.hpmusuem.org</a></li>
<li><a href="http://bitsavers.trailing-edge.com">http://bitsavers.trailing-edge.com</a></li>
<li><a href="http://en.wikipedia.org/wiki/IEEE-488">http://en.wikipedia.org/wiki/IEEE-488</a></li>
</ul>
</li>
</ul>
</li>
<li>SS80 References:<ul>
<li>"SS80" is the short form used in the project</li>
<li>"Subset 80 from Fixed and flexible disc drives"</li>
<li>Printed November, 1985</li>
<li>HP Part# 5958-4129</li>
</ul>
</li>
<li>CS80 References:<ul>
<li>"CS80" is the short form used in the project</li>
<li>"CS/80 Instruction Set Programming Manual"</li>
<li>Printed: APR 1983</li>
<li>HP Part# 5955-3442</li>
</ul>
</li>
<li>Amigo References:<ul>
<li>"Amigo" is the short form used in the project</li>
<li>"Appendix A of 9895A Flexible Disc Memory Service Manual"</li>
<li>HP Part# 09895-90030</li>
</ul>
</li>
<li>HP-IB<ul>
<li>"HP-IB" is the short form used in the project</li>
<li>"Condensed Description of the Hewlett Packard Interface Bus"</li>
<li>Printed March 1975</li>
<li>HP Part# 59401-90030</li>
</ul>
</li>
<li>Tutorial Description of The Hewllet Packard Interface Bus"
  - "HP-IB Tutorial" is the short form used in the project<ul>
<li><a href="http://www.hpmemory.org/an/pdf/hp-ib_tutorial_1980.pdf">http://www.hpmemory.org/an/pdf/hp-ib_tutorial_1980.pdf</a><ul>
<li>Printed January 1983</li>
</ul>
</li>
<li><a href="http://www.ko4bb.com/Manuals/HP_Agilent/HPIB_tutorial_HP.pdf">http://www.ko4bb.com/Manuals/HP_Agilent/HPIB_tutorial_HP.pdf</a><ul>
<li>Printed 1987</li>
</ul>
</li>
</ul>
</li>
<li>GPIB / IEEE 488 Tutorial by Ian Poole<ul>
<li><a href="http://www.radio-electronics.com/info/t_and_m/gpib/ieee488-basics-tutorial.php">http://www.radio-electronics.com/info/t_and_m/gpib/ieee488-basics-tutorial.php</a> </li>
</ul>
</li>
</ul>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00079">79</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="ss80_8c_source.html#l01038">SS80_Command_State()</a>, <a class="el" href="ss80_8c_source.html#l00366">SS80_locate_and_read()</a>, <a class="el" href="ss80_8c_source.html#l00497">SS80_locate_and_write()</a>, and <a class="el" href="ss80_8c_source.html#l01435">SS80_Transparent_State()</a>.</p>

</div>
</div>
<a class="anchor" id="ab8bc74192b6d8a3e352b03e724dac5b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t lastcmd</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gpib current and last command </p>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00099">99</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="gpib__task_8c_source.html#l00727">GPIB_LISTEN()</a>, <a class="el" href="gpib_8c_source.html#l00821">gpib_read_byte()</a>, <a class="el" href="gpib_8c_source.html#l00281">gpib_state_init()</a>, and <a class="el" href="gpib__task_8c_source.html#l00445">gpib_task()</a>.</p>

</div>
</div>
<a class="anchor" id="a906eb6f6a81521d91f73f9ab2e03b02e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t listening</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gpib listen address </p>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00092">92</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

</div>
</div>
<a class="anchor" id="a049cdc383eed2f97e4384a5728c00123"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t listening_last</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gpib last listen address </p>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00094">94</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="gpib__task_8c_source.html#l00727">GPIB_LISTEN()</a>, <a class="el" href="gpib_8c_source.html#l00281">gpib_state_init()</a>, and <a class="el" href="gpib__task_8c_source.html#l00933">listen_cleanup()</a>.</p>

</div>
</div>
<a class="anchor" id="a25538708e408bbc21b380cb6f709f5d8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t secondary</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gpib secondary </p>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00102">102</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="gpib__task_8c_source.html#l00360">GPIB_COMMANDS()</a>, <a class="el" href="gpib_8c_source.html#l00281">gpib_state_init()</a>, and <a class="el" href="gpib__task_8c_source.html#l00445">gpib_task()</a>.</p>

</div>
</div>
<a class="anchor" id="a0205f89c3878a7a6cb4ee1f75de35fb3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t spoll</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gpib serial poll status </p>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00097">97</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab80645c1c89c0842fa2e440cb2229c24"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t talk31</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="acef501d1e292f230efac5ed0cddf90e8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t talking</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gpib talk address </p>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00087">87</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8f34b1ce42fbf3391219cfedde825495"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t talking_last</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gpib last talk address </p>

<p>Definition at line <a class="el" href="gpib_8c_source.html#l00089">89</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p>Referenced by <a class="el" href="gpib_8c_source.html#l00281">gpib_state_init()</a>, and <a class="el" href="gpib__task_8c_source.html#l00801">GPIB_TALK()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 13 2017 01:21:16 for HP85 GPIB Disk Emulator by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>

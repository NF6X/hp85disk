<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HP85 GPIB Disk Emulator: What</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HP85 GPIB Disk Emulator
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">HP85GPIBDiskEmulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">What </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li>LIF utilities to add,extract,translate to and from LIF image fies</li>
<li>TELEDISK to to convert TELEDISK LIF archives into pure LIF files <hr/>
 <h2>Copyrights</h2>
</li>
</ul>
<ul>
<li>Copyright (C) 2014-2017 <em>Mike Gore</em>, All rights reserved. GPL<ul>
<li><a href="http://github.com/magore/hp85disk">http://github.com/magore/hp85disk</a></li>
<li><a href="http://github.com/magore/hp85disk/COPYRIGHT.md">http://github.com/magore/hp85disk/COPYRIGHT.md</a> for Copyright details</li>
<li>lif/teledisk<ul>
<li>My TELEDISK LIF extracter<ul>
<li>Note: The TeleDisk image MUST contain a LIF image - we do NOT translate it</li>
</ul>
</li>
<li>README.txt<ul>
<li>Credits</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr/>
 <h2>Credits</h2>
<ul>
<li>Important Contributions (My converted would not have been possible without these)<ul>
<li>Dave Dunfield, LZSS Code and TeleDisk documentation<ul>
<li>Copyright 2007-2008 Dave Dunfield All rights reserved.</li>
<li>td0_lzss.h</li>
<li>td0_lzss.c<ul>
<li>LZSS decoder</li>
</ul>
</li>
<li>td0notes.txt<ul>
<li>Teledisk Documentation</li>
</ul>
</li>
</ul>
</li>
<li>Jean-Franois DEL NERO, TeleDisk Documentation<ul>
<li>Copyright (C) 2006-2014 Jean-Franois DEL NERO<ul>
<li>wteledsk.htm<ul>
<li>TeleDisk documenation</li>
</ul>
</li>
<li>See his github project<ul>
<li><a href="https://github.com/jfdelnero/libhxcfe">https://github.com/jfdelnero/libhxcfe</a> <hr/>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2>OS Requirements for software building</h2>
<ul>
<li>I used Ubuntu 16.04LTS and 14.04LTS when developing the code<ul>
<li>It should be easy to setup the same build with Windows gcc tools. <hr/>
</li>
</ul>
</li>
</ul>
<h2>Install Ubuntu Packages required for Building</h2>
<ul>
<li>sudo bash</li>
<li><em>apt-get update</em></li>
<li><em>apt-get install aptitude make build-essential binutils gcc</em></li>
<li><em>aptitude &ndash;with-recommends install minicom avr-libc avra avrdude avrdude-doc avrp binutils-avr gcc-avr gdb-avr</em></li>
</ul>
<hr/>
 <h2>Compiling Standlone LIF tools</h2>
<ul>
<li><em>make clean</em></li>
<li><em>make</em> <hr/>
 <h2>LIF command help</h2>
</li>
</ul>
<ul>
<li>./lif</li>
<li>./lif help</li>
<li>./td02lif</li>
</ul>
<hr/>
 <h2>FILES</h2>
<ul>
<li>hp85disk/lif LIF utilities</li>
<li>Code by <em>Mike Gore</em><ul>
<li>Makefile<ul>
<li>Build stand alone Linux / Windows versions of LIF tools and TELEDISK LIF extractor</li>
</ul>
</li>
<li><a class="el" href="lifsup_8c.html" title="LIF file utilities - utilities extracted from hp85disk project for stand alone use. ">lifsup.c</a></li>
<li><a class="el" href="lifsup_8h.html" title="LIF file utilities - utilities extracted from hp85disk project for stand alone use. ">lifsup.h</a><ul>
<li>Stand alone libraries for LIF utility - from various hp85disk libraries</li>
</ul>
</li>
<li><a class="el" href="lifutils_8c.html" title="LIF file utilities. ">lifutils.c</a></li>
<li><a class="el" href="lifutils_8h.html" title="LIF file utilities. ">lifutils.h</a><ul>
<li>LIF image functions, directory listing and file adding.extracting,renaming,deleting</li>
</ul>
</li>
<li><a class="el" href="td02lif_8c.html" title="TeleDisk decoder library targetting LIF format images only. ">td02lif.c</a></li>
<li><a class="el" href="td02lif_8h.html">td02lif.h</a><ul>
<li>My TeleDisk LIF extractor</li>
</ul>
</li>
<li>lif-notes.txt<ul>
<li>My notes on decoding E010 format LIF images for HP-85</li>
</ul>
</li>
<li>README.txt<ul>
<li>This file</li>
</ul>
</li>
</ul>
</li>
<li>hpmuseum.org<ul>
<li>85-SS80.TD0 from hpmuseum.org<ul>
<li>Damaged SS80 Excersizer from HP Musium</li>
</ul>
</li>
<li>85-SS80.LIF<ul>
<li>The current converter automaticcal did these repairs<ul>
<li>cyl 11, side 0 sector 116 mapped to 8</li>
<li>cyl 13, side 0 sector 116 mapped to 11</li>
<li>cyl 15, side 0 sector 10 missing - zero filled</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>hp85disk/lif/teledisk Teledisk LIF format to pure LIF support code</p><ul>
<li>lif/teledisk<ul>
<li>My TELEDISK LIF extracter<ul>
<li>Note: The TeleDisk image MUST contain a LIF image - we do NOT translate it</li>
</ul>
</li>
<li>README.txt<ul>
<li>Credits</li>
</ul>
</li>
<li>Important Contributions (My converted would not have been possible without these)<ul>
<li>Dave Dunfield, LZSS Code and TeleDisk documentation<ul>
<li>Copyright 2007-2008 Dave Dunfield All rights reserved.</li>
<li>td0_lzss.h</li>
<li>td0_lzss.c<ul>
<li>LZSS decoder</li>
</ul>
</li>
<li>td0notes.txt<ul>
<li>Teledisk Documentation</li>
</ul>
</li>
</ul>
</li>
<li>Jean-Franois DEL NERO, TeleDisk Documentation<ul>
<li>Copyright (C) 2006-2014 Jean-Franois DEL NERO<ul>
<li>wteledsk.htm<ul>
<li>TeleDisk documenation</li>
</ul>
</li>
<li>See his github project<ul>
<li><a href="https://github.com/jfdelnero/libhxcfe">https://github.com/jfdelnero/libhxcfe</a> <hr/>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2>LIF HELP</h2>
<p>Run <em>lif</em> or <em>td02lif</em> without options to get help summary</p><ul>
<li><p class="startli">Code by Mike Gore</p><ul>
<li>lif<ul>
<li>Stand alone LIF utilities - part of the HP85disk project for linux</li>
</ul>
</li>
<li>td02lif<ul>
<li>A version of LIF utility that just does TeleoDIsk to LIF conversion</li>
</ul>
</li>
</ul>
<p class="startli">To get help type: ./lif - OR - ./td02lif</p>
</li>
</ul>
<pre>
    ./lif</pre><pre>    Stand alone version of LIF utilities for linux
    HP85 Disk and Device Emulator
     (c) 2014-2017 by Mike Gore
     GNU version 3
    -&gt; <a href="https://github.com/magore/hp85disk">https://github.com/magore/hp85disk</a>
       GIT last pushed:   2017-07-17 17:03:59.102151709 -0400
       Last updated file: 2017-07-27 00:34:18.512415597 -0400</pre><pre>    Usage: td02lif file.td0 file.lif<ul>
<li>OR -</li>
</ul>
</pre><pre>    lif help
    lif add lifimage lifname from_ascii_file
    lif addbin lifimage lifname from_lif_file
    lif create lifimage label directory_sectors sectors
    lif del lifimage name
    lif dir lifimage
    lif extract lifimage lifname to_ascii_file
    lif extractbin lifimage lifname to_lif_file
    lif rename lifimage oldlifname newlifname
    lif td02lif image.td0 image.lif
</pre><h2>TELEDISK conversion technical notes - extracting LIF data</h2>
<ul>
<li>Unfortunately TeleDisk saves everything in on all sides and tracks.<ul>
<li>Question: what happens when we have a disk formatted multiple times with differing parameters ?</li>
</ul>
</li>
<li>Example 1<ul>
<li>Say we start an image that was two sided 80 track disk, 9 sectors, 512 byte sectors</li>
<li>Later on someone formats it single sides 35 track disk, 16 sectors, 256 bytes sectors</li>
</ul>
</li>
<li>Analisis<ul>
<li>We examing the first 30 tracks on both sides looking for:<ul>
<li>FIRST sector on both sides and its size</li>
<li>LAST sector on both size that matches the size</li>
<li>COUNT of sectors on each side that matches the size</li>
</ul>
</li>
<li>We then compare sector COUNT, compare sector SIZE, and FIRSTd<ul>
<li>If SIZE or COUNT is not the same reject</li>
<li>If only FISRT mismatches we then check FIRST for continuation of numbering on each side</li>
</ul>
</li>
</ul>
</li>
<li>Conclusion<ul>
<li>We can reject side two by comparing the<ul>
<li>FIRST sector number, Number of sectors and size</li>
</ul>
</li>
</ul>
</li>
<li>Eample 2<ul>
<li>We have a double sided disk that is formated single sided with FIRST,LAST,COUNT and SIZE matching</li>
</ul>
</li>
<li>Analisis<ul>
<li>We have no automated way to reject side two</li>
</ul>
</li>
<li>Conclusion<ul>
<li>The user will have to override heads <hr/>
</li>
</ul>
</li>
</ul>
<h2>TELEDISK extracting LIF data user overrides</h2>
<ul>
<li>Number of Sides:<ul>
<li>You CAN specify single sided override for two sided disks<ul>
<li>(as defined in the TeleDisk headers)</li>
</ul>
</li>
<li>However you can NOT specify 2 sided mode if the TeleDisk image headers say there is one side</li>
</ul>
</li>
<li>Sector Size override<ul>
<li>Rather then using the SIZE of the FIRST sector as a filter the user can manually pick the size</li>
</ul>
</li>
<li>Number of tracks overrides<ul>
<li>The LIF decoder stops after the last sector of the last file so this option is ignored </li>
</ul>
</li>
</ul>
<hr/>
<p>## TELEDISK LIF conversion example </p><pre>
./td02lif 85-SS80.TD0 1.LIF
TeleDisk file:         85-SS80.TD0
        Version:       21
        Not Compressed
        Density:       00h
        DriveType:     04h
        TrackDensity:  00h
        DosMode:       00h
        Sides:         02
        Comment Size:  84
        Comment Date:  Sun Apr  1 12:47:51 2008</pre><pre>HP-85 S/W, SS/80 EXERCISER, 5010-0310/2537. DOES NOT INCLUDE THE SERVC F</pre><pre>Warning: alternate CRC flag not implemented
        cylinder:00, head:00, sector:17, size:128, index:17
Warning: Sector:08 missing - found alternate sector:116
         Location: cylinder:11, head:00, sector:08, size:256, index:8
Warning: Sector:11 missing - found alternate sector:116
         Location: cylinder:13, head:00, sector:11, size:256, index:11
Warning: Sector:10 missing - zero filling
         Location: Track: Cyl: 15, Side: 00
Warning: Sector:01 missing - zero filling
         Location: Track: Cyl: 30, Side: 00
Warning: Sector:09 missing - zero filling
         Location: Track: Cyl: 41, Side: 00
Warning: Sector:11 missing - zero filling
         Location: Track: Cyl: 61, Side: 00
Warning: Sector:01 missing - zero filling
         Location: Track: Cyl: 62, Side: 00
Warning: Sector:10 missing - zero filling
         Location: Track: Cyl: 63, Side: 00</pre><pre>Disk Layout
         Sides:              1
         Tracks:            70
         Sectors Per Track: 16
         Sector Size:      256
Side: 0
         Sector numbering:  0 to 15
         Sector size:     256
         Sector count:     16
Side: 1
         Sector numbering:  1 to  9
         Sector size:     512
         Sector count:      9</pre><pre>Warning: rejecting side two
         Warning: Sector size:  NOT the same on both sides
         Warning: Sector count: NOT the same on both sides
         Warning: Sector range: NOT a continuation of side 0</pre><pre>LIF sectors processed: 1120</pre><pre>Done LIF image: [1.LIF] wrote: [01DAh] sectors</pre><pre>Volume:[&lt;EMPTY&gt;] Date:[&lt;EMPTY&gt;]
NAME         TYPE   START SECTOR        SIZE    RECSIZE   DATE
MANUAL      E020h            10h       26880        256   &lt;EMPTY&gt;
RW-TES      E020h            79h       27648        256   &lt;EMPTY&gt;
OPER        E020h            E5h       28672        256   &lt;EMPTY&gt;
REVID       E020h           155h       27136        256   &lt;EMPTY&gt;
Autost      E020h           1BFh        6912        256   &lt;EMPTY&gt;</pre><pre>       5 Files
       0 Purged
     458 Used sectors
       0 Free sectors</pre><pre></pre> <hr/>
<h2>LIF command help</h2>
<ul>
<li>lif add lifimage lifname from_ascii_file<ul>
<li>Add ASCII file converted to E010 format to existing LIF image on SD card<ul>
<li>lif add /amigo1.lif TEST1 /test.bas</li>
<li>lif add /amigo1.lif TREK85 /TREK85/TREK85.BAS</li>
</ul>
</li>
<li>Notes:<ul>
<li>Strings must be no longer then sector size - 3</li>
<li>Any trailing "\n" and/or "\r" are coverted to "\n" when stored in LIF file</li>
</ul>
</li>
</ul>
</li>
<li>lif addbin lifimage lifname from_lif_image<ul>
<li>Adding a binary LIF image files to another LIF image</li>
<li>Examples<ul>
<li>lif addbin /amigo1.lif TEST /test.lif</li>
<li>lif addbin /amigo1.lif TREK85 /TREK85/trek.lif</li>
</ul>
</li>
<li>Notes about TREK85 in the examples<ul>
<li>Author: TREK85 port was done by Martin Hepperle</li>
<li><a href="https://groups.io/g/hpseries80/topic/star_trek_game_for_hp_85/4845241">https://groups.io/g/hpseries80/topic/star_trek_game_for_hp_85/4845241</a></li>
</ul>
</li>
</ul>
</li>
<li>lif create lifimage liflabel directory_sectors total_sectors<ul>
<li>Create a new LIF image</li>
<li>Example<ul>
<li>lif create /amigo3.lif AMIGO3 15 1120<ul>
<li>This formats an LIF image file with 15 directory sectors and a length of 1120 (16 * 2 * 35) sectors</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>lif del lifimage lifname<ul>
<li>Delete a file from LIF image on SD card</li>
<li>Example *lif del /amigo1.lif TREK85</li>
</ul>
</li>
<li>lif dir lifimage<ul>
<li>Directory listing of LIF image</li>
</ul>
</li>
<li><p class="startli">Example: </p><pre>
      lif dir amigo1.lif
      Volume:[AMIGO2] Date:[&lt;EMPTY&gt;]
      NAME         TYPE   START SECTOR        SIZE    RECSIZE   DATE
      HELLO       e020h            10h         512        256   &lt;EMPTY&gt;
      CIRCLE      e020h            12h         256        256   &lt;EMPTY&gt;
      GPIB-S      e020h            13h         512        256   &lt;EMPTY&gt;
      GPIB-T      e020h            15h        1536        256   &lt;EMPTY&gt;
      GPIB7       e020h            1bh         256        256   &lt;EMPTY&gt;
      AMIGO2      e020h            1ch         256        256   &lt;EMPTY&gt;
      TREK85      e010h            1dh       27615        256   Tue Jun 27 16:28:28 2017
      HELLO3      e010h            8bh         344        256   Sun Jun 18 18:13:24 2017
      TREK85B     e010h            8dh       27615        256   Tue Jun 27 16:28:28 2017</pre><pre>             9 Files
             0 Purged
           231 Used sectors
           873 Free sectors
      </pre></li>
<li>lif extract lifimage lifname to_ascii_file<ul>
<li>Extracts E010 file from LIF image converting to ASCII file on SD card</li>
<li>Example lif extract /amigo1.lif HELLO3 /HELLO3.BAS</li>
</ul>
</li>
<li>lif extractbin lifimage llifname to_lif_image<ul>
<li>Extracts LIF file from a LIF image and saves it as new LIF image</li>
<li>Example<ul>
<li>lif extractbin /amigo1.lif HELLO3 /hello3.lif</li>
</ul>
</li>
</ul>
</li>
<li>lif rename lifimage oldlifname newlifname<ul>
<li>Renames file in LIF image</li>
<li>Example<ul>
<li>lif rename /amigo1.lif HELLO3 HELLO4 <hr/>
 <h2>TELEDISK command help</h2>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Convert TeleDIsk LIF encoded disk into pure LIF file</p><ul>
<li><em>lif td02lif image.td0 image.lif</em> <hr/>
 </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Apr 11 2020 18:57:33 for HP85 GPIB Disk Emulator by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
